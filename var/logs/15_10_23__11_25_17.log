<!-- logged with runtime paparazzi_version v5.7_devel-338-gea1408e-dirty -->
<!-- logged with build paparazzi_version v5.7_devel-338-gea1408e-dirty -->
<configuration time_of_day="1445592317.24" data_file="15_10_23__11_25_17.data">
  <conf>
    <aircraft name="ARDrone2_default" ac_id="10" airframe="airframes/examples/ardrone2.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_guidance.xml settings/control/stabilization_rate.xml settings/control/stabilization_att_int_quat.xml settings/estimation/ahrs_int_cmpl_quat.xml settings/estimation/body_to_imu.xml" settings_modules="modules/gps_ubx_ucenter.xml modules/air_data.xml modules/geo_mag.xml" gui_color="red">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 2.0"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="test yaw" no="10">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="11">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="16">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="16" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="10" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="ardrone2">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="ardrone2"/>
          <target NAME="nps" BOARD="pc">
            <subsystem TYPE="jsbsim" NAME="fdm"/>
          </target>
          <define VALUE="TRUE" NAME="USE_SONAR"/>
          <subsystem TYPE="transparent_udp" NAME="telemetry"/>
          <subsystem TYPE="datalink" NAME="radio_control"/>
          <subsystem NAME="motor_mixing"/>
          <subsystem TYPE="ardrone2" NAME="actuators"/>
          <subsystem TYPE="ardrone2" NAME="imu"/>
          <subsystem TYPE="ublox" NAME="gps"/>
          <subsystem TYPE="int_quat" NAME="stabilization"/>
          <subsystem TYPE="int_cmpl_quat" NAME="ahrs"/>
          <subsystem TYPE="extended" NAME="ins"/>
        </firmware>
        <modules MAIN_FREQ="512">
          <load NAME="bat_voltage_ardrone2.xml"/>
          <load NAME="gps_ubx_ucenter.xml"/>
          <load NAME="send_imu_mag_current.xml"/>
          <load NAME="air_data.xml"/>
          <load NAME="geo_mag.xml"/>
        </modules>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="3000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="1" NAME="TOP_LEFT" MIN="0" MAX="500"/>
          <servo NO="1" NEUTRAL="1" NAME="TOP_RIGHT" MIN="0" MAX="500"/>
          <servo NO="2" NEUTRAL="1" NAME="BOTTOM_RIGHT" MIN="0" MAX="500"/>
          <servo NO="3" NEUTRAL="1" NAME="BOTTOM_LEFT" MIN="0" MAX="500"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_motors_on,FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="2048" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="-180" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="16." NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.0" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.513081" NAME="H_X"/>
          <define VALUE="-0.00242783" NAME="H_Y"/>
          <define VALUE="0.858336" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="10000" NAME="SP_MAX_P"/>
          <define VALUE="10000" NAME="SP_MAX_Q"/>
          <define VALUE="10000" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="4" NAME="REF_TAU"/>
          <define VALUE="400" NAME="GAIN_P"/>
          <define VALUE="400" NAME="GAIN_Q"/>
          <define VALUE="350" NAME="GAIN_R"/>
          <define VALUE="75" NAME="IGAIN_P"/>
          <define VALUE="75" NAME="IGAIN_Q"/>
          <define VALUE="50" NAME="IGAIN_R"/>
          <define VALUE="300" NAME="DDGAIN_P"/>
          <define VALUE="300" NAME="DDGAIN_Q"/>
          <define VALUE="300" NAME="DDGAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="600" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="250" NAME="DEADBAND_R"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="200" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(4000.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="850" NAME="PHI_PGAIN"/>
          <define VALUE="425" NAME="PHI_DGAIN"/>
          <define VALUE="0" NAME="PHI_IGAIN"/>
          <define VALUE="850" NAME="THETA_PGAIN"/>
          <define VALUE="425" NAME="THETA_DGAIN"/>
          <define VALUE="0" NAME="THETA_IGAIN"/>
          <define VALUE="1000" NAME="PSI_PGAIN"/>
          <define VALUE="700" NAME="PSI_DGAIN"/>
          <define VALUE="0" NAME="PSI_IGAIN"/>
          <define VALUE="0" NAME="PHI_DDGAIN"/>
          <define VALUE="0" NAME="THETA_DDGAIN"/>
          <define VALUE="100" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="13" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="FALSE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_ardrone2" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_ardrone2.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="9.7" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="false" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="2000"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Rate Loop">
            <dl_setting VAR="stabilization_rate_gain.p" TYPE="int32" STEP="1" SHORTNAME="pgain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_P" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
            <dl_setting VAR="stabilization_rate_gain.q" TYPE="int32" STEP="1" SHORTNAME="pgain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_Q" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
            <dl_setting VAR="stabilization_rate_gain.r" TYPE="int32" STEP="1" SHORTNAME="pgain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_R" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
            <dl_setting VAR="stabilization_rate_igain.p" TYPE="int32" STEP="1" SHORTNAME="igain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_P" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_igain.q" TYPE="int32" STEP="1" SHORTNAME="igain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_Q" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_igain.r" TYPE="int32" STEP="1" SHORTNAME="igain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_R" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_ddgain.p" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_DDGAIN_P" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_ddgain.q" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_DDGAIN_Q" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_ddgain.r" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_DDGAIN_R" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Att Loop">
            <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="400"/>
            <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stab_att_ref_model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
            <dl_setting VAR="stab_att_ref_model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
            <dl_setting VAR="stab_att_ref_model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
            <dl_setting VAR="stab_att_ref_model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
            <dl_setting VAR="stab_att_ref_model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
            <dl_setting VAR="stab_att_ref_model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps|test_ahrs">
        <dl_settings>
          <dl_settings NAME="AHRS">
            <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
            <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
            <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
            <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
            <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps|test_imu|test_ahrs">
        <dl_settings>
          <dl_settings NAME="body2imu">
            <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
            <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
            <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
            <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="ARDrone2_flip" ac_id="14" airframe="airframes/TUDelft/airframes/ardrone2_flip.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_guidance.xml settings/control/stabilization_rate.xml settings/estimation/ahrs_int_cmpl_quat.xml settings/estimation/body_to_imu.xml settings/control/stabilization_att_indi.xml" settings_modules="modules/air_data.xml" gui_color="red">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 2.0"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="test yaw" no="10">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="11">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="16">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="16" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="10" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="ardrone2_indi">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="ardrone2">
            <define NAME="AUTOPILOT_DISABLE_AHRS_KILL"/>
          </target>
          <target NAME="nps" BOARD="pc">
            <subsystem TYPE="jsbsim" NAME="fdm"/>
          </target>
          <define VALUE="FALSE" NAME="USE_SONAR"/>
          <subsystem TYPE="transparent_udp" NAME="telemetry"/>
          <subsystem TYPE="datalink" NAME="radio_control"/>
          <subsystem NAME="motor_mixing"/>
          <subsystem TYPE="ardrone2" NAME="actuators"/>
          <subsystem TYPE="ardrone2" NAME="imu"/>
          <subsystem TYPE="datalink" NAME="gps"/>
          <subsystem TYPE="indi" NAME="stabilization"/>
          <subsystem TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
          </subsystem>
          <subsystem TYPE="extended" NAME="ins"/>
        </firmware>
        <modules MAIN_FREQ="512">
          <load NAME="bat_voltage_ardrone2.xml"/>
          <load NAME="send_imu_mag_current.xml"/>
          <load NAME="air_data.xml"/>
          <load NAME="logger_file.xml"/>
        </modules>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="3000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="1" NAME="TOP_LEFT" MIN="0" MAX="500"/>
          <servo NO="1" NEUTRAL="1" NAME="TOP_RIGHT" MIN="0" MAX="500"/>
          <servo NO="2" NEUTRAL="1" NAME="BOTTOM_RIGHT" MIN="0" MAX="500"/>
          <servo NO="3" NEUTRAL="1" NAME="BOTTOM_LEFT" MIN="0" MAX="500"/>
        </servos>
        <section NAME="MISC">
          <define VALUE="70.0" NAME="STOP_ROLL_CMD_ANGLE"/>
          <define VALUE="0.5" NAME="FIRST_THRUST_DURATION"/>
          <define VALUE="8500" NAME="FINAL_THRUST_LEVEL"/>
        </section>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_motors_on,FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="2048" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="-180" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="16." NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.0" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="10000" NAME="SP_MAX_P"/>
          <define VALUE="10000" NAME="SP_MAX_Q"/>
          <define VALUE="10000" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="4" NAME="REF_TAU"/>
          <define VALUE="400" NAME="GAIN_P"/>
          <define VALUE="400" NAME="GAIN_Q"/>
          <define VALUE="350" NAME="GAIN_R"/>
          <define VALUE="75" NAME="IGAIN_P"/>
          <define VALUE="75" NAME="IGAIN_Q"/>
          <define VALUE="50" NAME="IGAIN_R"/>
          <define VALUE="300" NAME="DDGAIN_P"/>
          <define VALUE="300" NAME="DDGAIN_Q"/>
          <define VALUE="300" NAME="DDGAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="180" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="250" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.032" NAME="G1_P"/>
          <define VALUE="0.025" NAME="G1_Q"/>
          <define VALUE="0.0032" NAME="G1_R"/>
          <define VALUE="0.16" NAME="G2_R"/>
          <define VALUE="380.0" NAME="REF_ERR_P"/>
          <define VALUE="380.0" NAME="REF_ERR_Q"/>
          <define VALUE="250.0" NAME="REF_ERR_R"/>
          <define VALUE="21.6" NAME="REF_RATE_P"/>
          <define VALUE="21.6" NAME="REF_RATE_Q"/>
          <define VALUE="21.0" NAME="REF_RATE_R"/>
          <define VALUE="20.0" NAME="FILT_OMEGA"/>
          <define VALUE="0.55" NAME="FILT_ZETA"/>
          <define VALUE="20.0" NAME="FILT_OMEGA_R"/>
          <define VALUE="0.55" NAME="FILT_ZETA_R"/>
          <define VALUE="0.06" NAME="ACT_DYN_P"/>
          <define VALUE="0.06" NAME="ACT_DYN_Q"/>
          <define VALUE="0.06" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="13" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="FALSE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="{&quot;nw_motor&quot;, &quot;ne_motor&quot;, &quot;se_motor&quot;, &quot;sw_motor&quot;}" NAME="ACTUATOR_NAMES"/>
          <define VALUE="&quot;simple_ardrone2&quot;" NAME="JSBSIM_MODEL"/>
          <define VALUE="&quot;reset00&quot;" NAME="JSBSIM_INIT"/>
          <define VALUE="&quot;nps_sensors_params_ardrone2.h&quot;" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_FLIP" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_FLIP" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="9.7" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="false" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="2000"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Rate Loop">
            <dl_setting VAR="stabilization_rate_gain.p" TYPE="int32" STEP="1" SHORTNAME="pgain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_P" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
            <dl_setting VAR="stabilization_rate_gain.q" TYPE="int32" STEP="1" SHORTNAME="pgain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_Q" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
            <dl_setting VAR="stabilization_rate_gain.r" TYPE="int32" STEP="1" SHORTNAME="pgain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_R" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
            <dl_setting VAR="stabilization_rate_igain.p" TYPE="int32" STEP="1" SHORTNAME="igain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_P" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_igain.q" TYPE="int32" STEP="1" SHORTNAME="igain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_Q" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_igain.r" TYPE="int32" STEP="1" SHORTNAME="igain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_R" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_ddgain.p" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_DDGAIN_P" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_ddgain.q" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_DDGAIN_Q" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_ddgain.r" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_DDGAIN_R" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps|test_ahrs">
        <dl_settings>
          <dl_settings NAME="AHRS">
            <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
            <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
            <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
            <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
            <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps|test_imu|test_ahrs">
        <dl_settings>
          <dl_settings NAME="body2imu">
            <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
            <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
            <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
            <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="indi">
            <dl_setting VAR="reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.p" STEP="1" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.q" STEP="1" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.r" STEP="0.01" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="use_adaptive_indi" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="ARDrone2_indi" ac_id="13" airframe="airframes/TUDelft/airframes/ardrone2_indi.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_guidance.xml settings/control/stabilization_rate.xml settings/estimation/ahrs_int_cmpl_quat.xml settings/estimation/body_to_imu.xml settings/control/stabilization_att_indi.xml" settings_modules="modules/gps_ubx_ucenter.xml modules/air_data.xml" gui_color="red">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 2.0"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="test yaw" no="10">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="11">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="16">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="16" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="10" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="ardrone2_indi">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="ardrone2">
            <define NAME="AUTOPILOT_DISABLE_AHRS_KILL"/>
          </target>
          <target NAME="nps" BOARD="pc">
            <subsystem TYPE="jsbsim" NAME="fdm"/>
          </target>
          <define VALUE="FALSE" NAME="USE_SONAR"/>
          <subsystem TYPE="transparent_udp" NAME="telemetry"/>
          <subsystem TYPE="datalink" NAME="radio_control"/>
          <subsystem NAME="motor_mixing"/>
          <subsystem TYPE="ardrone2" NAME="actuators"/>
          <subsystem TYPE="ardrone2" NAME="imu"/>
          <subsystem TYPE="ublox" NAME="gps"/>
          <subsystem TYPE="indi" NAME="stabilization"/>
          <subsystem TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
          </subsystem>
          <subsystem TYPE="extended" NAME="ins"/>
        </firmware>
        <modules MAIN_FREQ="512">
          <load NAME="bat_voltage_ardrone2.xml"/>
          <load NAME="gps_ubx_ucenter.xml"/>
          <load NAME="send_imu_mag_current.xml"/>
          <load NAME="air_data.xml"/>
          <load NAME="logger_file.xml"/>
        </modules>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="3000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="1" NAME="TOP_LEFT" MIN="0" MAX="500"/>
          <servo NO="1" NEUTRAL="1" NAME="TOP_RIGHT" MIN="0" MAX="500"/>
          <servo NO="2" NEUTRAL="1" NAME="BOTTOM_RIGHT" MIN="0" MAX="500"/>
          <servo NO="3" NEUTRAL="1" NAME="BOTTOM_LEFT" MIN="0" MAX="500"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_motors_on,FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="2048" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="-180" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="16." NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.0" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="10000" NAME="SP_MAX_P"/>
          <define VALUE="10000" NAME="SP_MAX_Q"/>
          <define VALUE="10000" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="4" NAME="REF_TAU"/>
          <define VALUE="400" NAME="GAIN_P"/>
          <define VALUE="400" NAME="GAIN_Q"/>
          <define VALUE="350" NAME="GAIN_R"/>
          <define VALUE="75" NAME="IGAIN_P"/>
          <define VALUE="75" NAME="IGAIN_Q"/>
          <define VALUE="50" NAME="IGAIN_R"/>
          <define VALUE="300" NAME="DDGAIN_P"/>
          <define VALUE="300" NAME="DDGAIN_Q"/>
          <define VALUE="300" NAME="DDGAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="180" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="250" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.032" NAME="G1_P"/>
          <define VALUE="0.025" NAME="G1_Q"/>
          <define VALUE="0.0032" NAME="G1_R"/>
          <define VALUE="0.16" NAME="G2_R"/>
          <define VALUE="380.0" NAME="REF_ERR_P"/>
          <define VALUE="380.0" NAME="REF_ERR_Q"/>
          <define VALUE="250.0" NAME="REF_ERR_R"/>
          <define VALUE="21.6" NAME="REF_RATE_P"/>
          <define VALUE="21.6" NAME="REF_RATE_Q"/>
          <define VALUE="21.0" NAME="REF_RATE_R"/>
          <define VALUE="20.0" NAME="FILT_OMEGA"/>
          <define VALUE="0.55" NAME="FILT_ZETA"/>
          <define VALUE="20.0" NAME="FILT_OMEGA_R"/>
          <define VALUE="0.55" NAME="FILT_ZETA_R"/>
          <define VALUE="0.06" NAME="ACT_DYN_P"/>
          <define VALUE="0.06" NAME="ACT_DYN_Q"/>
          <define VALUE="0.06" NAME="ACT_DYN_R"/>
          <define VALUE="TRUE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="13" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="FALSE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="{&quot;nw_motor&quot;, &quot;ne_motor&quot;, &quot;se_motor&quot;, &quot;sw_motor&quot;}" NAME="ACTUATOR_NAMES"/>
          <define VALUE="&quot;simple_ardrone2&quot;" NAME="JSBSIM_MODEL"/>
          <define VALUE="&quot;reset00&quot;" NAME="JSBSIM_INIT"/>
          <define VALUE="&quot;nps_sensors_params_ardrone2.h&quot;" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="9.7" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="false" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="2000"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Rate Loop">
            <dl_setting VAR="stabilization_rate_gain.p" TYPE="int32" STEP="1" SHORTNAME="pgain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_P" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
            <dl_setting VAR="stabilization_rate_gain.q" TYPE="int32" STEP="1" SHORTNAME="pgain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_Q" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
            <dl_setting VAR="stabilization_rate_gain.r" TYPE="int32" STEP="1" SHORTNAME="pgain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_R" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
            <dl_setting VAR="stabilization_rate_igain.p" TYPE="int32" STEP="1" SHORTNAME="igain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_P" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_igain.q" TYPE="int32" STEP="1" SHORTNAME="igain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_Q" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_igain.r" TYPE="int32" STEP="1" SHORTNAME="igain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_R" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_ddgain.p" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_DDGAIN_P" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_ddgain.q" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_DDGAIN_Q" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_ddgain.r" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_DDGAIN_R" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps|test_ahrs">
        <dl_settings>
          <dl_settings NAME="AHRS">
            <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
            <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
            <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
            <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
            <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps|test_imu|test_ahrs">
        <dl_settings>
          <dl_settings NAME="body2imu">
            <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
            <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
            <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
            <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="indi">
            <dl_setting VAR="reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.p" STEP="1" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.q" STEP="1" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.r" STEP="0.01" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="use_adaptive_indi" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="ARDrone2_opticflow" ac_id="12" airframe="airframes/TUDelft/airframes/ardrone2_opticflow.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_guidance.xml settings/control/stabilization_rate.xml settings/control/stabilization_att_int_quat.xml settings/estimation/ahrs_int_cmpl_quat.xml settings/estimation/body_to_imu.xml" settings_modules="modules/gps_ubx_ucenter.xml modules/cv_opticflow.xml modules/opticflow_hover.xml" gui_color="red">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 2.0"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="test yaw" no="10">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="11">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="16">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="16" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="10" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Vision stabilization">
            <dl_settings NAME="vision_calc">
              <dl_setting VAR="opticflow.max_track_corners" STEP="1" SHORTNAME="max_trck_corners" PARAM="OPTICFLOW_MAX_TRACK_CORNERS" MODULE="computer_vision/opticflow_module" MIN="0" MAX="500"/>
              <dl_setting VAR="opticflow.window_size" STEP="1" SHORTNAME="window_size" PARAM="OPTICFLOW_WINDOW_SIZE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="500"/>
              <dl_setting VAR="opticflow.subpixel_factor" STEP="1" SHORTNAME="subpixel_factor" PARAM="OPTICFLOW_SUBPIXEL_FACTOR" MODULE="computer_vision/opticflow_module" MIN="0" MAX="100"/>
              <dl_setting VAR="opticflow.max_iterations" STEP="1" SHORTNAME="max_iterations" PARAM="OPTICFLOW_MAX_ITERATIONS" MODULE="computer_vision/opticflow_module" MIN="0" MAX="100"/>
              <dl_setting VAR="opticflow.threshold_vec" STEP="1" SHORTNAME="threshold_vec" PARAM="OPTICFLOW_THRESHOLD_VEC" MODULE="computer_vision/opticflow_module" MIN="0" MAX="100"/>
              <dl_setting VAR="opticflow.fast9_adaptive" VALUES="TRUE|FALSE" STEP="1" SHORTNAME="fast9_adaptive" PARAM="OPTICFLOW_FAST9_ADAPTIVE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1"/>
              <dl_setting VAR="opticflow.fast9_threshold" STEP="1" SHORTNAME="fast9_threshold" PARAM="OPTICFLOW_FAST9_THRESHOLD" MODULE="computer_vision/opticflow_module" MIN="0" MAX="255"/>
              <dl_setting VAR="opticflow.fast9_min_distance" STEP="1" SHORTNAME="fast9_min_distance" PARAM="OPTICFLOW_FAST9_MIN_DISTANCE" MODULE="computer_vision/opticflow_module" MIN="0" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="Vision stabilization">
            <dl_settings NAME="vision_stab">
              <dl_setting VAR="opticflow_stab.phi_pgain" STEP="1" SHORTNAME="kp_v_phi" PARAM="VISION_PHI_PGAIN" MODULE="computer_vision/opticflow_module" MIN="0" MAX="10000"/>
              <dl_setting VAR="opticflow_stab.phi_igain" STEP="1" SHORTNAME="ki_v_phi" PARAM="VISION_PHI_IGAIN" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1000"/>
              <dl_setting VAR="opticflow_stab.theta_pgain" STEP="1" SHORTNAME="kp_v_theta" PARAM="VISION_THETA_PGAIN" MODULE="computer_vision/opticflow_module" MIN="0" MAX="10000"/>
              <dl_setting VAR="opticflow_stab.theta_igain" STEP="1" SHORTNAME="ki_v_theta" PARAM="VISION_THETA_IGAIN" MODULE="computer_vision/opticflow_module" MIN="0" MAX="1000"/>
              <dl_setting VAR="opticflow_stab.desired_vx" STEP="0.01" SHORTNAME="desired_vx" PARAM="VISION_DESIRED_VX" MODULE="computer_vision/opticflow_module" MIN="-5" MAX="5"/>
              <dl_setting VAR="opticflow_stab.desired_vy" STEP="0.01" SHORTNAME="desired_vy" PARAM="VISION_DESIRED_VY" MODULE="computer_vision/opticflow_module" MIN="-5" MAX="5"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="ardrone2_opticflow">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="ardrone2"/>
          <define VALUE="TRUE" NAME="USE_SONAR"/>
          <subsystem TYPE="transparent_udp" NAME="telemetry"/>
          <subsystem TYPE="datalink" NAME="radio_control"/>
          <subsystem NAME="motor_mixing"/>
          <subsystem TYPE="ardrone2" NAME="actuators"/>
          <subsystem TYPE="ardrone2" NAME="imu"/>
          <subsystem TYPE="ublox" NAME="gps"/>
          <subsystem TYPE="int_quat" NAME="stabilization"/>
          <subsystem TYPE="int_cmpl_quat" NAME="ahrs"/>
          <subsystem TYPE="extended" NAME="ins"/>
        </firmware>
        <modules MAIN_FREQ="512">
          <load NAME="bat_voltage_ardrone2.xml"/>
          <load NAME="gps_ubx_ucenter.xml"/>
          <load NAME="send_imu_mag_current.xml"/>
          <load NAME="logger_file.xml"/>
          <load NAME="cv_opticflow.xml"/>
          <load NAME="opticflow_hover.xml"/>
        </modules>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="3000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="1" NAME="TOP_LEFT" MIN="0" MAX="500"/>
          <servo NO="1" NEUTRAL="1" NAME="TOP_RIGHT" MIN="0" MAX="500"/>
          <servo NO="2" NEUTRAL="1" NAME="BOTTOM_RIGHT" MIN="0" MAX="500"/>
          <servo NO="3" NEUTRAL="1" NAME="BOTTOM_LEFT" MIN="0" MAX="500"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_motors_on,FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="VISION_" NAME="VISION">
          <define VALUE="FALSE" NAME="HOVER"/>
          <define VALUE="300" NAME="PHI_PGAIN"/>
          <define VALUE="5" NAME="PHI_IGAIN"/>
          <define VALUE="300" NAME="THETA_PGAIN"/>
          <define VALUE="5" NAME="THETA_IGAIN"/>
          <define VALUE="0" NAME="DESIRED_VX"/>
          <define VALUE="0" NAME="DESIRED_VY"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="2048" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="-180" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="16." NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.0" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.513081" NAME="H_X"/>
          <define VALUE="-0.00242783" NAME="H_Y"/>
          <define VALUE="0.858336" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="10000" NAME="SP_MAX_P"/>
          <define VALUE="10000" NAME="SP_MAX_Q"/>
          <define VALUE="10000" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="4" NAME="REF_TAU"/>
          <define VALUE="400" NAME="GAIN_P"/>
          <define VALUE="400" NAME="GAIN_Q"/>
          <define VALUE="350" NAME="GAIN_R"/>
          <define VALUE="75" NAME="IGAIN_P"/>
          <define VALUE="75" NAME="IGAIN_Q"/>
          <define VALUE="50" NAME="IGAIN_R"/>
          <define VALUE="300" NAME="DDGAIN_P"/>
          <define VALUE="300" NAME="DDGAIN_Q"/>
          <define VALUE="300" NAME="DDGAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="600" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="250" NAME="DEADBAND_R"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="200" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(4000.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="850" NAME="PHI_PGAIN"/>
          <define VALUE="425" NAME="PHI_DGAIN"/>
          <define VALUE="0" NAME="PHI_IGAIN"/>
          <define VALUE="850" NAME="THETA_PGAIN"/>
          <define VALUE="425" NAME="THETA_DGAIN"/>
          <define VALUE="0" NAME="THETA_IGAIN"/>
          <define VALUE="1000" NAME="PSI_PGAIN"/>
          <define VALUE="700" NAME="PSI_DGAIN"/>
          <define VALUE="0" NAME="PSI_IGAIN"/>
          <define VALUE="0" NAME="PHI_DDGAIN"/>
          <define VALUE="0" NAME="THETA_DDGAIN"/>
          <define VALUE="100" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="13" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="FALSE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="{&quot;nw_motor&quot;, &quot;ne_motor&quot;, &quot;se_motor&quot;, &quot;sw_motor&quot;}" NAME="ACTUATOR_NAMES"/>
          <define VALUE="&quot;simple_ardrone2&quot;" NAME="JSBSIM_MODEL"/>
          <define VALUE="&quot;nps_sensors_params_ardrone2.h&quot;" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_MODULE" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="9.7" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="false" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="2000"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Rate Loop">
            <dl_setting VAR="stabilization_rate_gain.p" TYPE="int32" STEP="1" SHORTNAME="pgain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_P" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
            <dl_setting VAR="stabilization_rate_gain.q" TYPE="int32" STEP="1" SHORTNAME="pgain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_Q" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
            <dl_setting VAR="stabilization_rate_gain.r" TYPE="int32" STEP="1" SHORTNAME="pgain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_R" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
            <dl_setting VAR="stabilization_rate_igain.p" TYPE="int32" STEP="1" SHORTNAME="igain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_P" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_igain.q" TYPE="int32" STEP="1" SHORTNAME="igain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_Q" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_igain.r" TYPE="int32" STEP="1" SHORTNAME="igain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_R" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_ddgain.p" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_DDGAIN_P" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_ddgain.q" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_DDGAIN_Q" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_ddgain.r" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_DDGAIN_R" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Att Loop">
            <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="400"/>
            <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stab_att_ref_model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
            <dl_setting VAR="stab_att_ref_model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
            <dl_setting VAR="stab_att_ref_model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
            <dl_setting VAR="stab_att_ref_model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
            <dl_setting VAR="stab_att_ref_model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
            <dl_setting VAR="stab_att_ref_model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps|test_ahrs">
        <dl_settings>
          <dl_settings NAME="AHRS">
            <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
            <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
            <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
            <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
            <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps|test_imu|test_ahrs">
        <dl_settings>
          <dl_settings NAME="body2imu">
            <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
            <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
            <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
            <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="ARDrone2_optitrack" ac_id="11" airframe="airframes/TUDelft/airframes/ardrone2_optitrack.xml" radio="radios/dummy.xml" telemetry="telemetry/default_delfly.xml" flight_plan="flight_plans/rotorcraft_optitrack.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_guidance.xml settings/estimation/ahrs_int_cmpl_quat.xml settings/estimation/body_to_imu.xml settings/control/stabilization_att_indi.xml" settings_modules="" gui_color="red">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="0.3" name="Rotorcraft Optitrack (Delft)" max_dist_from_home="20" lon0="4.376789" lat0="51.990634" ground_alt="0" alt="1">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="-0.6" x="1.2" name="CLIMB"/>
            <waypoint y="-0.8" x="-0.7" name="STDBY"/>
            <waypoint y="-1.7" x="0.8" name="TD"/>
            <waypoint name="p1" lon="4.376823" lat="51.990630" x="0.00" y="0.00"/>
            <waypoint name="p2" lon="4.376779" lat="51.990614" x="0.00" y="0.00"/>
            <waypoint name="p3" lon="4.376759" lat="51.990636" x="0.00" y="0.00"/>
            <waypoint name="p4" lon="4.376805" lat="51.990651" x="0.00" y="0.00"/>
            <waypoint name="FA1" lon="4.3768628" lat="51.9906213" x="0.00" y="0.00"/>
            <waypoint name="FA2" lon="4.3767766" lat="51.9905874" x="0.00" y="0.00"/>
            <waypoint name="FA3" lon="4.3767226" lat="51.9906409" x="0.00" y="0.00"/>
            <waypoint name="FA4" lon="4.3768074" lat="51.9906737" x="0.00" y="0.00"/>
          </waypoints>
          <sectors>
            <sector name="Flight_Area" color="red">
              <corner name="FA4"/>
              <corner name="FA3"/>
              <corner name="FA2"/>
              <corner name="FA1"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Wait GPS" no="0">
              <call fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 1)" no="0"/>
              <call fun="NavSetWaypointHere(WP_HOME)" no="2"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="3"/>
              <call fun="NavSetWaypointHere(WP_STDBY)" no="4"/>
              <call fun="NavSetWaypointHere(WP_TD)" no="5"/>
              <call fun="NavSetAltitudeReferenceHere()" no="6"/>
            </block>
            <block name="Holding point" no="2">
              <call fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 2.0"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="10">
              <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="11">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="12">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="13">
              <call fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="HOME" no="14">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="14" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="13" block_name="landed" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="13" block_name="landed" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="12" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="12" block_name="flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="11" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="10" block_name="land here" stage="0">
            <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="6">
            <call fun="NavSetAltitudeReferenceHere()" no="6"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="5">
            <call fun="NavSetWaypointHere(WP_TD)" no="5"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="4">
            <call fun="NavSetWaypointHere(WP_STDBY)" no="4"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="3">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="3"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call fun="NavSetWaypointHere(WP_HOME)" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 1)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <airframe NAME="ardrone2_optitrack">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="ardrone2">
            <define VALUE="0.5" NAME="FAILSAFE_DESCENT_SPEED"/>
            <define VALUE="0" NAME="USE_SONAR"/>
            <configure VALUE="FALSE" NAME="USE_BARO_BOARD"/>
            <configure VALUE="0" NAME="USE_MAGNETOMETER"/>
          </target>
          <target NAME="nps" BOARD="pc">
            <subsystem TYPE="jsbsim" NAME="fdm"/>
          </target>
          <subsystem TYPE="transparent_udp" NAME="telemetry"/>
          <subsystem TYPE="datalink" NAME="radio_control"/>
          <subsystem NAME="motor_mixing"/>
          <subsystem TYPE="ardrone2" NAME="actuators"/>
          <subsystem TYPE="ardrone2" NAME="imu"/>
          <subsystem TYPE="datalink" NAME="gps"/>
          <subsystem TYPE="indi" NAME="stabilization"/>
          <subsystem TYPE="int_cmpl_quat" NAME="ahrs"/>
          <subsystem TYPE="extended" NAME="ins"/>
        </firmware>
        <modules MAIN_FREQ="512">
          <load NAME="bat_voltage_ardrone2.xml"/>
          <load NAME="gps_diagnostics.xml"/>
        </modules>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="3000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="1" NAME="TOP_LEFT" MIN="0" MAX="500"/>
          <servo NO="1" NEUTRAL="1" NAME="TOP_RIGHT" MIN="0" MAX="500"/>
          <servo NO="2" NEUTRAL="1" NAME="BOTTOM_RIGHT" MIN="0" MAX="500"/>
          <servo NO="3" NEUTRAL="1" NAME="BOTTOM_LEFT" MIN="0" MAX="500"/>
        </servos>
        <section PREFIX="GPS_" NAME="GPS">
          <define VALUE="1" NAME="USE_DATALINK_SMALL"/>
          <define VALUE="392433200" NAME="LOCAL_ECEF_ORIGIN_X"/>
          <define VALUE="30036200" NAME="LOCAL_ECEF_ORIGIN_Y"/>
          <define VALUE="500219700" NAME="LOCAL_ECEF_ORIGIN_Z"/>
        </section>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_motors_on,FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="2048" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="2048" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="0" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="-180" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="16." NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="16." NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.0" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
          <define VALUE="1" NAME="USE_GPS_HEADING"/>
          <define VALUE="0" NAME="HEADING_UPDATE_GPS_MIN_SPEED"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="1" NAME="USE_GPS_ALT"/>
          <define VALUE="0.01" NAME="VFF_R_GPS"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="10000" NAME="SP_MAX_P"/>
          <define VALUE="10000" NAME="SP_MAX_Q"/>
          <define VALUE="10000" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="4" NAME="REF_TAU"/>
          <define VALUE="400" NAME="GAIN_P"/>
          <define VALUE="400" NAME="GAIN_Q"/>
          <define VALUE="350" NAME="GAIN_R"/>
          <define VALUE="75" NAME="IGAIN_P"/>
          <define VALUE="75" NAME="IGAIN_Q"/>
          <define VALUE="50" NAME="IGAIN_R"/>
          <define VALUE="300" NAME="DDGAIN_P"/>
          <define VALUE="300" NAME="DDGAIN_Q"/>
          <define VALUE="300" NAME="DDGAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.028551973" NAME="G1_P"/>
          <define VALUE="0.023775417" NAME="G1_Q"/>
          <define VALUE="0.00173069" NAME="G1_R"/>
          <define VALUE="0.086460732" NAME="G2_R"/>
          <define VALUE="380.0" NAME="REF_ERR_P"/>
          <define VALUE="380.0" NAME="REF_ERR_Q"/>
          <define VALUE="70.0" NAME="REF_ERR_R"/>
          <define VALUE="21.6" NAME="REF_RATE_P"/>
          <define VALUE="21.6" NAME="REF_RATE_Q"/>
          <define VALUE="11.0" NAME="REF_RATE_R"/>
          <define VALUE="20.0" NAME="FILT_OMEGA"/>
          <define VALUE="0.55" NAME="FILT_ZETA"/>
          <define VALUE="20.0" NAME="FILT_OMEGA_R"/>
          <define VALUE="0.55" NAME="FILT_ZETA_R"/>
          <define VALUE="0.06" NAME="ACT_DYN_P"/>
          <define VALUE="0.06" NAME="ACT_DYN_Q"/>
          <define VALUE="0.06" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="180" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="250" NAME="DEADBAND_R"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="583" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="13" NAME="HOVER_KI"/>
          <define VALUE="0.645" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="false" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="363" NAME="PGAIN"/>
          <define VALUE="237" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
          <define VALUE="0" NAME="VGAIN"/>
          <define VALUE="0" NAME="AGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="{&quot;nw_motor&quot;, &quot;ne_motor&quot;, &quot;se_motor&quot;, &quot;sw_motor&quot;}" NAME="ACTUATOR_NAMES"/>
          <define VALUE="&quot;simple_ardrone2&quot;" NAME="JSBSIM_MODEL"/>
          <define VALUE="&quot;nps_sensors_params_ardrone2.h&quot;" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_HOVER_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
          <define VALUE="0.15" NAME="ARRIVED_AT_WAYPOINT"/>
          <define VALUE="1500" NAME="AUTOPILOT_IN_FLIGHT_MIN_THRUST"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.9" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="10.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="GPS_DIAGNOSTICS"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="HOVER_LOOP"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="tune_delfly">
            <message PERIOD=".125" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".125" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD=".25" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD=".25" NAME="VERT_LOOP"/>
            <message PERIOD="0.25" NAME="HOVER_LOOP"/>
          </mode>
          <mode NAME="mute">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="false" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="2000"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps|test_ahrs">
        <dl_settings>
          <dl_settings NAME="AHRS">
            <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
            <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
            <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
            <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
            <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps|test_imu|test_ahrs">
        <dl_settings>
          <dl_settings NAME="body2imu">
            <dl_setting VAR="imu.body_to_imu.eulers_f.phi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i phi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PHI" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuPhi" ALT_UNIT="deg"/>
            <dl_setting VAR="imu.body_to_imu.eulers_f.theta" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i theta" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_THETA" MODULE="subsystems/imu" MIN="-90" MAX="90" HANDLER="SetBodyToImuTheta" ALT_UNIT="deg"/>
            <dl_setting VAR="imu.body_to_imu.eulers_f.psi" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="b2i psi" PERSISTENT="true" PARAM="IMU_BODY_TO_IMU_PSI" MODULE="subsystems/imu" MIN="-180" MAX="180" HANDLER="SetBodyToImuPsi" ALT_UNIT="deg"/>
            <dl_setting VAR="imu.b2i_set_current" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="b2i cur roll/pitch" MODULE="subsystems/imu" MIN="0" MAX="1" HANDLER="SetBodyToImuCurrent"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="indi">
            <dl_setting VAR="reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.p" STEP="1" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.q" STEP="1" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.r" STEP="0.01" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="use_adaptive_indi" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Bebop2_Smeur" ac_id="21" airframe="airframes/TUDelft/airframes/bebop_indi.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/Tudelft/rotorcraft_survey_competition.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_guidance.xml settings/control/stabilization_att_indi.xml settings/control/rotorcraft_speed.xml" settings_modules="modules/geo_mag.xml modules/air_data.xml modules/video_thread.xml modules/cv_blob_locator.xml modules/video_rtp_stream.xml modules/nav_survey_rectangle_rotorcraft.xml modules/nav_survey_poly_rotorcraft.xml modules/digital_cam_video.xml" gui_color="red">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="IMAV2015_competition_outdoor" max_dist_from_home="500" lon0="6.04692" lat0="50.788595" ground_alt="260" alt="290">
          <exceptions>
            <exception cond="(electrical.bat_low&&(exception_flag[0]==0))" deroute="Mission.ComeBackAndLand" exec="set_exception_flag(0)"/>
            <exception cond="(electrical.bat_critical&&(exception_flag[1]==0))" deroute="Mission.land_here" exec="set_exception_flag(1)"/>
            <exception cond="((((!(InsideRED(GetPosX(),GetPosY()))&&!((nav_block==IndexOfBlock('Mission.flare'))))&&!((nav_block==IndexOfBlock('Mission.landed'))))&&!((nav_block==IndexOfBlock('Mission.WaitGPS'))))&&!((nav_block==IndexOfBlock('Mission.GeoInit'))))" deroute="Mission.land_emergency"/>
          </exceptions>
          <header>#include &quot;autopilot.h&quot;
#include &quot;subsystems/electrical.h&quot;
#ifdef dc_Survey
#define LINE_START_FUNCTION dc_Survey(dc_distance_interval);
#define LINE_STOP_FUNCTION {dc_autoshoot = DC_AUTOSHOOT_STOP;}
#endif
#ifndef DropOpen
#define DropOpen() FALSE
#endif
#ifndef StartVision
#define StartVision() FALSE
#endif
#ifndef StartVisionLand
#define StartVisionLand() FALSE
#endif
#ifndef StopVision
#define StopVision() FALSE
#endif
#define WpAlt(X) (30)</header>
          <waypoints>
            <waypoint name="_PLATE1" lon="6.04674224830944" lat="50.7888090239206" x="0.00" y="0.00"/>
            <waypoint name="_PLATE2" lon="6.04647268082583" lat="50.7890460391004" x="0.00" y="0.00"/>
            <waypoint name="_PLATE3" lon="6.04631880264475" lat="50.7888723417903" x="0.00" y="0.00"/>
            <waypoint y=".0" x="0.0" name="HOME"/>
            <waypoint y="15.4" x="-7.6" name="CLIMB"/>
            <waypoint y="24.0" x="-3.7" name="STDBY"/>
            <waypoint name="raceA" lon="6.047899" lat="50.790483" x="0.00" y="0.00"/>
            <waypoint name="raceB" lon="6.050200" lat="50.791800" x="0.00" y="0.00"/>
            <waypoint name="WG" lon="6.047431" lat="50.789794" x="0.00" y="0.00"/>
            <waypoint name="WD" lon="6.04677769236132" lat="50.7889307058111" height="30" x="0.00" y="0.00"/>
            <waypoint name="DROP" lon="6.04652336854142" lat="50.788775526101" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ1" lon="6.04652336854142" lat="50.788775526101" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ2" lon="6.04640018582595" lat="50.7889170568219" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ3" lon="6.04642327267965" lat="50.7889755961272" height="15" x="0.00" y="0.00"/>
            <waypoint name="FC" lon="6.047118" lat="50.789522" height="20" x="0.00" y="0.00"/>
            <waypoint y="95.0" x="27.5" name="CAM" height="20"/>
            <waypoint name="S1" lon="6.046721" lat="50.788597" x="0.00" y="0.00"/>
            <waypoint name="S2" lon="6.045944" lat="50.788973" x="0.00" y="0.00"/>
            <waypoint name="S3" lon="6.046330" lat="50.789323" x="0.00" y="0.00"/>
            <waypoint name="S4" lon="6.047113" lat="50.788917" x="0.00" y="0.00"/>
            <waypoint name="p1" lon="6.047864" lat="50.790483" x="0.00" y="0.00"/>
            <waypoint name="p2" lon="6.047897" lat="50.790463" x="0.00" y="0.00"/>
            <waypoint name="p3" lon="6.050232" lat="50.791799" x="0.00" y="0.00"/>
            <waypoint name="p4" lon="6.050201" lat="50.791818" x="0.00" y="0.00"/>
            <waypoint y="-55.4" x="19.2" name="CRUISE" height="25"/>
            <waypoint name="TD" lon="6.04695109268497" lat="50.7887171157922" height="15" x="0.00" y="0.00"/>
            <waypoint y="0" x="0" name="ETD" height="15"/>
            <waypoint name="_green1A" lon="6.046879" lat="50.790144" x="0.00" y="0.00"/>
            <waypoint name="_green1B" lon="6.047844" lat="50.789748" x="0.00" y="0.00"/>
            <waypoint name="_green1C" lon="6.047072" lat="50.789058" x="0.00" y="0.00"/>
            <waypoint name="_green1D" lon="6.047391" lat="50.788919" x="0.00" y="0.00"/>
            <waypoint name="_green1E" lon="6.046880" lat="50.788477" x="0.00" y="0.00"/>
            <waypoint name="_green1F" lon="6.045554" lat="50.789113" x="0.00" y="0.00"/>
            <waypoint name="_green2A" lon="6.050405" lat="50.792252" x="0.00" y="0.00"/>
            <waypoint name="_green2B" lon="6.050962" lat="50.791915" x="0.00" y="0.00"/>
            <waypoint name="_green2C" lon="6.047761" lat="50.790077" x="0.00" y="0.00"/>
            <waypoint name="_green2D" lon="6.047251" lat="50.790426" x="0.00" y="0.00"/>
            <waypoint name="_red1" lon="6.050093" lat="50.792552" x="0.00" y="0.00"/>
            <waypoint name="_red2" lon="6.051268" lat="50.791882" x="0.00" y="0.00"/>
            <waypoint name="_red3" lon="6.047834" lat="50.789988" x="0.00" y="0.00"/>
            <waypoint name="_red4" lon="6.048204" lat="50.789781" x="0.00" y="0.00"/>
            <waypoint name="_red5" lon="6.047626" lat="50.788865" x="0.00" y="0.00"/>
            <waypoint name="_red6" lon="6.046744" lat="50.788209" x="0.00" y="0.00"/>
            <waypoint name="_red7" lon="6.045032" lat="50.789046" x="0.00" y="0.00"/>
            <waypoint name="_red8" lon="6.046338" lat="50.790416" x="0.00" y="0.00"/>
            <waypoint name="_vision1" lon="6.047338" lat="50.789622" x="0.00" y="0.00"/>
            <waypoint name="_vision2" lon="6.047115" lat="50.789352" x="0.00" y="0.00"/>
            <waypoint name="_vision3" lon="6.046932" lat="50.789443" x="0.00" y="0.00"/>
            <waypoint name="_vision4" lon="6.047205" lat="50.789662" x="0.00" y="0.00"/>
            <waypoint name="_land1" lon="6.046939" lat="50.788606" x="0.00" y="0.00"/>
            <waypoint name="_land2" lon="6.046810" lat="50.788686" x="0.00" y="0.00"/>
            <waypoint name="_land3" lon="6.046949" lat="50.788813" x="0.00" y="0.00"/>
            <waypoint name="_land4" lon="6.047124" lat="50.788737" x="0.00" y="0.00"/>
          </waypoints>
          <sectors>
            <sector name="RED" color="red">
              <corner name="_red1"/>
              <corner name="_red2"/>
              <corner name="_red3"/>
              <corner name="_red4"/>
              <corner name="_red5"/>
              <corner name="_red6"/>
              <corner name="_red7"/>
              <corner name="_red8"/>
            </sector>
            <sector name="GREEN1" color="green">
              <corner name="_green1A"/>
              <corner name="_green1B"/>
              <corner name="_green1C"/>
              <corner name="_green1D"/>
              <corner name="_green1E"/>
              <corner name="_green1F"/>
            </sector>
            <sector name="GREEN2" color="green">
              <corner name="_green2A"/>
              <corner name="_green2B"/>
              <corner name="_green2C"/>
              <corner name="_green2D"/>
            </sector>
            <sector name="TENNIS" color="green">
              <corner name="_vision1"/>
              <corner name="_vision2"/>
              <corner name="_vision3"/>
              <corner name="_vision4"/>
            </sector>
            <sector name="LAND" color="green">
              <corner name="_land1"/>
              <corner name="_land2"/>
              <corner name="_land3"/>
              <corner name="_land4"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Dummy" no="0"/>
            <block name="Mission.WaitGPS" no="1">
              <call fun="NavKillThrottle()" no="0"/>
              <while cond="!(GpsFixValid())" no="1"/>
            </block>
            <block name="Mission.GeoInit" no="2">
              <while cond="LessThan(NavBlockTime(),10)" no="0"/>
              <call fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Mission.holding_point" no="3">
              <call fun="NavKillThrottle()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Start Engine" strip_icon="resurrect.png" group="engine" name="Mission.Start Engine" no="4">
              <call fun="NavResurrect()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Takeoff-Standby" strip_icon="takeoff.png" group="takeoff" name="Mission.Takeoff-Standby" no="5">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.Standby"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Map" strip_icon="survey.png" group="takeoff" name="Mission.Takeoff-Map" no="6">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.SurveyPoly"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Drop" strip_icon="parachute.png" group="takeoff" name="Mission.Takeoff-Drop" no="7">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.drop"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Water" group="takeoff" name="Mission.Takeoff-Water" no="8">
              <exception cond="((stateGetPositionEnu_f())->z>27.000000)" deroute="Mission.drop_water"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Standby" strip_icon="home.png" group="hover" name="Mission.Standby" no="9">
              <stay wp="STDBY" no="0"/>
            </block>
            <block strip_button="LookRobot-FC" strip_icon="lookdown.png" group="hover" name="Mission.GoTennis" no="10">
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
              <go wp="CRUISE" no="1"/>
            </block>
            <block name="Mission.LookRobot" no="11">
              <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
            </block>
            <block name="Mission.Vision" no="12">
              <exception cond="!(InsideTENNIS(GetPosX(),GetPosY()))" deroute="Mission.NoVision"/>
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndVisualLand"/>
              <call fun="StartVision()" no="0"/>
              <stay wp="CAM" no="1"/>
            </block>
            <block name="Mission.NoVision" no="13">
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndLand"/>
              <call fun="StartVision()" no="0"/>
              <stay wp="FC" no="1"/>
            </block>
            <block strip_button="ComeBackAndLand" strip_icon="land-right.png" group="hover" name="Mission.ComeBackAndLand" no="14">
              <call fun="StopVision()" no="0"/>
              <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <go wp="CRUISE" no="4"/>
              <deroute block="Mission.land" no="5"/>
            </block>
            <block name="Mission.ComeBackAndVisualLand" no="15">
              <call fun="StopVision()" no="0"/>
              <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
              <go wp="CRUISE" no="5"/>
              <deroute block="Mission.visual_flare" no="6"/>
            </block>
            <block strip_button="Follow-Vision-Geolocation-Results" strip_icon="lookdown.png" group="hover" name="Mission.CAM" no="16">
              <stay wp="CAM" no="0"/>
            </block>
            <block name="Mission.stay_p1" no="17">
              <stay wp="p1" no="0"/>
            </block>
            <block name="Mission.go_p2" no="18">
              <go wp="p2" no="0"/>
              <deroute block="Mission.stay_p1" no="1"/>
            </block>
            <block name="Mission.line_p1_p2" no="19">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <stay until="(stage_time>10)" wp="p2" no="1"/>
              <go from="p2" hmode="route" wp="p1" no="2"/>
              <deroute block="Mission.stay_p1" no="3"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="Mission.circle CV" no="20">
              <circle radius="nav_radius" wp="CAM" no="0"/>
            </block>
            <block group="drop" name="Mission.drop" no="21">
              <go wp="DROP" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone1" no="22">
              <go wp="RZ1" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone2" no="23">
              <go wp="RZ2" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone3" no="24">
              <go wp="RZ3" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_water" no="25">
              <go wp="WD" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block strip_button="Oval p1-p2-p3-p4" strip_icon="oval.png" group="race" name="Mission.race" no="26">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <go from="p2" hmode="route" wp="p3" no="1"/>
              <go from="p3" hmode="route" wp="p4" no="2"/>
              <go from="p4" hmode="route" wp="p1" no="3"/>
              <deroute block="Mission.race" no="4"/>
            </block>
            <block strip_button="Line raceA-raceB" strip_icon="line.png" group="race" name="Mission.raceline" no="27">
              <go from="raceA" hmode="route" wp="raceB" no="0"/>
              <go from="raceB" hmode="route" wp="raceA" no="1"/>
              <deroute block="Mission.raceline" no="2"/>
            </block>
            <block group="survey" strip_button="Survey-Polygon-S1-S2-S3-S4" strip_icon="googleearth.png" name="Mission.SurveyPoly" no="28">
              <call fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
              <deroute block="Mission.Survey Poly RUN" no="1"/>
            </block>
            <block name="Mission.Survey Poly RUN" no="29">
              <exception cond="(PolySurveySweepNum>=5)" deroute="Mission.GoTennis"/>
              <call fun="nav_survey_poly_run()" no="0"/>
            </block>
            <block strip_button="Land Here" strip_icon="downdown.png" group="landing" name="Mission.land_here" no="30">
              <call fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
              <call fun="NavSetWaypointHere(WP_TD)" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="Land at TD" strip_icon="land-right.png" group="landing" name="Mission.land" no="31">
              <go wp="TD" no="0"/>
              <call fun="StartVisionLand()" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="VisualLanding-CAM" strip_icon="cam_lock.png" group="landing" name="Mission.visual_flare" no="32">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <exception cond="!(InsideLAND(GetPosX(),GetPosY()))" deroute="Mission.land"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.flare" no="33">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block strip_button="Kill" strip_icon="kill.png" group="landing" name="Mission.landed" no="34">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="Mission.land_emergency" no="35">
              <call fun="NavSetWaypointHere(WP_ETD)" no="0"/>
              <deroute block="Mission.flare_emergency" no="1"/>
            </block>
            <block name="Mission.flare_emergency" no="36">
              <exception cond="NavDetectGround()" deroute="Mission.landed_emergency"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed_emergency"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.landed_emergency" no="37">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="HOME" no="38">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="38" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="37" block_name="Mission.landed_emergency" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="1">
            <deroute block="Mission.flare_emergency" no="1"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="0">
            <call fun="NavSetWaypointHere(WP_ETD)" no="0"/>
          </stage>
          <stage block="34" block_name="Mission.landed" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="1">
            <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="1">
            <call fun="StartVisionLand()" no="1"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="1">
            <call fun="NavSetWaypointHere(WP_TD)" no="1"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="0">
            <call fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
          </stage>
          <stage block="29" block_name="Mission.Survey Poly RUN" stage="0">
            <call fun="nav_survey_poly_run()" no="0"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="1">
            <deroute block="Mission.Survey Poly RUN" no="1"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="0">
            <call fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="2">
            <deroute block="Mission.raceline" no="2"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="1">
            <go from="raceB" hmode="route" wp="raceA" no="1"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="0">
            <go from="raceA" hmode="route" wp="raceB" no="0"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="4">
            <deroute block="Mission.race" no="4"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="3">
            <go from="p4" hmode="route" wp="p1" no="3"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="2">
            <go from="p3" hmode="route" wp="p4" no="2"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="1">
            <go from="p2" hmode="route" wp="p3" no="1"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="0">
            <go wp="WD" no="0"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="0">
            <go wp="RZ3" no="0"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="0">
            <go wp="RZ2" no="0"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="0">
            <go wp="RZ1" no="0"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="0">
            <go wp="DROP" no="0"/>
          </stage>
          <stage block="20" block_name="Mission.circle CV" stage="0">
            <circle radius="nav_radius" wp="CAM" no="0"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="3">
            <deroute block="Mission.stay_p1" no="3"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="2">
            <go from="p2" hmode="route" wp="p1" no="2"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="1">
            <stay until="(stage_time>10)" wp="p2" no="1"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="1">
            <deroute block="Mission.stay_p1" no="1"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="17" block_name="Mission.stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="16" block_name="Mission.CAM" stage="0">
            <stay wp="CAM" no="0"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="6">
            <deroute block="Mission.visual_flare" no="6"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="5">
            <go wp="CRUISE" no="5"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="4">
            <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="3">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="1">
            <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="0">
            <call fun="StopVision()" no="0"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="5">
            <deroute block="Mission.land" no="5"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="4">
            <go wp="CRUISE" no="4"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="3">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="1">
            <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="0">
            <call fun="StopVision()" no="0"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="1">
            <stay wp="FC" no="1"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="0">
            <call fun="StartVision()" no="0"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="1">
            <stay wp="CAM" no="1"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="0">
            <call fun="StartVision()" no="0"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="1">
            <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="0">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="1">
            <go wp="CRUISE" no="1"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="0">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
          </stage>
          <stage block="9" block_name="Mission.Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="0">
            <call fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="2">
            <call fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="0">
            <while cond="LessThan(NavBlockTime(),10)" no="0"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="1">
            <while cond="!(GpsFixValid())" no="1"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="video_thread.take_shot" STEP="1" SHORTNAME="take_shot" MODULE="computer_vision/video_thread" MIN="0" MAX="1" HANDLER="take_shot">
                <strip_button VALUE="1" NAME="Videothread Save Jpeg" ICON="digital-camera.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="video_thread.fps" STEP="1" SHORTNAME="fps" PARAM="VIDEO_THREAD_FPS" MODULE="computer_vision/video_thread" MIN="1" MAX="25"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="ColorFilter">
              <dl_setting VAR="color_lum_min" STEP="1" SHORTNAME="y_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_lum_max" STEP="1" SHORTNAME="y_max" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cb_min" STEP="1" SHORTNAME="u_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cb_max" STEP="1" SHORTNAME="u_max" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cr_min" STEP="1" SHORTNAME="v_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cr_max" STEP="1" SHORTNAME="v_max" MIN="0" MAX="255"/>
              <dl_setting VAR="marker_size" STEP="1" SHORTNAME="marker" MIN="1" MAX="20"/>
              <dl_setting VAR="geofilter_length" STEP="1" SHORTNAME="filter" MIN="1" MAX="100"/>
              <dl_setting VAR="record_video" VALUES="OFF|ON" STEP="1" SHORTNAME="record" MIN="0" MAX="1"/>
              <dl_setting VAR="cv_blob_locator_reset" STEP="1" MODULE="computer_vision/cv_blob_locator" MIN="0" MAX="1" HANDLER="GeoReset">
                <strip_button VALUE="1" NAME="Reset Geoprojection Filter" ICON="resurrect.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="cv_blob_locator_type" VALUES="NONE|BLOB|IMAVMARKER|WINDOW" STEP="1" MODULE="computer_vision/cv_blob_locator" MIN="0" MAX="2">
                <strip_button VALUE="0" NAME="CV: None" ICON="off.png" GROUP="cv"/>
                <strip_button VALUE="1" NAME="CV: Colored Blob" ICON="cv_blob.png" GROUP="cv"/>
                <strip_button VALUE="2" NAME="CV: Marker" ICON="cv_marker.png" GROUP="cv"/>
                <strip_button VALUE="3" NAME="CV: Window Finder" ICON="cv_window.png" GROUP="cv"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="viewvideo.use_rtp" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="rtp" PARAM="VIEWVIDEO_USE_RTP" MODULE="computer_vision/viewvideo" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="Ret_Survey">
              <dl_setting VAR="sweep" TYPE="float" STEP="1" SHORTNAME="Distance" MODULE="modules/nav/nav_survey_rectangle_rotorcraft" MIN="10" MAX="500"/>
              <dl_setting VAR="interleave" VALUES="FALSE|TRUE" TYPE="bool" STEP="1" SHORTNAME="use_interleave" MODULE="modules/nav/nav_survey_rectangle_rotorcraft" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="P_Survey">
              <dl_setting VAR="Poly_Size" TYPE="uint8_t" STEP="1" SHORTNAME="Size" MODULE="modules/nav/nav_survey_poly_rotorcraft" MIN="0" MAX="20"/>
              <dl_setting VAR="Poly_Distance" TYPE="float" STEP="1" SHORTNAME="Sweep" MODULE="modules/nav/nav_survey_poly_rotorcraft" MIN="0" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="control">
            <dl_settings NAME="dc">
              <dl_setting VAR="0" STEP="1" SHORTNAME="Shutter" MODULE="digital_cam/dc" MIN="0" MAX="255" HANDLER="send_command">
                <strip_button VALUE="32" NAME="Photo" ICON="digital-camera.png" GROUP="dc"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot" VALUES="STOP|PERIODIC|DISTANCE|EXT_TRIG" STEP="1" MIN="0" MAX="3">
                <strip_button VALUE="1" NAME="Start Autoshoot" ICON="dcstart.png" GROUP="dc"/>
                <strip_button VALUE="0" NAME="Stop Autoshoot" ICON="dcstop.png" GROUP="dc"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot_period" UNIT="sec" STEP="0.5" SHORTNAME="Periodic" PARAM="DC_AUTOSHOOT_PERIOD" MIN="0.1" MAX="60"/>
              <dl_setting VAR="dc_distance_interval" UNIT="meter" STEP="1" SHORTNAME="dist" PARAM="DC_AUTOSHOOT_DISTANCE_INTERVAL" MIN="0" MAX="255"/>
              <dl_setting VAR="dc_survey_interval" STEP="5" SHORTNAME="Survey-Interval" MODULE="digital_cam/dc" MIN="0" MAX="250" HANDLER="Survey"/>
              <dl_setting VAR="dc_circle_interval" STEP="5" SHORTNAME="Circle-Interval" MODULE="digital_cam/dc" MIN="5" MAX="90" HANDLER="Circle"/>
              <dl_setting VAR="dc_cam_tracing" STEP="1" SHORTNAME="Cam-Tracing" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop_indi">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop"/>
          <target NAME="nps" BOARD="pc">
            <subsystem TYPE="jsbsim" NAME="fdm"/>
            <subsystem NAME="udp"/>
          </target>
          <subsystem TYPE="transparent_udp" NAME="telemetry"/>
          <subsystem TYPE="datalink" NAME="radio_control"/>
          <subsystem NAME="motor_mixing"/>
          <subsystem TYPE="bebop" NAME="actuators"/>
          <subsystem TYPE="bebop" NAME="imu"/>
          <subsystem TYPE="furuno" NAME="gps"/>
          <subsystem TYPE="indi" NAME="stabilization"/>
          <subsystem TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
          </subsystem>
          <subsystem TYPE="extended" NAME="ins"/>
          <subsystem TYPE="indi" NAME="guidance"/>
        </firmware>
        <modules MAIN_FREQ="512">
          <load NAME="geo_mag.xml"/>
          <load NAME="air_data.xml"/>
          <load NAME="send_imu_mag_current.xml"/>
          <load NAME="video_thread.xml">
            <define VALUE="4" NAME="VIDEO_THREAD_FPS"/>
            <define VALUE="bottom_camera" NAME="VIDEO_THREAD_CAMERA"/>
            <define VALUE="/data/ftp/internal_000/images" NAME="VIDEO_THREAD_SHOT_PATH"/>
          </load>
          <load NAME="cv_blob_locator.xml"/>
          <load NAME="video_rtp_stream.xml">
            <define VALUE="80" NAME="VIEWVIDEO_QUALITY_FACTOR"/>
            <define VALUE="1" NAME="VIEWVIDEO_DOWNSIZE_FACTOR"/>
          </load>
          <load NAME="nav_survey_rectangle_rotorcraft.xml">
            <define VALUE="10" NAME="RECTANGLE_SURVEY_DEFAULT_SWEEP"/>
          </load>
          <load NAME="nav_survey_poly_rotorcraft.xml">
            <define VALUE="10" NAME="POLYSURVEY_DEFAULT_DISTANCE"/>
          </load>
          <load NAME="digital_cam_video.xml">
            <define VALUE="5" NAME="DC_AUTOSHOOT_DISTANCE_INTERVAL"/>
          </load>
          <load NAME="video_exif.xml"/>
        </modules>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_motors_on,FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="-99" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="-18" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="104" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="6.86866736641" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="7.14211759775" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="7.74589177316" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.0" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="10000" NAME="SP_MAX_P"/>
          <define VALUE="10000" NAME="SP_MAX_Q"/>
          <define VALUE="10000" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="4" NAME="REF_TAU"/>
          <define VALUE="400" NAME="GAIN_P"/>
          <define VALUE="400" NAME="GAIN_Q"/>
          <define VALUE="350" NAME="GAIN_R"/>
          <define VALUE="75" NAME="IGAIN_P"/>
          <define VALUE="75" NAME="IGAIN_Q"/>
          <define VALUE="50" NAME="IGAIN_R"/>
          <define VALUE="300" NAME="DDGAIN_P"/>
          <define VALUE="300" NAME="DDGAIN_Q"/>
          <define VALUE="300" NAME="DDGAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.0639" NAME="G1_P"/>
          <define VALUE="0.0361" NAME="G1_Q"/>
          <define VALUE="0.0022" NAME="G1_R"/>
          <define VALUE="0.1450" NAME="G2_R"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="50.0" NAME="FILT_OMEGA"/>
          <define VALUE="0.55" NAME="FILT_ZETA"/>
          <define VALUE="50.0" NAME="FILT_OMEGA_R"/>
          <define VALUE="0.55" NAME="FILT_ZETA_R"/>
          <define VALUE="0.1" NAME="ACT_DYN_P"/>
          <define VALUE="0.1" NAME="ACT_DYN_Q"/>
          <define VALUE="0.1" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="2.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.9" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="11.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="11.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="false" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="2000"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="indi">
            <dl_setting VAR="reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.p" STEP="1" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.q" STEP="1" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.r" STEP="0.01" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="use_adaptive_indi" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="gh_ref.max_speed" STEP="0.1" SHORTNAME="max_speed" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed">
              <strip_button VALUE="1" NAME="V1" GROUP="speed"/>
              <strip_button VALUE="2" NAME="V2" GROUP="speed"/>
              <strip_button VALUE="5" NAME="V5" GROUP="speed"/>
              <strip_button VALUE="10" NAME="V10" GROUP="speed"/>
            </dl_setting>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Bebop5_Chris" ac_id="151" airframe="airframes/CDW/bebop.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/Tudelft/rotorcraft_survey_competition.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_guidance.xml settings/control/stabilization_att_indi.xml settings/control/rotorcraft_speed.xml" settings_modules="[modules/geo_mag.xml] modules/air_data.xml modules/video_thread.xml modules/cv_blob_locator.xml modules/video_rtp_stream.xml [modules/nav_survey_rectangle_rotorcraft.xml] modules/nav_survey_poly_rotorcraft.xml modules/digital_cam_video.xml" gui_color="#ffff0689b7a1">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="IMAV2015_competition_outdoor" max_dist_from_home="500" lon0="6.04692" lat0="50.788595" ground_alt="260" alt="290">
          <exceptions>
            <exception cond="(electrical.bat_low&&(exception_flag[0]==0))" deroute="Mission.ComeBackAndLand" exec="set_exception_flag(0)"/>
            <exception cond="(electrical.bat_critical&&(exception_flag[1]==0))" deroute="Mission.land_here" exec="set_exception_flag(1)"/>
            <exception cond="((((!(InsideRED(GetPosX(),GetPosY()))&&!((nav_block==IndexOfBlock('Mission.flare'))))&&!((nav_block==IndexOfBlock('Mission.landed'))))&&!((nav_block==IndexOfBlock('Mission.WaitGPS'))))&&!((nav_block==IndexOfBlock('Mission.GeoInit'))))" deroute="Mission.land_emergency"/>
          </exceptions>
          <header>#include &quot;autopilot.h&quot;
#include &quot;subsystems/electrical.h&quot;
#ifdef dc_Survey
#define LINE_START_FUNCTION dc_Survey(dc_distance_interval);
#define LINE_STOP_FUNCTION {dc_autoshoot = DC_AUTOSHOOT_STOP;}
#endif
#ifndef DropOpen
#define DropOpen() FALSE
#endif
#ifndef StartVision
#define StartVision() FALSE
#endif
#ifndef StartVisionLand
#define StartVisionLand() FALSE
#endif
#ifndef StopVision
#define StopVision() FALSE
#endif
#define WpAlt(X) (30)</header>
          <waypoints>
            <waypoint name="_PLATE1" lon="6.04674224830944" lat="50.7888090239206" x="0.00" y="0.00"/>
            <waypoint name="_PLATE2" lon="6.04647268082583" lat="50.7890460391004" x="0.00" y="0.00"/>
            <waypoint name="_PLATE3" lon="6.04631880264475" lat="50.7888723417903" x="0.00" y="0.00"/>
            <waypoint y=".0" x="0.0" name="HOME"/>
            <waypoint y="15.4" x="-7.6" name="CLIMB"/>
            <waypoint y="24.0" x="-3.7" name="STDBY"/>
            <waypoint name="raceA" lon="6.047899" lat="50.790483" x="0.00" y="0.00"/>
            <waypoint name="raceB" lon="6.050200" lat="50.791800" x="0.00" y="0.00"/>
            <waypoint name="WG" lon="6.047431" lat="50.789794" x="0.00" y="0.00"/>
            <waypoint name="WD" lon="6.04677769236132" lat="50.7889307058111" height="30" x="0.00" y="0.00"/>
            <waypoint name="DROP" lon="6.04652336854142" lat="50.788775526101" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ1" lon="6.04652336854142" lat="50.788775526101" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ2" lon="6.04640018582595" lat="50.7889170568219" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ3" lon="6.04642327267965" lat="50.7889755961272" height="15" x="0.00" y="0.00"/>
            <waypoint name="FC" lon="6.047118" lat="50.789522" height="20" x="0.00" y="0.00"/>
            <waypoint y="95.0" x="27.5" name="CAM" height="20"/>
            <waypoint name="S1" lon="6.046721" lat="50.788597" x="0.00" y="0.00"/>
            <waypoint name="S2" lon="6.045944" lat="50.788973" x="0.00" y="0.00"/>
            <waypoint name="S3" lon="6.046330" lat="50.789323" x="0.00" y="0.00"/>
            <waypoint name="S4" lon="6.047113" lat="50.788917" x="0.00" y="0.00"/>
            <waypoint name="p1" lon="6.047864" lat="50.790483" x="0.00" y="0.00"/>
            <waypoint name="p2" lon="6.047897" lat="50.790463" x="0.00" y="0.00"/>
            <waypoint name="p3" lon="6.050232" lat="50.791799" x="0.00" y="0.00"/>
            <waypoint name="p4" lon="6.050201" lat="50.791818" x="0.00" y="0.00"/>
            <waypoint y="-55.4" x="19.2" name="CRUISE" height="25"/>
            <waypoint name="TD" lon="6.04695109268497" lat="50.7887171157922" height="15" x="0.00" y="0.00"/>
            <waypoint y="0" x="0" name="ETD" height="15"/>
            <waypoint name="_green1A" lon="6.046879" lat="50.790144" x="0.00" y="0.00"/>
            <waypoint name="_green1B" lon="6.047844" lat="50.789748" x="0.00" y="0.00"/>
            <waypoint name="_green1C" lon="6.047072" lat="50.789058" x="0.00" y="0.00"/>
            <waypoint name="_green1D" lon="6.047391" lat="50.788919" x="0.00" y="0.00"/>
            <waypoint name="_green1E" lon="6.046880" lat="50.788477" x="0.00" y="0.00"/>
            <waypoint name="_green1F" lon="6.045554" lat="50.789113" x="0.00" y="0.00"/>
            <waypoint name="_green2A" lon="6.050405" lat="50.792252" x="0.00" y="0.00"/>
            <waypoint name="_green2B" lon="6.050962" lat="50.791915" x="0.00" y="0.00"/>
            <waypoint name="_green2C" lon="6.047761" lat="50.790077" x="0.00" y="0.00"/>
            <waypoint name="_green2D" lon="6.047251" lat="50.790426" x="0.00" y="0.00"/>
            <waypoint name="_red1" lon="6.050093" lat="50.792552" x="0.00" y="0.00"/>
            <waypoint name="_red2" lon="6.051268" lat="50.791882" x="0.00" y="0.00"/>
            <waypoint name="_red3" lon="6.047834" lat="50.789988" x="0.00" y="0.00"/>
            <waypoint name="_red4" lon="6.048204" lat="50.789781" x="0.00" y="0.00"/>
            <waypoint name="_red5" lon="6.047626" lat="50.788865" x="0.00" y="0.00"/>
            <waypoint name="_red6" lon="6.046744" lat="50.788209" x="0.00" y="0.00"/>
            <waypoint name="_red7" lon="6.045032" lat="50.789046" x="0.00" y="0.00"/>
            <waypoint name="_red8" lon="6.046338" lat="50.790416" x="0.00" y="0.00"/>
            <waypoint name="_vision1" lon="6.047338" lat="50.789622" x="0.00" y="0.00"/>
            <waypoint name="_vision2" lon="6.047115" lat="50.789352" x="0.00" y="0.00"/>
            <waypoint name="_vision3" lon="6.046932" lat="50.789443" x="0.00" y="0.00"/>
            <waypoint name="_vision4" lon="6.047205" lat="50.789662" x="0.00" y="0.00"/>
            <waypoint name="_land1" lon="6.046939" lat="50.788606" x="0.00" y="0.00"/>
            <waypoint name="_land2" lon="6.046810" lat="50.788686" x="0.00" y="0.00"/>
            <waypoint name="_land3" lon="6.046949" lat="50.788813" x="0.00" y="0.00"/>
            <waypoint name="_land4" lon="6.047124" lat="50.788737" x="0.00" y="0.00"/>
          </waypoints>
          <sectors>
            <sector name="RED" color="red">
              <corner name="_red1"/>
              <corner name="_red2"/>
              <corner name="_red3"/>
              <corner name="_red4"/>
              <corner name="_red5"/>
              <corner name="_red6"/>
              <corner name="_red7"/>
              <corner name="_red8"/>
            </sector>
            <sector name="GREEN1" color="green">
              <corner name="_green1A"/>
              <corner name="_green1B"/>
              <corner name="_green1C"/>
              <corner name="_green1D"/>
              <corner name="_green1E"/>
              <corner name="_green1F"/>
            </sector>
            <sector name="GREEN2" color="green">
              <corner name="_green2A"/>
              <corner name="_green2B"/>
              <corner name="_green2C"/>
              <corner name="_green2D"/>
            </sector>
            <sector name="TENNIS" color="green">
              <corner name="_vision1"/>
              <corner name="_vision2"/>
              <corner name="_vision3"/>
              <corner name="_vision4"/>
            </sector>
            <sector name="LAND" color="green">
              <corner name="_land1"/>
              <corner name="_land2"/>
              <corner name="_land3"/>
              <corner name="_land4"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Dummy" no="0"/>
            <block name="Mission.WaitGPS" no="1">
              <call fun="NavKillThrottle()" no="0"/>
              <while cond="!(GpsFixValid())" no="1"/>
            </block>
            <block name="Mission.GeoInit" no="2">
              <while cond="LessThan(NavBlockTime(),10)" no="0"/>
              <call fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Mission.holding_point" no="3">
              <call fun="NavKillThrottle()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Start Engine" strip_icon="resurrect.png" group="engine" name="Mission.Start Engine" no="4">
              <call fun="NavResurrect()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Takeoff-Standby" strip_icon="takeoff.png" group="takeoff" name="Mission.Takeoff-Standby" no="5">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.Standby"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Map" strip_icon="survey.png" group="takeoff" name="Mission.Takeoff-Map" no="6">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.SurveyPoly"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Drop" strip_icon="parachute.png" group="takeoff" name="Mission.Takeoff-Drop" no="7">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.drop"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Water" group="takeoff" name="Mission.Takeoff-Water" no="8">
              <exception cond="((stateGetPositionEnu_f())->z>27.000000)" deroute="Mission.drop_water"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Standby" strip_icon="home.png" group="hover" name="Mission.Standby" no="9">
              <stay wp="STDBY" no="0"/>
            </block>
            <block strip_button="LookRobot-FC" strip_icon="lookdown.png" group="hover" name="Mission.GoTennis" no="10">
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
              <go wp="CRUISE" no="1"/>
            </block>
            <block name="Mission.LookRobot" no="11">
              <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
            </block>
            <block name="Mission.Vision" no="12">
              <exception cond="!(InsideTENNIS(GetPosX(),GetPosY()))" deroute="Mission.NoVision"/>
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndVisualLand"/>
              <call fun="StartVision()" no="0"/>
              <stay wp="CAM" no="1"/>
            </block>
            <block name="Mission.NoVision" no="13">
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndLand"/>
              <call fun="StartVision()" no="0"/>
              <stay wp="FC" no="1"/>
            </block>
            <block strip_button="ComeBackAndLand" strip_icon="land-right.png" group="hover" name="Mission.ComeBackAndLand" no="14">
              <call fun="StopVision()" no="0"/>
              <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <go wp="CRUISE" no="4"/>
              <deroute block="Mission.land" no="5"/>
            </block>
            <block name="Mission.ComeBackAndVisualLand" no="15">
              <call fun="StopVision()" no="0"/>
              <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
              <go wp="CRUISE" no="5"/>
              <deroute block="Mission.visual_flare" no="6"/>
            </block>
            <block strip_button="Follow-Vision-Geolocation-Results" strip_icon="lookdown.png" group="hover" name="Mission.CAM" no="16">
              <stay wp="CAM" no="0"/>
            </block>
            <block name="Mission.stay_p1" no="17">
              <stay wp="p1" no="0"/>
            </block>
            <block name="Mission.go_p2" no="18">
              <go wp="p2" no="0"/>
              <deroute block="Mission.stay_p1" no="1"/>
            </block>
            <block name="Mission.line_p1_p2" no="19">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <stay until="(stage_time>10)" wp="p2" no="1"/>
              <go from="p2" hmode="route" wp="p1" no="2"/>
              <deroute block="Mission.stay_p1" no="3"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="Mission.circle CV" no="20">
              <circle radius="nav_radius" wp="CAM" no="0"/>
            </block>
            <block group="drop" name="Mission.drop" no="21">
              <go wp="DROP" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone1" no="22">
              <go wp="RZ1" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone2" no="23">
              <go wp="RZ2" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone3" no="24">
              <go wp="RZ3" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_water" no="25">
              <go wp="WD" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block strip_button="Oval p1-p2-p3-p4" strip_icon="oval.png" group="race" name="Mission.race" no="26">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <go from="p2" hmode="route" wp="p3" no="1"/>
              <go from="p3" hmode="route" wp="p4" no="2"/>
              <go from="p4" hmode="route" wp="p1" no="3"/>
              <deroute block="Mission.race" no="4"/>
            </block>
            <block strip_button="Line raceA-raceB" strip_icon="line.png" group="race" name="Mission.raceline" no="27">
              <go from="raceA" hmode="route" wp="raceB" no="0"/>
              <go from="raceB" hmode="route" wp="raceA" no="1"/>
              <deroute block="Mission.raceline" no="2"/>
            </block>
            <block group="survey" strip_button="Survey-Polygon-S1-S2-S3-S4" strip_icon="googleearth.png" name="Mission.SurveyPoly" no="28">
              <call fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
              <deroute block="Mission.Survey Poly RUN" no="1"/>
            </block>
            <block name="Mission.Survey Poly RUN" no="29">
              <exception cond="(PolySurveySweepNum>=5)" deroute="Mission.GoTennis"/>
              <call fun="nav_survey_poly_run()" no="0"/>
            </block>
            <block strip_button="Land Here" strip_icon="downdown.png" group="landing" name="Mission.land_here" no="30">
              <call fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
              <call fun="NavSetWaypointHere(WP_TD)" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="Land at TD" strip_icon="land-right.png" group="landing" name="Mission.land" no="31">
              <go wp="TD" no="0"/>
              <call fun="StartVisionLand()" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="VisualLanding-CAM" strip_icon="cam_lock.png" group="landing" name="Mission.visual_flare" no="32">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <exception cond="!(InsideLAND(GetPosX(),GetPosY()))" deroute="Mission.land"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.flare" no="33">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block strip_button="Kill" strip_icon="kill.png" group="landing" name="Mission.landed" no="34">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="Mission.land_emergency" no="35">
              <call fun="NavSetWaypointHere(WP_ETD)" no="0"/>
              <deroute block="Mission.flare_emergency" no="1"/>
            </block>
            <block name="Mission.flare_emergency" no="36">
              <exception cond="NavDetectGround()" deroute="Mission.landed_emergency"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed_emergency"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.landed_emergency" no="37">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="HOME" no="38">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="38" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="37" block_name="Mission.landed_emergency" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="1">
            <deroute block="Mission.flare_emergency" no="1"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="0">
            <call fun="NavSetWaypointHere(WP_ETD)" no="0"/>
          </stage>
          <stage block="34" block_name="Mission.landed" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="1">
            <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="1">
            <call fun="StartVisionLand()" no="1"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="1">
            <call fun="NavSetWaypointHere(WP_TD)" no="1"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="0">
            <call fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
          </stage>
          <stage block="29" block_name="Mission.Survey Poly RUN" stage="0">
            <call fun="nav_survey_poly_run()" no="0"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="1">
            <deroute block="Mission.Survey Poly RUN" no="1"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="0">
            <call fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="2">
            <deroute block="Mission.raceline" no="2"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="1">
            <go from="raceB" hmode="route" wp="raceA" no="1"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="0">
            <go from="raceA" hmode="route" wp="raceB" no="0"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="4">
            <deroute block="Mission.race" no="4"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="3">
            <go from="p4" hmode="route" wp="p1" no="3"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="2">
            <go from="p3" hmode="route" wp="p4" no="2"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="1">
            <go from="p2" hmode="route" wp="p3" no="1"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="0">
            <go wp="WD" no="0"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="0">
            <go wp="RZ3" no="0"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="0">
            <go wp="RZ2" no="0"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="0">
            <go wp="RZ1" no="0"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="0">
            <go wp="DROP" no="0"/>
          </stage>
          <stage block="20" block_name="Mission.circle CV" stage="0">
            <circle radius="nav_radius" wp="CAM" no="0"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="3">
            <deroute block="Mission.stay_p1" no="3"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="2">
            <go from="p2" hmode="route" wp="p1" no="2"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="1">
            <stay until="(stage_time>10)" wp="p2" no="1"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="1">
            <deroute block="Mission.stay_p1" no="1"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="17" block_name="Mission.stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="16" block_name="Mission.CAM" stage="0">
            <stay wp="CAM" no="0"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="6">
            <deroute block="Mission.visual_flare" no="6"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="5">
            <go wp="CRUISE" no="5"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="4">
            <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="3">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="1">
            <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="0">
            <call fun="StopVision()" no="0"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="5">
            <deroute block="Mission.land" no="5"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="4">
            <go wp="CRUISE" no="4"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="3">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="1">
            <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="0">
            <call fun="StopVision()" no="0"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="1">
            <stay wp="FC" no="1"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="0">
            <call fun="StartVision()" no="0"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="1">
            <stay wp="CAM" no="1"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="0">
            <call fun="StartVision()" no="0"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="1">
            <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="0">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="1">
            <go wp="CRUISE" no="1"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="0">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
          </stage>
          <stage block="9" block_name="Mission.Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="0">
            <call fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="2">
            <call fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="0">
            <while cond="LessThan(NavBlockTime(),10)" no="0"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="1">
            <while cond="!(GpsFixValid())" no="1"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="video_thread.take_shot" STEP="1" SHORTNAME="take_shot" MODULE="computer_vision/video_thread" MIN="0" MAX="1" HANDLER="take_shot">
                <strip_button VALUE="1" NAME="Videothread Save Jpeg" ICON="digital-camera.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="video_thread.fps" STEP="1" SHORTNAME="fps" PARAM="VIDEO_THREAD_FPS" MODULE="computer_vision/video_thread" MIN="1" MAX="25"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="ColorFilter">
              <dl_setting VAR="color_lum_min" STEP="1" SHORTNAME="y_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_lum_max" STEP="1" SHORTNAME="y_max" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cb_min" STEP="1" SHORTNAME="u_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cb_max" STEP="1" SHORTNAME="u_max" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cr_min" STEP="1" SHORTNAME="v_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cr_max" STEP="1" SHORTNAME="v_max" MIN="0" MAX="255"/>
              <dl_setting VAR="marker_size" STEP="1" SHORTNAME="marker" MIN="1" MAX="20"/>
              <dl_setting VAR="geofilter_length" STEP="1" SHORTNAME="filter" MIN="1" MAX="100"/>
              <dl_setting VAR="record_video" VALUES="OFF|ON" STEP="1" SHORTNAME="record" MIN="0" MAX="1"/>
              <dl_setting VAR="cv_blob_locator_reset" STEP="1" MODULE="computer_vision/cv_blob_locator" MIN="0" MAX="1" HANDLER="GeoReset">
                <strip_button VALUE="1" NAME="Reset Geoprojection Filter" ICON="resurrect.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="cv_blob_locator_type" VALUES="NONE|BLOB|IMAVMARKER|WINDOW" STEP="1" MODULE="computer_vision/cv_blob_locator" MIN="0" MAX="2">
                <strip_button VALUE="0" NAME="CV: None" ICON="off.png" GROUP="cv"/>
                <strip_button VALUE="1" NAME="CV: Colored Blob" ICON="cv_blob.png" GROUP="cv"/>
                <strip_button VALUE="2" NAME="CV: Marker" ICON="cv_marker.png" GROUP="cv"/>
                <strip_button VALUE="3" NAME="CV: Window Finder" ICON="cv_window.png" GROUP="cv"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="viewvideo.use_rtp" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="rtp" PARAM="VIEWVIDEO_USE_RTP" MODULE="computer_vision/viewvideo" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="P_Survey">
              <dl_setting VAR="Poly_Size" TYPE="uint8_t" STEP="1" SHORTNAME="Size" MODULE="modules/nav/nav_survey_poly_rotorcraft" MIN="0" MAX="20"/>
              <dl_setting VAR="Poly_Distance" TYPE="float" STEP="1" SHORTNAME="Sweep" MODULE="modules/nav/nav_survey_poly_rotorcraft" MIN="0" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="control">
            <dl_settings NAME="dc">
              <dl_setting VAR="0" STEP="1" SHORTNAME="Shutter" MODULE="digital_cam/dc" MIN="0" MAX="255" HANDLER="send_command">
                <strip_button VALUE="32" NAME="Photo" ICON="digital-camera.png" GROUP="dc"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot" VALUES="STOP|PERIODIC|DISTANCE|EXT_TRIG" STEP="1" MIN="0" MAX="3">
                <strip_button VALUE="1" NAME="Start Autoshoot" ICON="dcstart.png" GROUP="dc"/>
                <strip_button VALUE="0" NAME="Stop Autoshoot" ICON="dcstop.png" GROUP="dc"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot_period" UNIT="sec" STEP="0.5" SHORTNAME="Periodic" PARAM="DC_AUTOSHOOT_PERIOD" MIN="0.1" MAX="60"/>
              <dl_setting VAR="dc_distance_interval" UNIT="meter" STEP="1" SHORTNAME="dist" PARAM="DC_AUTOSHOOT_DISTANCE_INTERVAL" MIN="0" MAX="255"/>
              <dl_setting VAR="dc_survey_interval" STEP="5" SHORTNAME="Survey-Interval" MODULE="digital_cam/dc" MIN="0" MAX="250" HANDLER="Survey"/>
              <dl_setting VAR="dc_circle_interval" STEP="5" SHORTNAME="Circle-Interval" MODULE="digital_cam/dc" MIN="5" MAX="90" HANDLER="Circle"/>
              <dl_setting VAR="dc_cam_tracing" STEP="1" SHORTNAME="Cam-Tracing" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop_indi">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop">
            <define VALUE="0.1450" NAME="STABILIZATION_INDI_G2_R"/>
          </target>
          <target NAME="nps" BOARD="pc">
            <subsystem TYPE="jsbsim" NAME="fdm"/>
            <subsystem NAME="udp"/>
            <define VALUE="0.0" NAME="STABILIZATION_INDI_G2_R"/>
          </target>
          <subsystem TYPE="transparent_udp" NAME="telemetry"/>
          <subsystem TYPE="datalink" NAME="radio_control"/>
          <subsystem NAME="motor_mixing"/>
          <subsystem TYPE="bebop" NAME="actuators"/>
          <subsystem TYPE="bebop" NAME="imu"/>
          <subsystem TYPE="furuno" NAME="gps"/>
          <subsystem TYPE="indi" NAME="stabilization"/>
          <subsystem TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
          </subsystem>
          <subsystem TYPE="extended" NAME="ins"/>
        </firmware>
        <modules MAIN_FREQ="512">
          <load NAME="geo_mag.xml"/>
          <load NAME="air_data.xml"/>
          <load NAME="send_imu_mag_current.xml"/>
          <load NAME="video_thread.xml">
            <define VALUE="4" NAME="VIDEO_THREAD_FPS"/>
            <define VALUE="bottom_camera" NAME="VIDEO_THREAD_CAMERA"/>
            <define VALUE="/data/ftp/internal_000/images" NAME="VIDEO_THREAD_SHOT_PATH"/>
          </load>
          <load NAME="cv_blob_locator.xml"/>
          <load NAME="video_rtp_stream.xml">
            <define VALUE="80" NAME="VIEWVIDEO_QUALITY_FACTOR"/>
            <define VALUE="1" NAME="VIEWVIDEO_DOWNSIZE_FACTOR"/>
          </load>
          <load NAME="nav_survey_rectangle_rotorcraft.xml">
            <define VALUE="10" NAME="RECTANGLE_SURVEY_DEFAULT_SWEEP"/>
          </load>
          <load NAME="nav_survey_poly_rotorcraft.xml">
            <define VALUE="10" NAME="POLYSURVEY_DEFAULT_DISTANCE"/>
          </load>
          <load NAME="digital_cam_video.xml">
            <define VALUE="5" NAME="DC_AUTOSHOOT_DISTANCE_INTERVAL"/>
          </load>
          <load NAME="video_exif.xml"/>
        </modules>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_motors_on,FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <include HREF="conf/airframes/TUDelft/calibrations/bebop5.xml"/>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="10000" NAME="SP_MAX_P"/>
          <define VALUE="10000" NAME="SP_MAX_Q"/>
          <define VALUE="10000" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="4" NAME="REF_TAU"/>
          <define VALUE="400" NAME="GAIN_P"/>
          <define VALUE="400" NAME="GAIN_Q"/>
          <define VALUE="350" NAME="GAIN_R"/>
          <define VALUE="75" NAME="IGAIN_P"/>
          <define VALUE="75" NAME="IGAIN_Q"/>
          <define VALUE="50" NAME="IGAIN_R"/>
          <define VALUE="300" NAME="DDGAIN_P"/>
          <define VALUE="300" NAME="DDGAIN_Q"/>
          <define VALUE="300" NAME="DDGAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.0639" NAME="G1_P"/>
          <define VALUE="0.0361" NAME="G1_Q"/>
          <define VALUE="0.0022" NAME="G1_R"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="50.0" NAME="FILT_OMEGA"/>
          <define VALUE="0.55" NAME="FILT_ZETA"/>
          <define VALUE="50.0" NAME="FILT_OMEGA_R"/>
          <define VALUE="0.55" NAME="FILT_ZETA_R"/>
          <define VALUE="0.1" NAME="ACT_DYN_P"/>
          <define VALUE="0.1" NAME="ACT_DYN_Q"/>
          <define VALUE="0.1" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="2.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.9" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="11.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="11.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="false" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="2000"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="indi">
            <dl_setting VAR="reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.p" STEP="1" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.q" STEP="1" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.r" STEP="0.01" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="use_adaptive_indi" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="gh_ref.max_speed" STEP="0.1" SHORTNAME="max_speed" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed">
              <strip_button VALUE="1" NAME="V1" GROUP="speed"/>
              <strip_button VALUE="2" NAME="V2" GROUP="speed"/>
              <strip_button VALUE="5" NAME="V5" GROUP="speed"/>
              <strip_button VALUE="10" NAME="V10" GROUP="speed"/>
            </dl_setting>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Bebop_default" ac_id="20" airframe="airframes/examples/bebop.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_guidance.xml settings/control/stabilization_att_int_quat.xml settings/control/rotorcraft_speed.xml" settings_modules="modules/geo_mag.xml modules/air_data.xml modules/video_thread.xml modules/video_rtp_stream.xml" gui_color="red">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 2.0"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="test yaw" no="10">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="11">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="16">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="16" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="10" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="video_thread.take_shot" STEP="1" SHORTNAME="take_shot" MODULE="computer_vision/video_thread" MIN="0" MAX="1" HANDLER="take_shot">
                <strip_button VALUE="1" NAME="Videothread Save Jpeg" ICON="digital-camera.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="video_thread.fps" STEP="1" SHORTNAME="fps" PARAM="VIDEO_THREAD_FPS" MODULE="computer_vision/video_thread" MIN="1" MAX="25"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="viewvideo.use_rtp" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="rtp" PARAM="VIEWVIDEO_USE_RTP" MODULE="computer_vision/viewvideo" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop"/>
          <target NAME="nps" BOARD="pc">
            <subsystem TYPE="jsbsim" NAME="fdm"/>
            <subsystem NAME="udp"/>
          </target>
          <subsystem TYPE="transparent_udp" NAME="telemetry"/>
          <subsystem TYPE="datalink" NAME="radio_control"/>
          <subsystem NAME="motor_mixing"/>
          <subsystem TYPE="bebop" NAME="actuators"/>
          <subsystem TYPE="bebop" NAME="imu"/>
          <subsystem TYPE="furuno" NAME="gps"/>
          <subsystem TYPE="int_quat" NAME="stabilization"/>
          <subsystem TYPE="float_mlkf" NAME="ahrs"/>
          <subsystem TYPE="extended" NAME="ins"/>
        </firmware>
        <modules MAIN_FREQ="512">
          <load NAME="geo_mag.xml"/>
          <load NAME="air_data.xml"/>
          <load NAME="send_imu_mag_current.xml"/>
          <load NAME="video_thread.xml">
            <define VALUE="4" NAME="VIDEO_THREAD_FPS"/>
            <define VALUE="bottom_camera" NAME="VIDEO_THREAD_CAMERA"/>
            <define VALUE="/data/ftp/internal_000/images" NAME="VIDEO_THREAD_SHOT_PATH"/>
          </load>
          <load NAME="video_rtp_stream.xml">
            <define VALUE="80" NAME="VIEWVIDEO_QUALITY_FACTOR"/>
            <define VALUE="1" NAME="VIEWVIDEO_DOWNSIZE_FACTOR"/>
          </load>
        </modules>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_motors_on,FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="18" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="157" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="49" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="10.5007722373" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="11.1147400462" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="11.6479371722" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.0" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="10000" NAME="SP_MAX_P"/>
          <define VALUE="10000" NAME="SP_MAX_Q"/>
          <define VALUE="10000" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="4" NAME="REF_TAU"/>
          <define VALUE="400" NAME="GAIN_P"/>
          <define VALUE="400" NAME="GAIN_Q"/>
          <define VALUE="350" NAME="GAIN_R"/>
          <define VALUE="75" NAME="IGAIN_P"/>
          <define VALUE="75" NAME="IGAIN_Q"/>
          <define VALUE="50" NAME="IGAIN_R"/>
          <define VALUE="300" NAME="DDGAIN_P"/>
          <define VALUE="300" NAME="DDGAIN_Q"/>
          <define VALUE="300" NAME="DDGAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="920" NAME="PHI_PGAIN"/>
          <define VALUE="425" NAME="PHI_DGAIN"/>
          <define VALUE="0" NAME="PHI_IGAIN"/>
          <define VALUE="920" NAME="THETA_PGAIN"/>
          <define VALUE="425" NAME="THETA_DGAIN"/>
          <define VALUE="0" NAME="THETA_IGAIN"/>
          <define VALUE="8000" NAME="PSI_PGAIN"/>
          <define VALUE="700" NAME="PSI_DGAIN"/>
          <define VALUE="0" NAME="PSI_IGAIN"/>
          <define VALUE="0" NAME="PHI_DDGAIN"/>
          <define VALUE="0" NAME="THETA_DDGAIN"/>
          <define VALUE="0" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="13" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="2.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="9.7" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="false" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="2000"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Att Loop">
            <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="400"/>
            <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stab_att_ref_model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
            <dl_setting VAR="stab_att_ref_model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
            <dl_setting VAR="stab_att_ref_model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
            <dl_setting VAR="stab_att_ref_model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
            <dl_setting VAR="stab_att_ref_model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
            <dl_setting VAR="stab_att_ref_model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="gh_ref.max_speed" STEP="0.1" SHORTNAME="max_speed" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed">
              <strip_button VALUE="1" NAME="V1" GROUP="speed"/>
              <strip_button VALUE="2" NAME="V2" GROUP="speed"/>
              <strip_button VALUE="5" NAME="V5" GROUP="speed"/>
              <strip_button VALUE="10" NAME="V10" GROUP="speed"/>
            </dl_setting>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="DelFly_Optitrack" ac_id="124" airframe="airframes/TUDelft/airframes/delfly_optitrack.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default_delfly.xml" flight_plan="flight_plans/rotorcraft_dfiawt_ojf.xml" settings="settings/rotorcraft_basic.xml settings/control/stabilization_att_int.xml settings/control/rotorcraft_guidance.xml settings/control/stabilization_rate.xml settings/superbitrf.xml settings/modules/delfly_utils.xml settings/persistent_settings.xml" settings_modules="" gui_color="green">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="ROLL" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="PITCH" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="950" MAX="2050" FUNCTION="YAW" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1223" MIN="1223" MAX="2050" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="UNUSED" CTL="G" AVERAGE="1"/>
        <channel NEUTRAL="1496" MIN="2050" MAX="948" FUNCTION="GAIN1" CTL="E" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="948" FUNCTION="MODE" CTL="PHAUX2" AVERAGE="1"/>
      </radio>
      <dump>
        <flight_plan security_height="0.3" name="Rotorcraft Open Jet Facility of the Delft University of Technology" max_dist_from_home="20" lon0="4.376789" lat0="51.990634" ground_alt="45" alt="47">
          <header>#include &quot;autopilot.h&quot;
#include &quot;guidance.h&quot;
//#include &quot;positionctrl_windtunnel.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="-0.6" x="1.2" name="CLIMB"/>
            <waypoint y="-0.8" x="-0.7" name="STDBY"/>
            <waypoint y="-1.7" x="0.8" name="TD"/>
            <waypoint name="TARGET" lon="4.3768132" lat="51.9906371" alt="2" x="0.00" y="0.00"/>
            <waypoint name="p1" lon="4.3767945" lat="51.9906308" alt="2" x="0.00" y="0.00"/>
            <waypoint name="p2" lon="4.3768256" lat="51.9906420" alt="2" x="0.00" y="0.00"/>
            <waypoint name="_FA1" lon="4.3768384" lat="51.9906316" x="0.00" y="0.00"/>
            <waypoint name="_FA2" lon="4.3767901" lat="51.9906120" x="0.00" y="0.00"/>
            <waypoint name="_FA3" lon="4.3767675" lat="51.9906309" x="0.00" y="0.00"/>
            <waypoint name="_FA4" lon="4.3768134" lat="51.9906522" x="0.00" y="0.00"/>
          </waypoints>
          <sectors>
            <sector name="FlightArea" color="red">
              <corner name="_FA1"/>
              <corner name="_FA2"/>
              <corner name="_FA3"/>
              <corner name="_FA4"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Wait GPS" no="0">
              <call fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 1)" no="0"/>
              <call fun="NavSetWaypointHere(WP_HOME)" no="2"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="3"/>
              <call fun="NavSetWaypointHere(WP_STDBY)" no="4"/>
              <call fun="NavSetGroundReferenceHere()" no="5"/>
            </block>
            <block name="Holding point" no="2">
              <call fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="flat_theme/on.png" strip_button="Start Engine" name="Start Engine" no="3">
              <call fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="flat_theme/launch.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 1.5"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="flat_theme/home.png" strip_button="Standby" name="Standby" key="1" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block strip_icon="flat_theme/circle-right.png" strip_button="Stay p1" name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="Decrease Altitude" no="7">
              <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
              <call fun="{ waypoint_set_alt( WP_TD, GetPosAlt() - 1 ); FALSE; }" no="1"/>
              <stay wp="TD" no="2"/>
            </block>
            <block name="Descend" no="8">
              <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
              <stay wp="TD" vmode="climb" climb="-0.1" no="1"/>
            </block>
            <block strip_icon="flat_theme/land.png" strip_button="Land home" name="land_stdby" key="0" group="land" no="9">
              <go wp="STDBY" no="0"/>
            </block>
            <block strip_icon="flat_theme/land-left.png" strip_button="Land here" name="land here" key="l" group="land" no="10">
              <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="11">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="12">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight() || 0.1 > GetPosAlt()"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="13">
              <call fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="HOME" no="14">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="14" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="13" block_name="landed" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="13" block_name="landed" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="12" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="12" block_name="flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="11" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="10" block_name="land here" stage="0">
            <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="9" block_name="land_stdby" stage="0">
            <go wp="STDBY" no="0"/>
          </stage>
          <stage block="8" block_name="Descend" stage="1">
            <stay wp="TD" vmode="climb" climb="-0.1" no="1"/>
          </stage>
          <stage block="8" block_name="Descend" stage="0">
            <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="7" block_name="Decrease Altitude" stage="2">
            <stay wp="TD" no="2"/>
          </stage>
          <stage block="7" block_name="Decrease Altitude" stage="1">
            <call fun="{ waypoint_set_alt( WP_TD, GetPosAlt() - 1 ); FALSE; }" no="1"/>
          </stage>
          <stage block="7" block_name="Decrease Altitude" stage="0">
            <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="5">
            <call fun="NavSetGroundReferenceHere()" no="5"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="4">
            <call fun="NavSetWaypointHere(WP_STDBY)" no="4"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="3">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="3"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call fun="NavSetWaypointHere(WP_HOME)" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 1)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <airframe name="delfly_optitrack">
        <servos driver="Pwm">
          <servo name="MOTOR" no="4" min="1100" neutral="1100" max="1900"/>
          <servo name="RUDDER" no="0" min="1100" neutral="1500" max="1900"/>
          <servo name="ELEVATOR" no="5" min="1100" neutral="1500" max="1900"/>
          <servo name="LEDS" no="2" min="0" neutral="0" max="2500"/>
        </servos>
        <commands>
          <axis name="THRUST" failsafe_value="0"/>
          <axis name="ROLL" failsafe_value="0"/>
          <axis name="PITCH" failsafe_value="0"/>
          <axis name="YAW" failsafe_value="0"/>
        </commands>
        <command_laws>
          <let var="ledscontrol" value="(2*LEDS_switch-1)*MAX_PPRZ"/>
          <set servo="MOTOR" value="(1-SRVO_kill)*@THRUST"/>
          <set servo="RUDDER" value="(1-SRVO_kill)*@YAW"/>
          <set servo="ELEVATOR" value="(1-SRVO_kill)*@PITCH"/>
          <set servo="LEDS" value="$ledscontrol"/>
        </command_laws>
        <section name="MIXING" prefix="MOTOR_MIXING_">
          <define name="TRIM_ROLL" value="0"/>
          <define name="TRIM_PITCH" value="0"/>
          <define name="TRIM_YAW" value="0"/>
          <define name="NB_MOTOR" value="4"/>
          <define name="SCALE" value="256"/>
          <define name="ROLL_COEF" value="{  -256, -256,  256,  256 }"/>
          <define name="PITCH_COEF" value="{  256, -256, -256,  256 }"/>
          <define name="YAW_COEF" value="{    256, -256,  256, -256 }"/>
          <define name="THRUST_COEF" value="{ 256,  256,  256,  256 }"/>
        </section>
        <section name="IMU" prefix="IMU_">
          <define name="BODY_TO_IMU_PHI" value="-5." unit="deg"/>
          <define name="BODY_TO_IMU_THETA" value="245." unit="deg"/>
          <define name="BODY_TO_IMU_PSI" value="0." unit="deg"/>
          <define name="ACCEL_X_NEUTRAL" value="0"/>
          <define name="ACCEL_Y_NEUTRAL" value="0"/>
          <define name="ACCEL_Z_NEUTRAL" value="0"/>
          <define name="MAG_X_NEUTRAL" value="10"/>
          <define name="MAG_Y_NEUTRAL" value="238"/>
          <define name="MAG_Z_NEUTRAL" value="-74"/>
          <define name="MAG_X_SENS" value="3.67001348283" integer="16"/>
          <define name="MAG_Y_SENS" value="3.98840260231" integer="16"/>
          <define name="MAG_Z_SENS" value="4.32568461736" integer="16"/>
          <define name="MAG_X_CURRENT_COEF" value="-0.0176704713698"/>
          <define name="MAG_Y_CURRENT_COEF" value="0.0174222594634"/>
          <define name="MAG_Z_CURRENT_COEF" value="0.0187570316492"/>
        </section>
        <section name="AUTOPILOT">
          <define name="MODE_STARTUP" value="AP_MODE_RC_DIRECT"/>
          <define name="MODE_MANUAL" value="AP_MODE_RC_DIRECT"/>
          <define name="MODE_AUTO1" value="AP_MODE_ATTITUDE_DIRECT"/>
          <define name="MODE_AUTO2" value="AP_MODE_HOVER_DIRECT"/>
          <define name="USE_THROTTLE_FOR_MOTOR_ARMING" value="TRUE"/>
          <define name="NO_RC_THRUST_LIMIT" value="TRUE"/>
        </section>
        <section name="BAT">
          <define name="MILLIAMP_AT_FULL_THROTTLE" value="2000"/>
          <define name="CATASTROPHIC_BAT_LEVEL" value="2.8" unit="V"/>
          <define name="CRITIC_BAT_LEVEL" value="3.0" unit="V"/>
          <define name="LOW_BAT_LEVEL" value="3.2" unit="V"/>
          <define name="MAX_BAT_LEVEL" value="4.1" unit="V"/>
        </section>
        <section name="STABILIZATION_RATE" prefix="STABILIZATION_RATE_">
          <define name="SP_MAX_P" value="15000"/>
          <define name="SP_MAX_Q" value="15000"/>
          <define name="SP_MAX_R" value="15000"/>
          <define name="GAIN_P" value="400"/>
          <define name="GAIN_Q" value="400"/>
          <define name="GAIN_R" value="418"/>
          <define name="IGAIN_P" value="301"/>
          <define name="IGAIN_Q" value="302"/>
          <define name="IGAIN_R" value="303"/>
        </section>
        <section name="STABILIZATION_ATTITUDE" prefix="STABILIZATION_ATTITUDE_">
          <define name="SP_MAX_PHI" value="15." unit="deg"/>
          <define name="SP_MAX_THETA" value="45." unit="deg"/>
          <define name="SP_MAX_PSI" value="45." unit="deg"/>
          <define name="SP_MAX_R" value="90." unit="deg/s"/>
          <define name="SP_MAX_P" value="90." unit="deg/s"/>
          <define name="DEADBAND_R" value="250"/>
          <define name="DEADBAND_A" value="250"/>
          <define name="REF_OMEGA_P" value="800" unit="deg/s"/>
          <define name="REF_ZETA_P" value="0.85"/>
          <define name="REF_MAX_P" value="400." unit="deg/s"/>
          <define name="REF_MAX_PDOT" value="RadOfDeg(8000.)"/>
          <define name="REF_OMEGA_Q" value="800" unit="deg/s"/>
          <define name="REF_ZETA_Q" value="0.85"/>
          <define name="REF_MAX_Q" value="400." unit="deg/s"/>
          <define name="REF_MAX_QDOT" value="RadOfDeg(8000.)"/>
          <define name="REF_OMEGA_R" value="500" unit="deg/s"/>
          <define name="REF_ZETA_R" value="0.85"/>
          <define name="REF_MAX_R" value="90." unit="deg/s"/>
          <define name="REF_MAX_RDOT" value="RadOfDeg(900.)"/>
          <define name="PHI_PGAIN" value="1"/>
          <define name="PHI_DGAIN" value="1"/>
          <define name="PHI_IGAIN" value="0"/>
          <define name="THETA_PGAIN" value="2000"/>
          <define name="THETA_DGAIN" value="200"/>
          <define name="THETA_IGAIN" value="800"/>
          <define name="PSI_PGAIN" value="1000"/>
          <define name="PSI_DGAIN" value="0"/>
          <define name="PSI_IGAIN" value="10"/>
          <define name="PHI_DDGAIN" value="0"/>
          <define name="THETA_DDGAIN" value="0"/>
          <define name="PSI_DDGAIN" value="300"/>
          <define name="PHI_AGAIN" value="0"/>
          <define name="THETA_AGAIN" value="0"/>
          <define name="PSI_AGAIN" value="0"/>
        </section>
        <section name="INS" prefix="INS_">
          <define name="USE_GPS_ALT" value="1"/>
          <define name="VFF_R_GPS" value="0.01"/>
        </section>
        <section name="GUIDANCE_V" prefix="GUIDANCE_V_">
          <define name="HOVER_KP" value="276"/>
          <define name="HOVER_KD" value="455"/>
          <define name="HOVER_KI" value="100"/>
          <define name="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" value="0.75"/>
          <define name="ADAPT_THROTTLE_ENABLED" value="FALSE"/>
        </section>
        <section name="AHRS" prefix="AHRS_">
          <define name="H_X" value="0.39049610"/>
          <define name="H_Y" value="0.00278894"/>
          <define name="H_Z" value="0.92060036"/>
          <define name="USE_GPS_HEADING" value="1"/>
          <define name="HEADING_UPDATE_GPS_MIN_SPEED" value="0"/>
        </section>
        <section name="GUIDANCE_H" prefix="GUIDANCE_H_">
          <define name="PGAIN" value="90"/>
          <define name="DGAIN" value="50"/>
          <define name="IGAIN" value="24"/>
          <define name="USE_SPEED_REF" value="FALSE"/>
          <define name="USE_REF" value="FALSE"/>
        </section>
        <section name="SIMULATOR" prefix="NPS_">
          <define name="ACTUATOR_NAMES" value="{&quot;ne_motor&quot;, &quot;se_motor&quot;, &quot;sw_motor&quot;, &quot;nw_motor&quot;}"/>
          <define name="JSBSIM_MODEL" value="&quot;simple_x_quad_ccw&quot;"/>
          <define name="SENSORS_PARAMS" value="&quot;nps_sensors_params_default.h&quot;"/>
        </section>
        <section name="GPS" prefix="GPS_">
          <define name="USE_DATALINK_SMALL" value="1"/>
          <define name="LOCAL_ECEF_ORIGIN_X" value="392433200"/>
          <define name="LOCAL_ECEF_ORIGIN_Y" value="30036200"/>
          <define name="LOCAL_ECEF_ORIGIN_Z" value="500219700"/>
        </section>
        <section name="DELFLY_UTILS" prefix="DELFLY_UTILS_">
          <define name="LEDS_SWITCH" value="1"/>
          <define name="SRVO_KILL" value="0"/>
          <define name="P_WT_HEADING" value="20"/>
        </section>
        <modules main_freq="512">
          <load name="gps_diagnostics.xml"/>
          <load name="delfly_utils.xml"/>
        </modules>
        <firmware name="rotorcraft">
          <target name="ap" board="lisa_s_1.0">
            <configure name="USE_BARO_BOARD" value="FALSE"/>
            <subsystem name="radio_control" type="superbitrf_rc">
              <define name="RADIO_TRANSMITTER_ID" value="331643127"/>
              <define name="RADIO_TRANSMITTER_PROTOCOL" value="0x01"/>
              <define name="RADIO_TRANSMITTER_CHAN" value="7"/>
              <define name="RADIO_MODE" value="RADIO_FLAP"/>
              <define name="RADIO_KILL_SWITCH" value="RADIO_GEAR"/>
              <define name="USE_PERSISTENT_SETTINGS" value="TRUE"/>
            </subsystem>
            <configure name="AHRS_PROPAGATE_FREQUENCY" value="500"/>
          </target>
          <target name="nps" board="pc">
            <subsystem name="fdm" type="jsbsim"/>
            <subsystem name="radio_control" type="ppm"/>
          </target>
          <subsystem name="gps" type="datalink_acm"/>
          <subsystem name="motor_mixing"/>
          <subsystem name="actuators" type="pwm">
            <define name="SERVO_HZ" value="400"/>
            <define name="USE_SERVOS_1AND2"/>
          </subsystem>
          <subsystem name="telemetry" type="superbitrf"/>
          <subsystem name="imu" type="lisa_s_v1.0"/>
          <subsystem name="stabilization" type="int_quat"/>
          <subsystem name="ahrs" type="int_cmpl_quat">
            <configure name="USE_MAGNETOMETER" value="0"/>
          </subsystem>
          <subsystem name="ins"/>
        </firmware>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="GPS_DIAGNOSTICS"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="HOVER_LOOP"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="tune_delfly">
            <message PERIOD=".125" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".125" NAME="STAB_ATTITUDE_INDI"/>
            <message PERIOD=".25" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD=".25" NAME="VERT_LOOP"/>
            <message PERIOD="0.25" NAME="HOVER_LOOP"/>
          </mode>
          <mode NAME="mute">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Att Loop">
            <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="400"/>
            <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="false" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="2000"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Rate Loop">
            <dl_setting VAR="stabilization_rate_gain.p" TYPE="int32" STEP="1" SHORTNAME="pgain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_P" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
            <dl_setting VAR="stabilization_rate_gain.q" TYPE="int32" STEP="1" SHORTNAME="pgain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_Q" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
            <dl_setting VAR="stabilization_rate_gain.r" TYPE="int32" STEP="1" SHORTNAME="pgain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_R" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
            <dl_setting VAR="stabilization_rate_igain.p" TYPE="int32" STEP="1" SHORTNAME="igain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_P" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_igain.q" TYPE="int32" STEP="1" SHORTNAME="igain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_Q" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_igain.r" TYPE="int32" STEP="1" SHORTNAME="igain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_R" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_ddgain.p" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_DDGAIN_P" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_ddgain.q" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_DDGAIN_Q" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_ddgain.r" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_DDGAIN_R" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="!sim|nps">
        <dl_settings>
          <dl_settings NAME="Superbit">
            <dl_setting VAR="settings_store_flag" VALUES="Store" STEP="1" SHORTNAME="store" MODULE="autopilot" MIN="1" MAX="1" HANDLER="StoreSettings"/>
            <dl_setting VAR="superbitrf.bind_mfg_id32" TYPE="uint32" STEP="1" SHORTNAME="mfg_id" PERSISTENT="true" MODULE="subsystems/datalink/superbitrf" MIN="0" MAX="4294967295" HANDLER="set_mfg_id"/>
            <dl_setting VAR="superbitrf.num_channels" TYPE="uint8" STEP="1" SHORTNAME="#chan" PERSISTENT="true" MODULE="subsystems/datalink/superbitrf" MIN="0" MAX="14"/>
            <dl_setting VAR="superbitrf.protocol" TYPE="uint8" STEP="1" SHORTNAME="prot" PERSISTENT="true" MODULE="subsystems/datalink/superbitrf" MIN="0" MAX="32" HANDLER="set_protocol"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="Delfly_Utils">
            <dl_setting VAR="LEDS_switch" STEP="1" SHORTNAME="LEDS" PARAM="DELFLY_UTILS_LEDS_SWITCH" MODULE="delfly_utils/delfly_utils" MIN="0" MAX="1"/>
            <dl_setting VAR="SRVO_kill" STEP="1" SHORTNAME="SRVO_kill" PARAM="DELFLY_UTILS_SRVO_KILL" MODULE="delfly_utils/delfly_utils" MIN="0" MAX="1"/>
            <dl_setting VAR="P_WT_heading" STEP="1" SHORTNAME="P_WT_heading" PARAM="DELFLY_UTILS_P_WT_HEADING" MODULE="delfly_utils/delfly_utils" MIN="0" MAX="1000"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="Persistence">
            <dl_setting VAR="settings_store_flag" VALUES="Stored" STEP="1" SHORTNAME="store" MODULE="autopilot" MIN="1" MAX="1" HANDLER="StoreSettings"/>
            <dl_setting VAR="settings_clear_flag" VALUES="Cleared" STEP="1" SHORTNAME="clear" MODULE="autopilot" MIN="1" MAX="1" HANDLER="ClearSettings"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="DelFly_Transformer" ac_id="123" airframe="airframes/TUDelft/airframes/delfly_transformer.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/basic-delft.xml" settings="settings/rotorcraft_basic.xml settings/control/stabilization_att_int.xml settings/control/rotorcraft_guidance.xml settings/control/stabilization_rate.xml settings/superbitrf.xml" settings_modules="modules/gps_ubx_ucenter.xml" gui_color="blue">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="ROLL" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="PITCH" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="950" MAX="2050" FUNCTION="YAW" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1223" MIN="1223" MAX="2050" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="UNUSED" CTL="G" AVERAGE="1"/>
        <channel NEUTRAL="1496" MIN="2050" MAX="948" FUNCTION="GAIN1" CTL="E" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="948" FUNCTION="MODE" CTL="PHAUX2" AVERAGE="1"/>
      </radio>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe name="delfly_transformer">
        <servos driver="Pwm">
          <servo name="MOTOR_LEFT" no="4" min="1100" neutral="1100" max="1900"/>
          <servo name="MOTOR_RIGHT" no="5" min="1100" neutral="1100" max="1900"/>
          <servo name="DIHEDRAL" no="0" min="1280" neutral="1500" max="1720"/>
          <servo name="WING_DEF" no="1" min="900" neutral="1500" max="2100"/>
        </servos>
        <commands>
          <axis name="THRUST" failsafe_value="0"/>
          <axis name="ROLL" failsafe_value="0"/>
          <axis name="PITCH" failsafe_value="0"/>
          <axis name="YAW" failsafe_value="0"/>
        </commands>
        <command_laws>
          <call fun="motor_mixing_run(autopilot_motors_on,FALSE,values)"/>
          <set servo="MOTOR_LEFT" value="@THRUST+0.1*@ROLL"/>
          <set servo="MOTOR_RIGHT" value="@THRUST-0.1*@ROLL"/>
          <set servo="DIHEDRAL" value="@PITCH"/>
          <set servo="WING_DEF" value="@YAW"/>
        </command_laws>
        <section name="MIXING" prefix="MOTOR_MIXING_">
          <define name="TRIM_ROLL" value="0"/>
          <define name="TRIM_PITCH" value="0"/>
          <define name="TRIM_YAW" value="0"/>
          <define name="NB_MOTOR" value="4"/>
          <define name="SCALE" value="256"/>
          <define name="ROLL_COEF" value="{  -256, -256,  256,  256 }"/>
          <define name="PITCH_COEF" value="{  256, -256, -256,  256 }"/>
          <define name="YAW_COEF" value="{    256, -256,  256, -256 }"/>
          <define name="THRUST_COEF" value="{ 256,  256,  256,  256 }"/>
        </section>
        <section name="IMU" prefix="IMU_">
          <define name="BODY_TO_IMU_PHI" value="0." unit="deg"/>
          <define name="BODY_TO_IMU_THETA" value="0." unit="deg"/>
          <define name="BODY_TO_IMU_PSI" value="0." unit="deg"/>
          <define name="ACCEL_X_NEUTRAL" value="0"/>
          <define name="ACCEL_Y_NEUTRAL" value="0"/>
          <define name="ACCEL_Z_NEUTRAL" value="0"/>
          <define name="MAG_X_NEUTRAL" value="10"/>
          <define name="MAG_Y_NEUTRAL" value="238"/>
          <define name="MAG_Z_NEUTRAL" value="-74"/>
          <define name="MAG_X_SENS" value="3.67001348283" integer="16"/>
          <define name="MAG_Y_SENS" value="3.98840260231" integer="16"/>
          <define name="MAG_Z_SENS" value="4.32568461736" integer="16"/>
          <define name="MAG_X_CURRENT_COEF" value="-0.0176704713698"/>
          <define name="MAG_Y_CURRENT_COEF" value="0.0174222594634"/>
          <define name="MAG_Z_CURRENT_COEF" value="0.0187570316492"/>
        </section>
        <section name="AUTOPILOT">
          <define name="MODE_STARTUP" value="AP_MODE_RC_DIRECT"/>
          <define name="MODE_MANUAL" value="AP_MODE_RC_DIRECT"/>
          <define name="MODE_AUTO1" value="AP_MODE_ATTITUDE_DIRECT"/>
          <define name="MODE_AUTO2" value="AP_MODE_NAV"/>
          <define name="USE_THROTTLE_FOR_MOTOR_ARMING" value="TRUE"/>
          <define name="NO_RC_THRUST_LIMIT" value="TRUE"/>
        </section>
        <section name="BAT">
          <define name="MILLIAMP_AT_FULL_THROTTLE" value="2000"/>
          <define name="CATASTROPHIC_BAT_LEVEL" value="2.8" unit="V"/>
          <define name="CRITIC_BAT_LEVEL" value="3.0" unit="V"/>
          <define name="LOW_BAT_LEVEL" value="3.2" unit="V"/>
          <define name="MAX_BAT_LEVEL" value="4.1" unit="V"/>
        </section>
        <section name="STABILIZATION_RATE" prefix="STABILIZATION_RATE_">
          <define name="SP_MAX_P" value="15000"/>
          <define name="SP_MAX_Q" value="15000"/>
          <define name="SP_MAX_R" value="15000"/>
          <define name="GAIN_P" value="400"/>
          <define name="GAIN_Q" value="400"/>
          <define name="GAIN_R" value="418"/>
          <define name="IGAIN_P" value="301"/>
          <define name="IGAIN_Q" value="302"/>
          <define name="IGAIN_R" value="303"/>
        </section>
        <section name="STABILIZATION_ATTITUDE" prefix="STABILIZATION_ATTITUDE_">
          <define name="SP_MAX_PHI" value="45." unit="deg"/>
          <define name="SP_MAX_THETA" value="45." unit="deg"/>
          <define name="SP_MAX_PSI" value="45." unit="deg"/>
          <define name="SP_MAX_R" value="90." unit="deg/s"/>
          <define name="SP_MAX_P" value="90." unit="deg/s"/>
          <define name="DEADBAND_R" value="250"/>
          <define name="DEADBAND_A" value="250"/>
          <define name="REF_OMEGA_P" value="800" unit="deg/s"/>
          <define name="REF_ZETA_P" value="0.85"/>
          <define name="REF_MAX_P" value="400." unit="deg/s"/>
          <define name="REF_MAX_PDOT" value="RadOfDeg(8000.)"/>
          <define name="REF_OMEGA_Q" value="800" unit="deg/s"/>
          <define name="REF_ZETA_Q" value="0.85"/>
          <define name="REF_MAX_Q" value="400." unit="deg/s"/>
          <define name="REF_MAX_QDOT" value="RadOfDeg(8000.)"/>
          <define name="REF_OMEGA_R" value="500" unit="deg/s"/>
          <define name="REF_ZETA_R" value="0.85"/>
          <define name="REF_MAX_R" value="90." unit="deg/s"/>
          <define name="REF_MAX_RDOT" value="RadOfDeg(900.)"/>
          <define name="PHI_PGAIN" value="400"/>
          <define name="PHI_DGAIN" value="200"/>
          <define name="PHI_IGAIN" value="100"/>
          <define name="THETA_PGAIN" value="400"/>
          <define name="THETA_DGAIN" value="200"/>
          <define name="THETA_IGAIN" value="100"/>
          <define name="PSI_PGAIN" value="500"/>
          <define name="PSI_DGAIN" value="300"/>
          <define name="PSI_IGAIN" value="10"/>
          <define name="PHI_DDGAIN" value="0"/>
          <define name="THETA_DDGAIN" value="0"/>
          <define name="PSI_DDGAIN" value=" 300"/>
          <define name="PHI_AGAIN" value="0"/>
          <define name="THETA_AGAIN" value="0"/>
          <define name="PSI_AGAIN" value="0"/>
        </section>
        <section name="INS" prefix="INS_"/>
        <section name="GUIDANCE_V" prefix="GUIDANCE_V_">
          <define name="HOVER_KP" value="276"/>
          <define name="HOVER_KD" value="455"/>
          <define name="HOVER_KI" value="100"/>
          <define name="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" value="0.5"/>
          <define name="ADAPT_THROTTLE_ENABLED" value="TRUE"/>
        </section>
        <section name="AHRS" prefix="AHRS_">
          <define name="H_X" value="0.39049610"/>
          <define name="H_Y" value="0.00278894"/>
          <define name="H_Z" value="0.92060036"/>
        </section>
        <section name="GUIDANCE_H" prefix="GUIDANCE_H_">
          <define name="PGAIN" value="90"/>
          <define name="DGAIN" value="50"/>
          <define name="IGAIN" value="24"/>
        </section>
        <section name="SIMULATOR" prefix="NPS_">
          <define name="ACTUATOR_NAMES" value="{&quot;ne_motor&quot;, &quot;se_motor&quot;, &quot;sw_motor&quot;, &quot;nw_motor&quot;}"/>
          <define name="JSBSIM_MODEL" value="&quot;simple_x_quad_ccw&quot;"/>
          <define name="SENSORS_PARAMS" value="&quot;nps_sensors_params_default.h&quot;"/>
        </section>
        <modules main_freq="512">
          <load name="gps_ubx_ucenter.xml"/>
        </modules>
        <firmware name="rotorcraft">
          <target name="ap" board="lisa_s_1.0">
            <subsystem name="radio_control" type="superbitrf_rc">
              <define name="RADIO_TRANSMITTER_ID" value="331643127"/>
              <define name="RADIO_TRANSMITTER_PROTOCOL" value="0x01"/>
              <define name="RADIO_TRANSMITTER_CHAN" value="7"/>
              <define name="RADIO_MODE" value="RADIO_FLAP"/>
              <define name="RADIO_KILL_SWITCH" value="RADIO_GEAR"/>
            </subsystem>
            <configure name="AHRS_PROPAGATE_FREQUENCY" value="500"/>
            <define name="USE_PERSISTENT_SETTINGS" value="TRUE"/>
          </target>
          <target name="nps" board="pc">
            <subsystem name="fdm" type="jsbsim"/>
            <subsystem name="radio_control" type="ppm"/>
          </target>
          <subsystem name="motor_mixing"/>
          <subsystem name="actuators" type="pwm">
            <define name="SERVO_HZ" value="50"/>
            <define name="USE_SERVOS_1AND2"/>
          </subsystem>
          <subsystem name="telemetry" type="transparent">
            <configure name="MODEM_BAUD" value="B57600"/>
            <configure name="MODEM_PORT" value="UART1"/>
          </subsystem>
          <subsystem name="imu" type="lisa_s_v1.0"/>
          <subsystem name="gps" type="ublox"/>
          <subsystem name="stabilization" type="int_quat"/>
          <subsystem name="ahrs" type="int_cmpl_quat">
            <configure name="USE_MAGNETOMETER" value="1"/>
            <define name="AHRS_USE_GPS_HEADING" value="0"/>
          </subsystem>
          <subsystem name="ins"/>
        </firmware>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Att Loop">
            <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="400"/>
            <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="false" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="2000"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Rate Loop">
            <dl_setting VAR="stabilization_rate_gain.p" TYPE="int32" STEP="1" SHORTNAME="pgain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_P" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
            <dl_setting VAR="stabilization_rate_gain.q" TYPE="int32" STEP="1" SHORTNAME="pgain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_Q" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
            <dl_setting VAR="stabilization_rate_gain.r" TYPE="int32" STEP="1" SHORTNAME="pgain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_GAIN_R" MODULE="stabilization/stabilization_rate" MIN="1" MAX="1000"/>
            <dl_setting VAR="stabilization_rate_igain.p" TYPE="int32" STEP="1" SHORTNAME="igain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_P" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_igain.q" TYPE="int32" STEP="1" SHORTNAME="igain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_Q" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_igain.r" TYPE="int32" STEP="1" SHORTNAME="igain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_IGAIN_R" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_ddgain.p" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_RATE_DDGAIN_P" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_ddgain.q" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_RATE_DDGAIN_Q" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
            <dl_setting VAR="stabilization_rate_ddgain.r" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_RATE_DDGAIN_R" MODULE="stabilization/stabilization_rate" MIN="0" MAX="500"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="!sim|nps">
        <dl_settings>
          <dl_settings NAME="Superbit">
            <dl_setting VAR="settings_store_flag" VALUES="Store" STEP="1" SHORTNAME="store" MODULE="autopilot" MIN="1" MAX="1" HANDLER="StoreSettings"/>
            <dl_setting VAR="superbitrf.bind_mfg_id32" TYPE="uint32" STEP="1" SHORTNAME="mfg_id" PERSISTENT="true" MODULE="subsystems/datalink/superbitrf" MIN="0" MAX="4294967295" HANDLER="set_mfg_id"/>
            <dl_setting VAR="superbitrf.num_channels" TYPE="uint8" STEP="1" SHORTNAME="#chan" PERSISTENT="true" MODULE="subsystems/datalink/superbitrf" MIN="0" MAX="14"/>
            <dl_setting VAR="superbitrf.protocol" TYPE="uint8" STEP="1" SHORTNAME="prot" PERSISTENT="true" MODULE="subsystems/datalink/superbitrf" MIN="0" MAX="32" HANDLER="set_protocol"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="MAVTec3_Chris" ac_id="33" airframe="airframes/CDW/mavtec_cdw.xml" radio="radios/R6107SP_7ch.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/Tudelft/rotorcraft_survey_competition.xml" settings="settings/rotorcraft_basic.xml settings/control/stabilization_att_int.xml settings/modules/config_asctec_v2.xml settings/control/rotorcraft_guidance.xml" settings_modules="modules/servo_switch.xml modules/gps_ubx_ucenter.xml [modules/nav_survey_rectangle_rotorcraft.xml] [modules/nav_survey_poly_rotorcraft.xml] [modules/geo_mag.xml]" gui_color="blue">
      <radio SYNC_MIN="4000" SYNC_MAX="15000" PULSE_TYPE="NEGATIVE" NAME="FASST TX Module" DATA_MIN="700" DATA_MAX="2300">
        <channel NEUTRAL="1500" MIN="1900" MAX="1100" FUNCTION="ROLL" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="PITCH" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1100" MIN="1100" MAX="1900" FUNCTION="THROTTLE" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="YAW" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="MODE" CTL="E" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="EXTRA1" CTL="F" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="FLAPS" CTL="G" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="IMAV2015_competition_outdoor" max_dist_from_home="500" lon0="6.04692" lat0="50.788595" ground_alt="260" alt="290">
          <exceptions>
            <exception cond="(electrical.bat_low&&(exception_flag[0]==0))" deroute="Mission.ComeBackAndLand" exec="set_exception_flag(0)"/>
            <exception cond="(electrical.bat_critical&&(exception_flag[1]==0))" deroute="Mission.land_here" exec="set_exception_flag(1)"/>
            <exception cond="((((!(InsideRED(GetPosX(),GetPosY()))&&!((nav_block==IndexOfBlock('Mission.flare'))))&&!((nav_block==IndexOfBlock('Mission.landed'))))&&!((nav_block==IndexOfBlock('Mission.WaitGPS'))))&&!((nav_block==IndexOfBlock('Mission.GeoInit'))))" deroute="Mission.land_emergency"/>
          </exceptions>
          <header>#include &quot;autopilot.h&quot;
#include &quot;subsystems/electrical.h&quot;
#ifdef dc_Survey
#define LINE_START_FUNCTION dc_Survey(dc_distance_interval);
#define LINE_STOP_FUNCTION {dc_autoshoot = DC_AUTOSHOOT_STOP;}
#endif
#ifndef DropOpen
#define DropOpen() FALSE
#endif
#ifndef StartVision
#define StartVision() FALSE
#endif
#ifndef StartVisionLand
#define StartVisionLand() FALSE
#endif
#ifndef StopVision
#define StopVision() FALSE
#endif
#define WpAlt(X) (30)</header>
          <waypoints>
            <waypoint name="_PLATE1" lon="6.04674224830944" lat="50.7888090239206" x="0.00" y="0.00"/>
            <waypoint name="_PLATE2" lon="6.04647268082583" lat="50.7890460391004" x="0.00" y="0.00"/>
            <waypoint name="_PLATE3" lon="6.04631880264475" lat="50.7888723417903" x="0.00" y="0.00"/>
            <waypoint y=".0" x="0.0" name="HOME"/>
            <waypoint y="15.4" x="-7.6" name="CLIMB"/>
            <waypoint y="24.0" x="-3.7" name="STDBY"/>
            <waypoint name="raceA" lon="6.047899" lat="50.790483" x="0.00" y="0.00"/>
            <waypoint name="raceB" lon="6.050200" lat="50.791800" x="0.00" y="0.00"/>
            <waypoint name="WG" lon="6.047431" lat="50.789794" x="0.00" y="0.00"/>
            <waypoint name="WD" lon="6.04677769236132" lat="50.7889307058111" height="30" x="0.00" y="0.00"/>
            <waypoint name="DROP" lon="6.04652336854142" lat="50.788775526101" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ1" lon="6.04652336854142" lat="50.788775526101" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ2" lon="6.04640018582595" lat="50.7889170568219" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ3" lon="6.04642327267965" lat="50.7889755961272" height="15" x="0.00" y="0.00"/>
            <waypoint name="FC" lon="6.047118" lat="50.789522" height="20" x="0.00" y="0.00"/>
            <waypoint y="95.0" x="27.5" name="CAM" height="20"/>
            <waypoint name="S1" lon="6.046721" lat="50.788597" x="0.00" y="0.00"/>
            <waypoint name="S2" lon="6.045944" lat="50.788973" x="0.00" y="0.00"/>
            <waypoint name="S3" lon="6.046330" lat="50.789323" x="0.00" y="0.00"/>
            <waypoint name="S4" lon="6.047113" lat="50.788917" x="0.00" y="0.00"/>
            <waypoint name="p1" lon="6.047864" lat="50.790483" x="0.00" y="0.00"/>
            <waypoint name="p2" lon="6.047897" lat="50.790463" x="0.00" y="0.00"/>
            <waypoint name="p3" lon="6.050232" lat="50.791799" x="0.00" y="0.00"/>
            <waypoint name="p4" lon="6.050201" lat="50.791818" x="0.00" y="0.00"/>
            <waypoint y="-55.4" x="19.2" name="CRUISE" height="25"/>
            <waypoint name="TD" lon="6.04695109268497" lat="50.7887171157922" height="15" x="0.00" y="0.00"/>
            <waypoint y="0" x="0" name="ETD" height="15"/>
            <waypoint name="_green1A" lon="6.046879" lat="50.790144" x="0.00" y="0.00"/>
            <waypoint name="_green1B" lon="6.047844" lat="50.789748" x="0.00" y="0.00"/>
            <waypoint name="_green1C" lon="6.047072" lat="50.789058" x="0.00" y="0.00"/>
            <waypoint name="_green1D" lon="6.047391" lat="50.788919" x="0.00" y="0.00"/>
            <waypoint name="_green1E" lon="6.046880" lat="50.788477" x="0.00" y="0.00"/>
            <waypoint name="_green1F" lon="6.045554" lat="50.789113" x="0.00" y="0.00"/>
            <waypoint name="_green2A" lon="6.050405" lat="50.792252" x="0.00" y="0.00"/>
            <waypoint name="_green2B" lon="6.050962" lat="50.791915" x="0.00" y="0.00"/>
            <waypoint name="_green2C" lon="6.047761" lat="50.790077" x="0.00" y="0.00"/>
            <waypoint name="_green2D" lon="6.047251" lat="50.790426" x="0.00" y="0.00"/>
            <waypoint name="_red1" lon="6.050093" lat="50.792552" x="0.00" y="0.00"/>
            <waypoint name="_red2" lon="6.051268" lat="50.791882" x="0.00" y="0.00"/>
            <waypoint name="_red3" lon="6.047834" lat="50.789988" x="0.00" y="0.00"/>
            <waypoint name="_red4" lon="6.048204" lat="50.789781" x="0.00" y="0.00"/>
            <waypoint name="_red5" lon="6.047626" lat="50.788865" x="0.00" y="0.00"/>
            <waypoint name="_red6" lon="6.046744" lat="50.788209" x="0.00" y="0.00"/>
            <waypoint name="_red7" lon="6.045032" lat="50.789046" x="0.00" y="0.00"/>
            <waypoint name="_red8" lon="6.046338" lat="50.790416" x="0.00" y="0.00"/>
            <waypoint name="_vision1" lon="6.047338" lat="50.789622" x="0.00" y="0.00"/>
            <waypoint name="_vision2" lon="6.047115" lat="50.789352" x="0.00" y="0.00"/>
            <waypoint name="_vision3" lon="6.046932" lat="50.789443" x="0.00" y="0.00"/>
            <waypoint name="_vision4" lon="6.047205" lat="50.789662" x="0.00" y="0.00"/>
            <waypoint name="_land1" lon="6.046939" lat="50.788606" x="0.00" y="0.00"/>
            <waypoint name="_land2" lon="6.046810" lat="50.788686" x="0.00" y="0.00"/>
            <waypoint name="_land3" lon="6.046949" lat="50.788813" x="0.00" y="0.00"/>
            <waypoint name="_land4" lon="6.047124" lat="50.788737" x="0.00" y="0.00"/>
          </waypoints>
          <sectors>
            <sector name="RED" color="red">
              <corner name="_red1"/>
              <corner name="_red2"/>
              <corner name="_red3"/>
              <corner name="_red4"/>
              <corner name="_red5"/>
              <corner name="_red6"/>
              <corner name="_red7"/>
              <corner name="_red8"/>
            </sector>
            <sector name="GREEN1" color="green">
              <corner name="_green1A"/>
              <corner name="_green1B"/>
              <corner name="_green1C"/>
              <corner name="_green1D"/>
              <corner name="_green1E"/>
              <corner name="_green1F"/>
            </sector>
            <sector name="GREEN2" color="green">
              <corner name="_green2A"/>
              <corner name="_green2B"/>
              <corner name="_green2C"/>
              <corner name="_green2D"/>
            </sector>
            <sector name="TENNIS" color="green">
              <corner name="_vision1"/>
              <corner name="_vision2"/>
              <corner name="_vision3"/>
              <corner name="_vision4"/>
            </sector>
            <sector name="LAND" color="green">
              <corner name="_land1"/>
              <corner name="_land2"/>
              <corner name="_land3"/>
              <corner name="_land4"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Dummy" no="0"/>
            <block name="Mission.WaitGPS" no="1">
              <call fun="NavKillThrottle()" no="0"/>
              <while cond="!(GpsFixValid())" no="1"/>
            </block>
            <block name="Mission.GeoInit" no="2">
              <while cond="LessThan(NavBlockTime(),10)" no="0"/>
              <call fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Mission.holding_point" no="3">
              <call fun="NavKillThrottle()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Start Engine" strip_icon="resurrect.png" group="engine" name="Mission.Start Engine" no="4">
              <call fun="NavResurrect()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Takeoff-Standby" strip_icon="takeoff.png" group="takeoff" name="Mission.Takeoff-Standby" no="5">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.Standby"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Map" strip_icon="survey.png" group="takeoff" name="Mission.Takeoff-Map" no="6">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.SurveyPoly"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Drop" strip_icon="parachute.png" group="takeoff" name="Mission.Takeoff-Drop" no="7">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.drop"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Water" group="takeoff" name="Mission.Takeoff-Water" no="8">
              <exception cond="((stateGetPositionEnu_f())->z>27.000000)" deroute="Mission.drop_water"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Standby" strip_icon="home.png" group="hover" name="Mission.Standby" no="9">
              <stay wp="STDBY" no="0"/>
            </block>
            <block strip_button="LookRobot-FC" strip_icon="lookdown.png" group="hover" name="Mission.GoTennis" no="10">
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
              <go wp="CRUISE" no="1"/>
            </block>
            <block name="Mission.LookRobot" no="11">
              <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
            </block>
            <block name="Mission.Vision" no="12">
              <exception cond="!(InsideTENNIS(GetPosX(),GetPosY()))" deroute="Mission.NoVision"/>
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndVisualLand"/>
              <call fun="StartVision()" no="0"/>
              <stay wp="CAM" no="1"/>
            </block>
            <block name="Mission.NoVision" no="13">
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndLand"/>
              <call fun="StartVision()" no="0"/>
              <stay wp="FC" no="1"/>
            </block>
            <block strip_button="ComeBackAndLand" strip_icon="land-right.png" group="hover" name="Mission.ComeBackAndLand" no="14">
              <call fun="StopVision()" no="0"/>
              <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <go wp="CRUISE" no="4"/>
              <deroute block="Mission.land" no="5"/>
            </block>
            <block name="Mission.ComeBackAndVisualLand" no="15">
              <call fun="StopVision()" no="0"/>
              <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
              <go wp="CRUISE" no="5"/>
              <deroute block="Mission.visual_flare" no="6"/>
            </block>
            <block strip_button="Follow-Vision-Geolocation-Results" strip_icon="lookdown.png" group="hover" name="Mission.CAM" no="16">
              <stay wp="CAM" no="0"/>
            </block>
            <block name="Mission.stay_p1" no="17">
              <stay wp="p1" no="0"/>
            </block>
            <block name="Mission.go_p2" no="18">
              <go wp="p2" no="0"/>
              <deroute block="Mission.stay_p1" no="1"/>
            </block>
            <block name="Mission.line_p1_p2" no="19">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <stay until="(stage_time>10)" wp="p2" no="1"/>
              <go from="p2" hmode="route" wp="p1" no="2"/>
              <deroute block="Mission.stay_p1" no="3"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="Mission.circle CV" no="20">
              <circle radius="nav_radius" wp="CAM" no="0"/>
            </block>
            <block group="drop" name="Mission.drop" no="21">
              <go wp="DROP" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone1" no="22">
              <go wp="RZ1" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone2" no="23">
              <go wp="RZ2" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone3" no="24">
              <go wp="RZ3" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_water" no="25">
              <go wp="WD" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block strip_button="Oval p1-p2-p3-p4" strip_icon="oval.png" group="race" name="Mission.race" no="26">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <go from="p2" hmode="route" wp="p3" no="1"/>
              <go from="p3" hmode="route" wp="p4" no="2"/>
              <go from="p4" hmode="route" wp="p1" no="3"/>
              <deroute block="Mission.race" no="4"/>
            </block>
            <block strip_button="Line raceA-raceB" strip_icon="line.png" group="race" name="Mission.raceline" no="27">
              <go from="raceA" hmode="route" wp="raceB" no="0"/>
              <go from="raceB" hmode="route" wp="raceA" no="1"/>
              <deroute block="Mission.raceline" no="2"/>
            </block>
            <block group="survey" strip_button="Survey-Polygon-S1-S2-S3-S4" strip_icon="googleearth.png" name="Mission.SurveyPoly" no="28">
              <call fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
              <deroute block="Mission.Survey Poly RUN" no="1"/>
            </block>
            <block name="Mission.Survey Poly RUN" no="29">
              <exception cond="(PolySurveySweepNum>=5)" deroute="Mission.GoTennis"/>
              <call fun="nav_survey_poly_run()" no="0"/>
            </block>
            <block strip_button="Land Here" strip_icon="downdown.png" group="landing" name="Mission.land_here" no="30">
              <call fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
              <call fun="NavSetWaypointHere(WP_TD)" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="Land at TD" strip_icon="land-right.png" group="landing" name="Mission.land" no="31">
              <go wp="TD" no="0"/>
              <call fun="StartVisionLand()" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="VisualLanding-CAM" strip_icon="cam_lock.png" group="landing" name="Mission.visual_flare" no="32">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <exception cond="!(InsideLAND(GetPosX(),GetPosY()))" deroute="Mission.land"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.flare" no="33">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block strip_button="Kill" strip_icon="kill.png" group="landing" name="Mission.landed" no="34">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="Mission.land_emergency" no="35">
              <call fun="NavSetWaypointHere(WP_ETD)" no="0"/>
              <deroute block="Mission.flare_emergency" no="1"/>
            </block>
            <block name="Mission.flare_emergency" no="36">
              <exception cond="NavDetectGround()" deroute="Mission.landed_emergency"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed_emergency"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.landed_emergency" no="37">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="HOME" no="38">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="38" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="37" block_name="Mission.landed_emergency" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="1">
            <deroute block="Mission.flare_emergency" no="1"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="0">
            <call fun="NavSetWaypointHere(WP_ETD)" no="0"/>
          </stage>
          <stage block="34" block_name="Mission.landed" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="1">
            <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="1">
            <call fun="StartVisionLand()" no="1"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="1">
            <call fun="NavSetWaypointHere(WP_TD)" no="1"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="0">
            <call fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
          </stage>
          <stage block="29" block_name="Mission.Survey Poly RUN" stage="0">
            <call fun="nav_survey_poly_run()" no="0"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="1">
            <deroute block="Mission.Survey Poly RUN" no="1"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="0">
            <call fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="2">
            <deroute block="Mission.raceline" no="2"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="1">
            <go from="raceB" hmode="route" wp="raceA" no="1"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="0">
            <go from="raceA" hmode="route" wp="raceB" no="0"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="4">
            <deroute block="Mission.race" no="4"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="3">
            <go from="p4" hmode="route" wp="p1" no="3"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="2">
            <go from="p3" hmode="route" wp="p4" no="2"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="1">
            <go from="p2" hmode="route" wp="p3" no="1"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="0">
            <go wp="WD" no="0"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="0">
            <go wp="RZ3" no="0"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="0">
            <go wp="RZ2" no="0"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="0">
            <go wp="RZ1" no="0"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="0">
            <go wp="DROP" no="0"/>
          </stage>
          <stage block="20" block_name="Mission.circle CV" stage="0">
            <circle radius="nav_radius" wp="CAM" no="0"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="3">
            <deroute block="Mission.stay_p1" no="3"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="2">
            <go from="p2" hmode="route" wp="p1" no="2"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="1">
            <stay until="(stage_time>10)" wp="p2" no="1"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="1">
            <deroute block="Mission.stay_p1" no="1"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="17" block_name="Mission.stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="16" block_name="Mission.CAM" stage="0">
            <stay wp="CAM" no="0"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="6">
            <deroute block="Mission.visual_flare" no="6"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="5">
            <go wp="CRUISE" no="5"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="4">
            <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="3">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="1">
            <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="0">
            <call fun="StopVision()" no="0"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="5">
            <deroute block="Mission.land" no="5"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="4">
            <go wp="CRUISE" no="4"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="3">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="1">
            <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="0">
            <call fun="StopVision()" no="0"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="1">
            <stay wp="FC" no="1"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="0">
            <call fun="StartVision()" no="0"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="1">
            <stay wp="CAM" no="1"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="0">
            <call fun="StartVision()" no="0"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="1">
            <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="0">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="1">
            <go wp="CRUISE" no="1"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="0">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
          </stage>
          <stage block="9" block_name="Mission.Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="0">
            <call fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="2">
            <call fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="0">
            <while cond="LessThan(NavBlockTime(),10)" no="0"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="1">
            <while cond="!(GpsFixValid())" no="1"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="Servo switch control">
            <dl_settings NAME="SWITCH">
              <dl_setting VAR="servo_switch_on" VALUES="Off|On" STEP="1" MODULE="servo_switch/servo_switch" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="ON" GROUP="servo_switch"/>
                <strip_button VALUE="0" NAME="OFF" GROUP="servo_switch"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="asctec_cdw">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="lisa_mx_2.1">
            <subsystem TYPE="ppm" NAME="radio_control"/>
            <define VALUE="RADIO_EXTRA1" NAME="RADIO_KILL_SWITCH"/>
            <define VALUE="1" NAME="USE_KILL_SWITCH_FOR_MOTOR_ARMING"/>
            <define NAME="USE_I2C_ACTUATORS_REBOOT_HACK"/>
          </target>
          <target NAME="nps" BOARD="pc">
            <subsystem TYPE="jsbsim" NAME="fdm"/>
            <subsystem TYPE="ppm" NAME="radio_control"/>
          </target>
          <subsystem NAME="motor_mixing"/>
          <subsystem TYPE="asctec_v2" NAME="actuators"/>
          <subsystem TYPE="pwm" NAME="actuators"/>
          <subsystem TYPE="xbee_api" NAME="telemetry"/>
          <subsystem TYPE="lisa_mx_v2.1" NAME="imu"/>
          <subsystem TYPE="ublox" NAME="gps"/>
          <subsystem TYPE="int_quat" NAME="stabilization"/>
          <subsystem TYPE="float_mlkf" NAME="ahrs"/>
          <subsystem TYPE="hff" NAME="ins"/>
        </firmware>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <modules MAIN_FREQ="512">
          <load NAME="servo_switch.xml"/>
          <load NAME="send_imu_mag_current.xml"/>
          <load NAME="gps_ubx_ucenter.xml"/>
          <load NAME="nav_survey_rectangle_rotorcraft.xml"/>
          <load NAME="nav_survey_poly_rotorcraft.xml"/>
          <load NAME="geo_mag.xml"/>
        </modules>
        <servos DRIVER="Asctec_v2">
          <servo NO="0" NEUTRAL="3" NAME="FRONT" MIN="0" MAX="200"/>
          <servo NO="1" NEUTRAL="3" NAME="BACK" MIN="0" MAX="200"/>
          <servo NO="2" NEUTRAL="3" NAME="LEFT" MIN="0" MAX="200"/>
          <servo NO="3" NEUTRAL="3" NAME="RIGHT" MIN="0" MAX="200"/>
        </servos>
        <servos DRIVER="Pwm">
          <servo NO="4" NEUTRAL="1500" NAME="DROP" MIN="1100" MAX="2100"/>
        </servos>
        <section NAME="SERVO_SWITCH">
          <define VALUE="DROP" NAME="SERVO_SWITCH_SERVO"/>
          <define VALUE="SERVO_DROP_MIN" NAME="SERVO_SWITCH_ON_VALUE"/>
          <define VALUE="SERVO_DROP_MAX" NAME="SERVO_SWITCH_OFF_VALUE"/>
          <define VALUE="ServoSwitchOn()" NAME="DropOpen()"/>
          <define VALUE="ServoSwitchOff()" NAME="DropClose()"/>
        </section>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
        </commands>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="4" NAME="NB_MOTOR"/>
          <define VALUE="256" NAME="SCALE"/>
          <define VALUE="{  256, -256, -256,  256 }" NAME="ROLL_COEF"/>
          <define VALUE="{  256,  256, -256, -256 }" NAME="PITCH_COEF"/>
          <define VALUE="{  256, -256,  256, -256 }" NAME="YAW_COEF"/>
          <define VALUE="{  256,  256,  256,  256 }" NAME="THRUST_COEF"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_motors_on,FALSE,values)"/>
          <set VALUE="motor_mixing.commands[0]" SERVO="FRONT"/>
          <set VALUE="motor_mixing.commands[1]" SERVO="BACK"/>
          <set VALUE="motor_mixing.commands[2]" SERVO="LEFT"/>
          <set VALUE="motor_mixing.commands[3]" SERVO="RIGHT"/>
        </command_laws>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="0" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="0" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="140" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="146" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="80" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="3.68116427889" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="3.74966778358" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="4.05311539389" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.00322676138551" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.00266367218758" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="-0.0004557295634" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="270." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="INS_" NAME="INS"/>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="10000" NAME="SP_MAX_P"/>
          <define VALUE="10000" NAME="SP_MAX_Q"/>
          <define VALUE="10000" NAME="SP_MAX_R"/>
          <define VALUE="400" NAME="GAIN_P"/>
          <define VALUE="400" NAME="GAIN_Q"/>
          <define VALUE="350" NAME="GAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="65." UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="65." UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="250." UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.85" NAME="REF_ZETA_P"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.85" NAME="REF_ZETA_Q"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="500" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.85" NAME="REF_ZETA_R"/>
          <define VALUE="180." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(1800.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="600" NAME="PHI_PGAIN"/>
          <define VALUE="150" NAME="PHI_DGAIN"/>
          <define VALUE="20" NAME="PHI_IGAIN"/>
          <define VALUE="600" NAME="THETA_PGAIN"/>
          <define VALUE="150" NAME="THETA_DGAIN"/>
          <define VALUE="20" NAME="THETA_IGAIN"/>
          <define VALUE="600" NAME="PSI_PGAIN"/>
          <define VALUE="100" NAME="PSI_DGAIN"/>
          <define VALUE="10" NAME="PSI_IGAIN"/>
          <define VALUE="150" NAME="PHI_DDGAIN"/>
          <define VALUE="150" NAME="THETA_DDGAIN"/>
          <define VALUE="200" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="500" NAME="HOVER_KP"/>
          <define VALUE="200" NAME="HOVER_KD"/>
          <define VALUE="100" NAME="HOVER_KI"/>
          <define VALUE="0.4" NAME="NOMINAL_HOVER_THROTTLE"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="100" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="0" NAME="IGAIN"/>
        </section>
        <section PREFIX="AHRS_H_" NAME="MAGNETICS">
          <define VALUE="0.4" NAME="X"/>
          <define VALUE="0" NAME="Y"/>
          <define VALUE="0.9" NAME="Z"/>
        </section>
        <section NAME="BAT">
          <define VALUE="20000" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="{&quot;ne_motor&quot;, &quot;se_motor&quot;, &quot;sw_motor&quot;, &quot;nw_motor&quot;}" NAME="ACTUATOR_NAMES"/>
          <define VALUE="&quot;simple_x_quad&quot;" NAME="JSBSIM_MODEL"/>
          <define VALUE="&quot;nps_sensors_params_default.h&quot;" NAME="SENSORS_PARAMS"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Att Loop">
            <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="400"/>
            <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="asctec_v2">
            <dl_setting var="actuators_asctec_v2.cmd" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2" shortname="cmd" values="NONE|TEST|REVERSE|SET_ADDR" handler="SetCommand"/>
            <dl_setting var="actuators_asctec_v2.cur_addr" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2" shortname="cur_addr" values="FRONT|BACK|LEFT|RIGHT" handler="SetCurAddr"/>
            <dl_setting var="actuators_asctec_v2.new_addr" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2" shortname="new_addr" values="FRONT|BACK|LEFT|RIGHT" handler="SetNewAddr"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="false" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="2000"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="MAVTec4_Bart" ac_id="34" airframe="airframes/TUDelft/airframes/mavtec4.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/Tudelft/rotorcraft_survey_competition.xml" settings="settings/rotorcraft_basic.xml settings/control/stabilization_att_int.xml settings/modules/config_asctec_v2.xml settings/control/rotorcraft_guidance.xml" settings_modules="[modules/geo_mag.xml] [modules/air_data.xml] modules/servo_switch.xml [modules/nav_survey_rectangle_rotorcraft.xml] [modules/nav_survey_poly_rotorcraft.xml] modules/drop_zone.xml" gui_color="blue">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="IMAV2015_competition_outdoor" max_dist_from_home="500" lon0="6.04692" lat0="50.788595" ground_alt="260" alt="290">
          <exceptions>
            <exception cond="(electrical.bat_low&&(exception_flag[0]==0))" deroute="Mission.ComeBackAndLand" exec="set_exception_flag(0)"/>
            <exception cond="(electrical.bat_critical&&(exception_flag[1]==0))" deroute="Mission.land_here" exec="set_exception_flag(1)"/>
            <exception cond="((((!(InsideRED(GetPosX(),GetPosY()))&&!((nav_block==IndexOfBlock('Mission.flare'))))&&!((nav_block==IndexOfBlock('Mission.landed'))))&&!((nav_block==IndexOfBlock('Mission.WaitGPS'))))&&!((nav_block==IndexOfBlock('Mission.GeoInit'))))" deroute="Mission.land_emergency"/>
          </exceptions>
          <header>#include &quot;autopilot.h&quot;
#include &quot;subsystems/electrical.h&quot;
#ifdef dc_Survey
#define LINE_START_FUNCTION dc_Survey(dc_distance_interval);
#define LINE_STOP_FUNCTION {dc_autoshoot = DC_AUTOSHOOT_STOP;}
#endif
#ifndef DropOpen
#define DropOpen() FALSE
#endif
#ifndef StartVision
#define StartVision() FALSE
#endif
#ifndef StartVisionLand
#define StartVisionLand() FALSE
#endif
#ifndef StopVision
#define StopVision() FALSE
#endif
#define WpAlt(X) (30)</header>
          <waypoints>
            <waypoint name="_PLATE1" lon="6.04674224830944" lat="50.7888090239206" x="0.00" y="0.00"/>
            <waypoint name="_PLATE2" lon="6.04647268082583" lat="50.7890460391004" x="0.00" y="0.00"/>
            <waypoint name="_PLATE3" lon="6.04631880264475" lat="50.7888723417903" x="0.00" y="0.00"/>
            <waypoint y=".0" x="0.0" name="HOME"/>
            <waypoint y="15.4" x="-7.6" name="CLIMB"/>
            <waypoint y="24.0" x="-3.7" name="STDBY"/>
            <waypoint name="raceA" lon="6.047899" lat="50.790483" x="0.00" y="0.00"/>
            <waypoint name="raceB" lon="6.050200" lat="50.791800" x="0.00" y="0.00"/>
            <waypoint name="WG" lon="6.047431" lat="50.789794" x="0.00" y="0.00"/>
            <waypoint name="WD" lon="6.04677769236132" lat="50.7889307058111" height="30" x="0.00" y="0.00"/>
            <waypoint name="DROP" lon="6.04652336854142" lat="50.788775526101" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ1" lon="6.04652336854142" lat="50.788775526101" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ2" lon="6.04640018582595" lat="50.7889170568219" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ3" lon="6.04642327267965" lat="50.7889755961272" height="15" x="0.00" y="0.00"/>
            <waypoint name="FC" lon="6.047118" lat="50.789522" height="20" x="0.00" y="0.00"/>
            <waypoint y="95.0" x="27.5" name="CAM" height="20"/>
            <waypoint name="S1" lon="6.046721" lat="50.788597" x="0.00" y="0.00"/>
            <waypoint name="S2" lon="6.045944" lat="50.788973" x="0.00" y="0.00"/>
            <waypoint name="S3" lon="6.046330" lat="50.789323" x="0.00" y="0.00"/>
            <waypoint name="S4" lon="6.047113" lat="50.788917" x="0.00" y="0.00"/>
            <waypoint name="p1" lon="6.047864" lat="50.790483" x="0.00" y="0.00"/>
            <waypoint name="p2" lon="6.047897" lat="50.790463" x="0.00" y="0.00"/>
            <waypoint name="p3" lon="6.050232" lat="50.791799" x="0.00" y="0.00"/>
            <waypoint name="p4" lon="6.050201" lat="50.791818" x="0.00" y="0.00"/>
            <waypoint y="-55.4" x="19.2" name="CRUISE" height="25"/>
            <waypoint name="TD" lon="6.04695109268497" lat="50.7887171157922" height="15" x="0.00" y="0.00"/>
            <waypoint y="0" x="0" name="ETD" height="15"/>
            <waypoint name="_green1A" lon="6.046879" lat="50.790144" x="0.00" y="0.00"/>
            <waypoint name="_green1B" lon="6.047844" lat="50.789748" x="0.00" y="0.00"/>
            <waypoint name="_green1C" lon="6.047072" lat="50.789058" x="0.00" y="0.00"/>
            <waypoint name="_green1D" lon="6.047391" lat="50.788919" x="0.00" y="0.00"/>
            <waypoint name="_green1E" lon="6.046880" lat="50.788477" x="0.00" y="0.00"/>
            <waypoint name="_green1F" lon="6.045554" lat="50.789113" x="0.00" y="0.00"/>
            <waypoint name="_green2A" lon="6.050405" lat="50.792252" x="0.00" y="0.00"/>
            <waypoint name="_green2B" lon="6.050962" lat="50.791915" x="0.00" y="0.00"/>
            <waypoint name="_green2C" lon="6.047761" lat="50.790077" x="0.00" y="0.00"/>
            <waypoint name="_green2D" lon="6.047251" lat="50.790426" x="0.00" y="0.00"/>
            <waypoint name="_red1" lon="6.050093" lat="50.792552" x="0.00" y="0.00"/>
            <waypoint name="_red2" lon="6.051268" lat="50.791882" x="0.00" y="0.00"/>
            <waypoint name="_red3" lon="6.047834" lat="50.789988" x="0.00" y="0.00"/>
            <waypoint name="_red4" lon="6.048204" lat="50.789781" x="0.00" y="0.00"/>
            <waypoint name="_red5" lon="6.047626" lat="50.788865" x="0.00" y="0.00"/>
            <waypoint name="_red6" lon="6.046744" lat="50.788209" x="0.00" y="0.00"/>
            <waypoint name="_red7" lon="6.045032" lat="50.789046" x="0.00" y="0.00"/>
            <waypoint name="_red8" lon="6.046338" lat="50.790416" x="0.00" y="0.00"/>
            <waypoint name="_vision1" lon="6.047338" lat="50.789622" x="0.00" y="0.00"/>
            <waypoint name="_vision2" lon="6.047115" lat="50.789352" x="0.00" y="0.00"/>
            <waypoint name="_vision3" lon="6.046932" lat="50.789443" x="0.00" y="0.00"/>
            <waypoint name="_vision4" lon="6.047205" lat="50.789662" x="0.00" y="0.00"/>
            <waypoint name="_land1" lon="6.046939" lat="50.788606" x="0.00" y="0.00"/>
            <waypoint name="_land2" lon="6.046810" lat="50.788686" x="0.00" y="0.00"/>
            <waypoint name="_land3" lon="6.046949" lat="50.788813" x="0.00" y="0.00"/>
            <waypoint name="_land4" lon="6.047124" lat="50.788737" x="0.00" y="0.00"/>
          </waypoints>
          <sectors>
            <sector name="RED" color="red">
              <corner name="_red1"/>
              <corner name="_red2"/>
              <corner name="_red3"/>
              <corner name="_red4"/>
              <corner name="_red5"/>
              <corner name="_red6"/>
              <corner name="_red7"/>
              <corner name="_red8"/>
            </sector>
            <sector name="GREEN1" color="green">
              <corner name="_green1A"/>
              <corner name="_green1B"/>
              <corner name="_green1C"/>
              <corner name="_green1D"/>
              <corner name="_green1E"/>
              <corner name="_green1F"/>
            </sector>
            <sector name="GREEN2" color="green">
              <corner name="_green2A"/>
              <corner name="_green2B"/>
              <corner name="_green2C"/>
              <corner name="_green2D"/>
            </sector>
            <sector name="TENNIS" color="green">
              <corner name="_vision1"/>
              <corner name="_vision2"/>
              <corner name="_vision3"/>
              <corner name="_vision4"/>
            </sector>
            <sector name="LAND" color="green">
              <corner name="_land1"/>
              <corner name="_land2"/>
              <corner name="_land3"/>
              <corner name="_land4"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Dummy" no="0"/>
            <block name="Mission.WaitGPS" no="1">
              <call fun="NavKillThrottle()" no="0"/>
              <while cond="!(GpsFixValid())" no="1"/>
            </block>
            <block name="Mission.GeoInit" no="2">
              <while cond="LessThan(NavBlockTime(),10)" no="0"/>
              <call fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Mission.holding_point" no="3">
              <call fun="NavKillThrottle()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Start Engine" strip_icon="resurrect.png" group="engine" name="Mission.Start Engine" no="4">
              <call fun="NavResurrect()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Takeoff-Standby" strip_icon="takeoff.png" group="takeoff" name="Mission.Takeoff-Standby" no="5">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.Standby"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Map" strip_icon="survey.png" group="takeoff" name="Mission.Takeoff-Map" no="6">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.SurveyPoly"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Drop" strip_icon="parachute.png" group="takeoff" name="Mission.Takeoff-Drop" no="7">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.drop"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Water" group="takeoff" name="Mission.Takeoff-Water" no="8">
              <exception cond="((stateGetPositionEnu_f())->z>27.000000)" deroute="Mission.drop_water"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Standby" strip_icon="home.png" group="hover" name="Mission.Standby" no="9">
              <stay wp="STDBY" no="0"/>
            </block>
            <block strip_button="LookRobot-FC" strip_icon="lookdown.png" group="hover" name="Mission.GoTennis" no="10">
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
              <go wp="CRUISE" no="1"/>
            </block>
            <block name="Mission.LookRobot" no="11">
              <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
            </block>
            <block name="Mission.Vision" no="12">
              <exception cond="!(InsideTENNIS(GetPosX(),GetPosY()))" deroute="Mission.NoVision"/>
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndVisualLand"/>
              <call fun="StartVision()" no="0"/>
              <stay wp="CAM" no="1"/>
            </block>
            <block name="Mission.NoVision" no="13">
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndLand"/>
              <call fun="StartVision()" no="0"/>
              <stay wp="FC" no="1"/>
            </block>
            <block strip_button="ComeBackAndLand" strip_icon="land-right.png" group="hover" name="Mission.ComeBackAndLand" no="14">
              <call fun="StopVision()" no="0"/>
              <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <go wp="CRUISE" no="4"/>
              <deroute block="Mission.land" no="5"/>
            </block>
            <block name="Mission.ComeBackAndVisualLand" no="15">
              <call fun="StopVision()" no="0"/>
              <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
              <go wp="CRUISE" no="5"/>
              <deroute block="Mission.visual_flare" no="6"/>
            </block>
            <block strip_button="Follow-Vision-Geolocation-Results" strip_icon="lookdown.png" group="hover" name="Mission.CAM" no="16">
              <stay wp="CAM" no="0"/>
            </block>
            <block name="Mission.stay_p1" no="17">
              <stay wp="p1" no="0"/>
            </block>
            <block name="Mission.go_p2" no="18">
              <go wp="p2" no="0"/>
              <deroute block="Mission.stay_p1" no="1"/>
            </block>
            <block name="Mission.line_p1_p2" no="19">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <stay until="(stage_time>10)" wp="p2" no="1"/>
              <go from="p2" hmode="route" wp="p1" no="2"/>
              <deroute block="Mission.stay_p1" no="3"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="Mission.circle CV" no="20">
              <circle radius="nav_radius" wp="CAM" no="0"/>
            </block>
            <block group="drop" name="Mission.drop" no="21">
              <go wp="DROP" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone1" no="22">
              <go wp="RZ1" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone2" no="23">
              <go wp="RZ2" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone3" no="24">
              <go wp="RZ3" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_water" no="25">
              <go wp="WD" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block strip_button="Oval p1-p2-p3-p4" strip_icon="oval.png" group="race" name="Mission.race" no="26">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <go from="p2" hmode="route" wp="p3" no="1"/>
              <go from="p3" hmode="route" wp="p4" no="2"/>
              <go from="p4" hmode="route" wp="p1" no="3"/>
              <deroute block="Mission.race" no="4"/>
            </block>
            <block strip_button="Line raceA-raceB" strip_icon="line.png" group="race" name="Mission.raceline" no="27">
              <go from="raceA" hmode="route" wp="raceB" no="0"/>
              <go from="raceB" hmode="route" wp="raceA" no="1"/>
              <deroute block="Mission.raceline" no="2"/>
            </block>
            <block group="survey" strip_button="Survey-Polygon-S1-S2-S3-S4" strip_icon="googleearth.png" name="Mission.SurveyPoly" no="28">
              <call fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
              <deroute block="Mission.Survey Poly RUN" no="1"/>
            </block>
            <block name="Mission.Survey Poly RUN" no="29">
              <exception cond="(PolySurveySweepNum>=5)" deroute="Mission.GoTennis"/>
              <call fun="nav_survey_poly_run()" no="0"/>
            </block>
            <block strip_button="Land Here" strip_icon="downdown.png" group="landing" name="Mission.land_here" no="30">
              <call fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
              <call fun="NavSetWaypointHere(WP_TD)" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="Land at TD" strip_icon="land-right.png" group="landing" name="Mission.land" no="31">
              <go wp="TD" no="0"/>
              <call fun="StartVisionLand()" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="VisualLanding-CAM" strip_icon="cam_lock.png" group="landing" name="Mission.visual_flare" no="32">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <exception cond="!(InsideLAND(GetPosX(),GetPosY()))" deroute="Mission.land"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.flare" no="33">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block strip_button="Kill" strip_icon="kill.png" group="landing" name="Mission.landed" no="34">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="Mission.land_emergency" no="35">
              <call fun="NavSetWaypointHere(WP_ETD)" no="0"/>
              <deroute block="Mission.flare_emergency" no="1"/>
            </block>
            <block name="Mission.flare_emergency" no="36">
              <exception cond="NavDetectGround()" deroute="Mission.landed_emergency"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed_emergency"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.landed_emergency" no="37">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="HOME" no="38">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="38" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="37" block_name="Mission.landed_emergency" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="1">
            <deroute block="Mission.flare_emergency" no="1"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="0">
            <call fun="NavSetWaypointHere(WP_ETD)" no="0"/>
          </stage>
          <stage block="34" block_name="Mission.landed" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="1">
            <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="1">
            <call fun="StartVisionLand()" no="1"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="1">
            <call fun="NavSetWaypointHere(WP_TD)" no="1"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="0">
            <call fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
          </stage>
          <stage block="29" block_name="Mission.Survey Poly RUN" stage="0">
            <call fun="nav_survey_poly_run()" no="0"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="1">
            <deroute block="Mission.Survey Poly RUN" no="1"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="0">
            <call fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="2">
            <deroute block="Mission.raceline" no="2"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="1">
            <go from="raceB" hmode="route" wp="raceA" no="1"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="0">
            <go from="raceA" hmode="route" wp="raceB" no="0"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="4">
            <deroute block="Mission.race" no="4"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="3">
            <go from="p4" hmode="route" wp="p1" no="3"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="2">
            <go from="p3" hmode="route" wp="p4" no="2"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="1">
            <go from="p2" hmode="route" wp="p3" no="1"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="0">
            <go wp="WD" no="0"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="0">
            <go wp="RZ3" no="0"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="0">
            <go wp="RZ2" no="0"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="0">
            <go wp="RZ1" no="0"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="0">
            <go wp="DROP" no="0"/>
          </stage>
          <stage block="20" block_name="Mission.circle CV" stage="0">
            <circle radius="nav_radius" wp="CAM" no="0"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="3">
            <deroute block="Mission.stay_p1" no="3"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="2">
            <go from="p2" hmode="route" wp="p1" no="2"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="1">
            <stay until="(stage_time>10)" wp="p2" no="1"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="1">
            <deroute block="Mission.stay_p1" no="1"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="17" block_name="Mission.stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="16" block_name="Mission.CAM" stage="0">
            <stay wp="CAM" no="0"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="6">
            <deroute block="Mission.visual_flare" no="6"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="5">
            <go wp="CRUISE" no="5"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="4">
            <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="3">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="1">
            <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="0">
            <call fun="StopVision()" no="0"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="5">
            <deroute block="Mission.land" no="5"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="4">
            <go wp="CRUISE" no="4"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="3">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="1">
            <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="0">
            <call fun="StopVision()" no="0"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="1">
            <stay wp="FC" no="1"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="0">
            <call fun="StartVision()" no="0"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="1">
            <stay wp="CAM" no="1"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="0">
            <call fun="StartVision()" no="0"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="1">
            <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="0">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="1">
            <go wp="CRUISE" no="1"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="0">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
          </stage>
          <stage block="9" block_name="Mission.Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="0">
            <call fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="2">
            <call fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="0">
            <while cond="LessThan(NavBlockTime(),10)" no="0"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="1">
            <while cond="!(GpsFixValid())" no="1"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="Servo switch control">
            <dl_settings NAME="SWITCH">
              <dl_setting VAR="servo_switch_on" VALUES="Off|On" STEP="1" MODULE="servo_switch/servo_switch" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="ON" GROUP="servo_switch"/>
                <strip_button VALUE="0" NAME="OFF" GROUP="servo_switch"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="drop">
              <dl_setting VAR="drop_zone_nb" STEP="1" SHORTNAME="drop_z" MODULE="multi/drop_zone" MIN="1" MAX="3" HANDLER="set"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="MAVTec4">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="lisa_mx_2.1"/>
          <target NAME="nps" BOARD="pc">
            <subsystem TYPE="jsbsim" NAME="fdm"/>
          </target>
          <subsystem TYPE="spektrum" NAME="radio_control">
            <define VALUE="RADIO_AUX2" NAME="RADIO_KILL_SWITCH"/>
            <define VALUE="RADIO_GEAR" NAME="RADIO_MODE"/>
          </subsystem>
          <subsystem NAME="motor_mixing"/>
          <subsystem TYPE="asctec_v2" NAME="actuators"/>
          <subsystem TYPE="pwm" NAME="actuators"/>
          <subsystem TYPE="xbee_api" NAME="telemetry"/>
          <subsystem TYPE="lisa_mx_v2.1" NAME="imu"/>
          <subsystem TYPE="piksi" NAME="gps">
            <define VALUE="TRUE" NAME="USE_PIKSI_EXT_ANTENNA"/>
          </subsystem>
          <subsystem TYPE="int_quat" NAME="stabilization"/>
          <subsystem TYPE="int_cmpl_quat" NAME="ahrs"/>
          <subsystem TYPE="hff" NAME="ins"/>
          <subsystem TYPE="indi" NAME="guidance"/>
        </firmware>
        <modules>
          <load NAME="geo_mag.xml"/>
          <load NAME="air_data.xml"/>
          <load NAME="servo_switch.xml"/>
          <load NAME="nav_survey_rectangle_rotorcraft.xml">
            <define VALUE="10" NAME="RECTANGLE_SURVEY_DEFAULT_SWEEP"/>
          </load>
          <load NAME="nav_survey_poly_rotorcraft.xml">
            <define VALUE="10" NAME="POLYSURVEY_DEFAULT_DISTANCE"/>
          </load>
          <load NAME="drop_zone.xml"/>
        </modules>
        <servos DRIVER="Asctec_v2">
          <servo NO="0" NEUTRAL="3" NAME="FRONT" MIN="0" MAX="200"/>
          <servo NO="1" NEUTRAL="3" NAME="RIGHT" MIN="0" MAX="200"/>
          <servo NO="2" NEUTRAL="3" NAME="BACK" MIN="0" MAX="200"/>
          <servo NO="3" NEUTRAL="3" NAME="LEFT" MIN="0" MAX="200"/>
        </servos>
        <servos DRIVER="Pwm">
          <servo NO="4" NEUTRAL="1500" NAME="DROP" MIN="900" MAX="2000"/>
        </servos>
        <commands>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
        </commands>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="QUAD_X" NAME="TYPE"/>
          <define VALUE="TRUE" NAME="REVERSE"/>
        </section>
        <section NAME="SERVO_SWITCH">
          <define VALUE="DROP" NAME="SERVO_SWITCH_SERVO"/>
          <define VALUE="SERVO_DROP_MIN" NAME="SERVO_SWITCH_ON_VALUE"/>
          <define VALUE="SERVO_DROP_MAX" NAME="SERVO_SWITCH_OFF_VALUE"/>
          <define VALUE="ServoSwitchOn()" NAME="DropOpen()"/>
          <define VALUE="ServoSwitchOff()" NAME="DropClose()"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_motors_on,FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="FRONT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BACK"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="LEFT"/>
        </command_laws>
        <section NAME="MISC">
          <define VALUE="2.5" NAME="NAV_CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="NAV_DESCEND_VSPEED"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="11" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="11" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="-25" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="-2" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="484" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="53" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="4.02836351262" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="3.97184580645" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="4.08689235615" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="-90." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3770441" NAME="H_X"/>
          <define VALUE="0.0193986" NAME="H_Y"/>
          <define VALUE="0.9259921" NAME="H_Z"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="10000" NAME="SP_MAX_P"/>
          <define VALUE="10000" NAME="SP_MAX_Q"/>
          <define VALUE="10000" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="4" NAME="REF_TAU"/>
          <define VALUE="400" NAME="GAIN_P"/>
          <define VALUE="400" NAME="GAIN_Q"/>
          <define VALUE="350" NAME="GAIN_R"/>
          <define VALUE="75" NAME="IGAIN_P"/>
          <define VALUE="75" NAME="IGAIN_Q"/>
          <define VALUE="50" NAME="IGAIN_R"/>
          <define VALUE="300" NAME="DDGAIN_P"/>
          <define VALUE="300" NAME="DDGAIN_Q"/>
          <define VALUE="300" NAME="DDGAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="65." UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="65." UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="250." UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.85" NAME="REF_ZETA_P"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.85" NAME="REF_ZETA_Q"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="500" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.85" NAME="REF_ZETA_R"/>
          <define VALUE="180." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(1800.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="900" NAME="PHI_PGAIN"/>
          <define VALUE="200" NAME="PHI_DGAIN"/>
          <define VALUE="200" NAME="PHI_IGAIN"/>
          <define VALUE="900" NAME="THETA_PGAIN"/>
          <define VALUE="200" NAME="THETA_DGAIN"/>
          <define VALUE="200" NAME="THETA_IGAIN"/>
          <define VALUE="900" NAME="PSI_PGAIN"/>
          <define VALUE="200" NAME="PSI_DGAIN"/>
          <define VALUE="10" NAME="PSI_IGAIN"/>
          <define VALUE=" 200" NAME="PHI_DDGAIN"/>
          <define VALUE=" 200" NAME="THETA_DDGAIN"/>
          <define VALUE=" 200" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="150" NAME="HOVER_KP"/>
          <define VALUE="80" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.5" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="35" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="TRUE" NAME="USE_SPEED_REF"/>
          <define VALUE="50" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="70" NAME="AGAIN"/>
          <define VALUE="20" NAME="IGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="{&quot;nw_motor&quot;, &quot;ne_motor&quot;, &quot;se_motor&quot;, &quot;sw_motor&quot;}" NAME="ACTUATOR_NAMES"/>
          <define VALUE="&quot;simple_x_quad&quot;" NAME="JSBSIM_MODEL"/>
          <define VALUE="&quot;nps_sensors_params_default.h&quot;" NAME="SENSORS_PARAMS"/>
          <define VALUE="4" NAME="JS_AXIS_MODE"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_HOVER_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="10.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Att Loop">
            <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="400"/>
            <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="asctec_v2">
            <dl_setting var="actuators_asctec_v2.cmd" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2" shortname="cmd" values="NONE|TEST|REVERSE|SET_ADDR" handler="SetCommand"/>
            <dl_setting var="actuators_asctec_v2.cur_addr" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2" shortname="cur_addr" values="FRONT|BACK|LEFT|RIGHT" handler="SetCurAddr"/>
            <dl_setting var="actuators_asctec_v2.new_addr" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2" shortname="new_addr" values="FRONT|BACK|LEFT|RIGHT" handler="SetNewAddr"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="false" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="2000"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="MAVTec5_Freek" ac_id="35" airframe="airframes/TUDelft/airframes/mavtec5.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/Tudelft/rotorcraft_survey_competition.xml" settings="settings/rotorcraft_basic.xml settings/control/stabilization_att_int.xml settings/modules/config_asctec_v2.xml settings/control/rotorcraft_guidance.xml" settings_modules="[modules/geo_mag.xml] [modules/air_data.xml] modules/servo_switch.xml [modules/nav_survey_rectangle_rotorcraft.xml] [modules/nav_survey_poly_rotorcraft.xml] modules/drop_zone.xml modules/gps_ubx_ucenter.xml" gui_color="blue">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="IMAV2015_competition_outdoor" max_dist_from_home="500" lon0="6.04692" lat0="50.788595" ground_alt="260" alt="290">
          <exceptions>
            <exception cond="(electrical.bat_low&&(exception_flag[0]==0))" deroute="Mission.ComeBackAndLand" exec="set_exception_flag(0)"/>
            <exception cond="(electrical.bat_critical&&(exception_flag[1]==0))" deroute="Mission.land_here" exec="set_exception_flag(1)"/>
            <exception cond="((((!(InsideRED(GetPosX(),GetPosY()))&&!((nav_block==IndexOfBlock('Mission.flare'))))&&!((nav_block==IndexOfBlock('Mission.landed'))))&&!((nav_block==IndexOfBlock('Mission.WaitGPS'))))&&!((nav_block==IndexOfBlock('Mission.GeoInit'))))" deroute="Mission.land_emergency"/>
          </exceptions>
          <header>#include &quot;autopilot.h&quot;
#include &quot;subsystems/electrical.h&quot;
#ifdef dc_Survey
#define LINE_START_FUNCTION dc_Survey(dc_distance_interval);
#define LINE_STOP_FUNCTION {dc_autoshoot = DC_AUTOSHOOT_STOP;}
#endif
#ifndef DropOpen
#define DropOpen() FALSE
#endif
#ifndef StartVision
#define StartVision() FALSE
#endif
#ifndef StartVisionLand
#define StartVisionLand() FALSE
#endif
#ifndef StopVision
#define StopVision() FALSE
#endif
#define WpAlt(X) (30)</header>
          <waypoints>
            <waypoint name="_PLATE1" lon="6.04674224830944" lat="50.7888090239206" x="0.00" y="0.00"/>
            <waypoint name="_PLATE2" lon="6.04647268082583" lat="50.7890460391004" x="0.00" y="0.00"/>
            <waypoint name="_PLATE3" lon="6.04631880264475" lat="50.7888723417903" x="0.00" y="0.00"/>
            <waypoint y=".0" x="0.0" name="HOME"/>
            <waypoint y="15.4" x="-7.6" name="CLIMB"/>
            <waypoint y="24.0" x="-3.7" name="STDBY"/>
            <waypoint name="raceA" lon="6.047899" lat="50.790483" x="0.00" y="0.00"/>
            <waypoint name="raceB" lon="6.050200" lat="50.791800" x="0.00" y="0.00"/>
            <waypoint name="WG" lon="6.047431" lat="50.789794" x="0.00" y="0.00"/>
            <waypoint name="WD" lon="6.04677769236132" lat="50.7889307058111" height="30" x="0.00" y="0.00"/>
            <waypoint name="DROP" lon="6.04652336854142" lat="50.788775526101" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ1" lon="6.04652336854142" lat="50.788775526101" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ2" lon="6.04640018582595" lat="50.7889170568219" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ3" lon="6.04642327267965" lat="50.7889755961272" height="15" x="0.00" y="0.00"/>
            <waypoint name="FC" lon="6.047118" lat="50.789522" height="20" x="0.00" y="0.00"/>
            <waypoint y="95.0" x="27.5" name="CAM" height="20"/>
            <waypoint name="S1" lon="6.046721" lat="50.788597" x="0.00" y="0.00"/>
            <waypoint name="S2" lon="6.045944" lat="50.788973" x="0.00" y="0.00"/>
            <waypoint name="S3" lon="6.046330" lat="50.789323" x="0.00" y="0.00"/>
            <waypoint name="S4" lon="6.047113" lat="50.788917" x="0.00" y="0.00"/>
            <waypoint name="p1" lon="6.047864" lat="50.790483" x="0.00" y="0.00"/>
            <waypoint name="p2" lon="6.047897" lat="50.790463" x="0.00" y="0.00"/>
            <waypoint name="p3" lon="6.050232" lat="50.791799" x="0.00" y="0.00"/>
            <waypoint name="p4" lon="6.050201" lat="50.791818" x="0.00" y="0.00"/>
            <waypoint y="-55.4" x="19.2" name="CRUISE" height="25"/>
            <waypoint name="TD" lon="6.04695109268497" lat="50.7887171157922" height="15" x="0.00" y="0.00"/>
            <waypoint y="0" x="0" name="ETD" height="15"/>
            <waypoint name="_green1A" lon="6.046879" lat="50.790144" x="0.00" y="0.00"/>
            <waypoint name="_green1B" lon="6.047844" lat="50.789748" x="0.00" y="0.00"/>
            <waypoint name="_green1C" lon="6.047072" lat="50.789058" x="0.00" y="0.00"/>
            <waypoint name="_green1D" lon="6.047391" lat="50.788919" x="0.00" y="0.00"/>
            <waypoint name="_green1E" lon="6.046880" lat="50.788477" x="0.00" y="0.00"/>
            <waypoint name="_green1F" lon="6.045554" lat="50.789113" x="0.00" y="0.00"/>
            <waypoint name="_green2A" lon="6.050405" lat="50.792252" x="0.00" y="0.00"/>
            <waypoint name="_green2B" lon="6.050962" lat="50.791915" x="0.00" y="0.00"/>
            <waypoint name="_green2C" lon="6.047761" lat="50.790077" x="0.00" y="0.00"/>
            <waypoint name="_green2D" lon="6.047251" lat="50.790426" x="0.00" y="0.00"/>
            <waypoint name="_red1" lon="6.050093" lat="50.792552" x="0.00" y="0.00"/>
            <waypoint name="_red2" lon="6.051268" lat="50.791882" x="0.00" y="0.00"/>
            <waypoint name="_red3" lon="6.047834" lat="50.789988" x="0.00" y="0.00"/>
            <waypoint name="_red4" lon="6.048204" lat="50.789781" x="0.00" y="0.00"/>
            <waypoint name="_red5" lon="6.047626" lat="50.788865" x="0.00" y="0.00"/>
            <waypoint name="_red6" lon="6.046744" lat="50.788209" x="0.00" y="0.00"/>
            <waypoint name="_red7" lon="6.045032" lat="50.789046" x="0.00" y="0.00"/>
            <waypoint name="_red8" lon="6.046338" lat="50.790416" x="0.00" y="0.00"/>
            <waypoint name="_vision1" lon="6.047338" lat="50.789622" x="0.00" y="0.00"/>
            <waypoint name="_vision2" lon="6.047115" lat="50.789352" x="0.00" y="0.00"/>
            <waypoint name="_vision3" lon="6.046932" lat="50.789443" x="0.00" y="0.00"/>
            <waypoint name="_vision4" lon="6.047205" lat="50.789662" x="0.00" y="0.00"/>
            <waypoint name="_land1" lon="6.046939" lat="50.788606" x="0.00" y="0.00"/>
            <waypoint name="_land2" lon="6.046810" lat="50.788686" x="0.00" y="0.00"/>
            <waypoint name="_land3" lon="6.046949" lat="50.788813" x="0.00" y="0.00"/>
            <waypoint name="_land4" lon="6.047124" lat="50.788737" x="0.00" y="0.00"/>
          </waypoints>
          <sectors>
            <sector name="RED" color="red">
              <corner name="_red1"/>
              <corner name="_red2"/>
              <corner name="_red3"/>
              <corner name="_red4"/>
              <corner name="_red5"/>
              <corner name="_red6"/>
              <corner name="_red7"/>
              <corner name="_red8"/>
            </sector>
            <sector name="GREEN1" color="green">
              <corner name="_green1A"/>
              <corner name="_green1B"/>
              <corner name="_green1C"/>
              <corner name="_green1D"/>
              <corner name="_green1E"/>
              <corner name="_green1F"/>
            </sector>
            <sector name="GREEN2" color="green">
              <corner name="_green2A"/>
              <corner name="_green2B"/>
              <corner name="_green2C"/>
              <corner name="_green2D"/>
            </sector>
            <sector name="TENNIS" color="green">
              <corner name="_vision1"/>
              <corner name="_vision2"/>
              <corner name="_vision3"/>
              <corner name="_vision4"/>
            </sector>
            <sector name="LAND" color="green">
              <corner name="_land1"/>
              <corner name="_land2"/>
              <corner name="_land3"/>
              <corner name="_land4"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Dummy" no="0"/>
            <block name="Mission.WaitGPS" no="1">
              <call fun="NavKillThrottle()" no="0"/>
              <while cond="!(GpsFixValid())" no="1"/>
            </block>
            <block name="Mission.GeoInit" no="2">
              <while cond="LessThan(NavBlockTime(),10)" no="0"/>
              <call fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Mission.holding_point" no="3">
              <call fun="NavKillThrottle()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Start Engine" strip_icon="resurrect.png" group="engine" name="Mission.Start Engine" no="4">
              <call fun="NavResurrect()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Takeoff-Standby" strip_icon="takeoff.png" group="takeoff" name="Mission.Takeoff-Standby" no="5">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.Standby"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Map" strip_icon="survey.png" group="takeoff" name="Mission.Takeoff-Map" no="6">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.SurveyPoly"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Drop" strip_icon="parachute.png" group="takeoff" name="Mission.Takeoff-Drop" no="7">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.drop"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Water" group="takeoff" name="Mission.Takeoff-Water" no="8">
              <exception cond="((stateGetPositionEnu_f())->z>27.000000)" deroute="Mission.drop_water"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Standby" strip_icon="home.png" group="hover" name="Mission.Standby" no="9">
              <stay wp="STDBY" no="0"/>
            </block>
            <block strip_button="LookRobot-FC" strip_icon="lookdown.png" group="hover" name="Mission.GoTennis" no="10">
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
              <go wp="CRUISE" no="1"/>
            </block>
            <block name="Mission.LookRobot" no="11">
              <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
            </block>
            <block name="Mission.Vision" no="12">
              <exception cond="!(InsideTENNIS(GetPosX(),GetPosY()))" deroute="Mission.NoVision"/>
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndVisualLand"/>
              <call fun="StartVision()" no="0"/>
              <stay wp="CAM" no="1"/>
            </block>
            <block name="Mission.NoVision" no="13">
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndLand"/>
              <call fun="StartVision()" no="0"/>
              <stay wp="FC" no="1"/>
            </block>
            <block strip_button="ComeBackAndLand" strip_icon="land-right.png" group="hover" name="Mission.ComeBackAndLand" no="14">
              <call fun="StopVision()" no="0"/>
              <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <go wp="CRUISE" no="4"/>
              <deroute block="Mission.land" no="5"/>
            </block>
            <block name="Mission.ComeBackAndVisualLand" no="15">
              <call fun="StopVision()" no="0"/>
              <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
              <go wp="CRUISE" no="5"/>
              <deroute block="Mission.visual_flare" no="6"/>
            </block>
            <block strip_button="Follow-Vision-Geolocation-Results" strip_icon="lookdown.png" group="hover" name="Mission.CAM" no="16">
              <stay wp="CAM" no="0"/>
            </block>
            <block name="Mission.stay_p1" no="17">
              <stay wp="p1" no="0"/>
            </block>
            <block name="Mission.go_p2" no="18">
              <go wp="p2" no="0"/>
              <deroute block="Mission.stay_p1" no="1"/>
            </block>
            <block name="Mission.line_p1_p2" no="19">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <stay until="(stage_time>10)" wp="p2" no="1"/>
              <go from="p2" hmode="route" wp="p1" no="2"/>
              <deroute block="Mission.stay_p1" no="3"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="Mission.circle CV" no="20">
              <circle radius="nav_radius" wp="CAM" no="0"/>
            </block>
            <block group="drop" name="Mission.drop" no="21">
              <go wp="DROP" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone1" no="22">
              <go wp="RZ1" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone2" no="23">
              <go wp="RZ2" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone3" no="24">
              <go wp="RZ3" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_water" no="25">
              <go wp="WD" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block strip_button="Oval p1-p2-p3-p4" strip_icon="oval.png" group="race" name="Mission.race" no="26">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <go from="p2" hmode="route" wp="p3" no="1"/>
              <go from="p3" hmode="route" wp="p4" no="2"/>
              <go from="p4" hmode="route" wp="p1" no="3"/>
              <deroute block="Mission.race" no="4"/>
            </block>
            <block strip_button="Line raceA-raceB" strip_icon="line.png" group="race" name="Mission.raceline" no="27">
              <go from="raceA" hmode="route" wp="raceB" no="0"/>
              <go from="raceB" hmode="route" wp="raceA" no="1"/>
              <deroute block="Mission.raceline" no="2"/>
            </block>
            <block group="survey" strip_button="Survey-Polygon-S1-S2-S3-S4" strip_icon="googleearth.png" name="Mission.SurveyPoly" no="28">
              <call fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
              <deroute block="Mission.Survey Poly RUN" no="1"/>
            </block>
            <block name="Mission.Survey Poly RUN" no="29">
              <exception cond="(PolySurveySweepNum>=5)" deroute="Mission.GoTennis"/>
              <call fun="nav_survey_poly_run()" no="0"/>
            </block>
            <block strip_button="Land Here" strip_icon="downdown.png" group="landing" name="Mission.land_here" no="30">
              <call fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
              <call fun="NavSetWaypointHere(WP_TD)" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="Land at TD" strip_icon="land-right.png" group="landing" name="Mission.land" no="31">
              <go wp="TD" no="0"/>
              <call fun="StartVisionLand()" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="VisualLanding-CAM" strip_icon="cam_lock.png" group="landing" name="Mission.visual_flare" no="32">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <exception cond="!(InsideLAND(GetPosX(),GetPosY()))" deroute="Mission.land"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.flare" no="33">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block strip_button="Kill" strip_icon="kill.png" group="landing" name="Mission.landed" no="34">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="Mission.land_emergency" no="35">
              <call fun="NavSetWaypointHere(WP_ETD)" no="0"/>
              <deroute block="Mission.flare_emergency" no="1"/>
            </block>
            <block name="Mission.flare_emergency" no="36">
              <exception cond="NavDetectGround()" deroute="Mission.landed_emergency"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed_emergency"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.landed_emergency" no="37">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="HOME" no="38">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="38" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="37" block_name="Mission.landed_emergency" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="1">
            <deroute block="Mission.flare_emergency" no="1"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="0">
            <call fun="NavSetWaypointHere(WP_ETD)" no="0"/>
          </stage>
          <stage block="34" block_name="Mission.landed" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="1">
            <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="1">
            <call fun="StartVisionLand()" no="1"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="1">
            <call fun="NavSetWaypointHere(WP_TD)" no="1"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="0">
            <call fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
          </stage>
          <stage block="29" block_name="Mission.Survey Poly RUN" stage="0">
            <call fun="nav_survey_poly_run()" no="0"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="1">
            <deroute block="Mission.Survey Poly RUN" no="1"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="0">
            <call fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="2">
            <deroute block="Mission.raceline" no="2"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="1">
            <go from="raceB" hmode="route" wp="raceA" no="1"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="0">
            <go from="raceA" hmode="route" wp="raceB" no="0"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="4">
            <deroute block="Mission.race" no="4"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="3">
            <go from="p4" hmode="route" wp="p1" no="3"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="2">
            <go from="p3" hmode="route" wp="p4" no="2"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="1">
            <go from="p2" hmode="route" wp="p3" no="1"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="0">
            <go wp="WD" no="0"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="0">
            <go wp="RZ3" no="0"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="0">
            <go wp="RZ2" no="0"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="0">
            <go wp="RZ1" no="0"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="0">
            <go wp="DROP" no="0"/>
          </stage>
          <stage block="20" block_name="Mission.circle CV" stage="0">
            <circle radius="nav_radius" wp="CAM" no="0"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="3">
            <deroute block="Mission.stay_p1" no="3"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="2">
            <go from="p2" hmode="route" wp="p1" no="2"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="1">
            <stay until="(stage_time>10)" wp="p2" no="1"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="1">
            <deroute block="Mission.stay_p1" no="1"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="17" block_name="Mission.stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="16" block_name="Mission.CAM" stage="0">
            <stay wp="CAM" no="0"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="6">
            <deroute block="Mission.visual_flare" no="6"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="5">
            <go wp="CRUISE" no="5"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="4">
            <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="3">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="1">
            <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="0">
            <call fun="StopVision()" no="0"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="5">
            <deroute block="Mission.land" no="5"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="4">
            <go wp="CRUISE" no="4"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="3">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="1">
            <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="0">
            <call fun="StopVision()" no="0"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="1">
            <stay wp="FC" no="1"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="0">
            <call fun="StartVision()" no="0"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="1">
            <stay wp="CAM" no="1"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="0">
            <call fun="StartVision()" no="0"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="1">
            <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="0">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="1">
            <go wp="CRUISE" no="1"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="0">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
          </stage>
          <stage block="9" block_name="Mission.Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="0">
            <call fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="2">
            <call fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="0">
            <while cond="LessThan(NavBlockTime(),10)" no="0"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="1">
            <while cond="!(GpsFixValid())" no="1"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="Servo switch control">
            <dl_settings NAME="SWITCH">
              <dl_setting VAR="servo_switch_on" VALUES="Off|On" STEP="1" MODULE="servo_switch/servo_switch" MIN="0" MAX="1">
                <strip_button VALUE="1" NAME="ON" GROUP="servo_switch"/>
                <strip_button VALUE="0" NAME="OFF" GROUP="servo_switch"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="drop">
              <dl_setting VAR="drop_zone_nb" STEP="1" SHORTNAME="drop_z" MODULE="multi/drop_zone" MIN="1" MAX="3" HANDLER="set"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="MAVTec5">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="lisa_mx_2.1"/>
          <target NAME="nps" BOARD="pc">
            <subsystem TYPE="jsbsim" NAME="fdm"/>
          </target>
          <subsystem TYPE="spektrum" NAME="radio_control">
            <define VALUE="RADIO_AUX2" NAME="RADIO_KILL_SWITCH"/>
            <define VALUE="RADIO_GEAR" NAME="RADIO_MODE"/>
          </subsystem>
          <subsystem NAME="motor_mixing"/>
          <subsystem TYPE="asctec_v2" NAME="actuators"/>
          <subsystem TYPE="pwm" NAME="actuators"/>
          <subsystem TYPE="xbee_api" NAME="telemetry"/>
          <subsystem TYPE="lisa_mx_v2.1" NAME="imu"/>
          <subsystem TYPE="ublox" NAME="gps">
            <define VALUE="TRUE" NAME="USE_PIKSI_EXT_ANTENNA"/>
          </subsystem>
          <subsystem TYPE="int_quat" NAME="stabilization"/>
          <subsystem TYPE="int_cmpl_quat" NAME="ahrs"/>
          <subsystem TYPE="hff" NAME="ins"/>
        </firmware>
        <modules>
          <load NAME="geo_mag.xml"/>
          <load NAME="air_data.xml"/>
          <load NAME="servo_switch.xml"/>
          <load NAME="nav_survey_rectangle_rotorcraft.xml">
            <define VALUE="10" NAME="RECTANGLE_SURVEY_DEFAULT_SWEEP"/>
          </load>
          <load NAME="nav_survey_poly_rotorcraft.xml">
            <define VALUE="10" NAME="POLYSURVEY_DEFAULT_DISTANCE"/>
          </load>
          <load NAME="drop_zone.xml"/>
          <load NAME="gps_ubx_ucenter.xml"/>
        </modules>
        <servos DRIVER="Asctec_v2">
          <servo NO="0" NEUTRAL="3" NAME="FRONT" MIN="0" MAX="200"/>
          <servo NO="1" NEUTRAL="3" NAME="RIGHT" MIN="0" MAX="200"/>
          <servo NO="2" NEUTRAL="3" NAME="BACK" MIN="0" MAX="200"/>
          <servo NO="3" NEUTRAL="3" NAME="LEFT" MIN="0" MAX="200"/>
        </servos>
        <servos DRIVER="Pwm">
          <servo NO="4" NEUTRAL="1500" NAME="DROP" MIN="1100" MAX="2100"/>
        </servos>
        <commands>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
        </commands>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="QUAD_X" NAME="TYPE"/>
          <define VALUE="TRUE" NAME="REVERSE"/>
        </section>
        <section NAME="SERVO_SWITCH">
          <define VALUE="DROP" NAME="SERVO_SWITCH_SERVO"/>
          <define VALUE="SERVO_DROP_MIN" NAME="SERVO_SWITCH_ON_VALUE"/>
          <define VALUE="SERVO_DROP_MAX" NAME="SERVO_SWITCH_OFF_VALUE"/>
          <define VALUE="ServoSwitchOn()" NAME="DropOpen()"/>
          <define VALUE="ServoSwitchOff()" NAME="DropClose()"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_motors_on,FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="FRONT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BACK"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="LEFT"/>
        </command_laws>
        <section NAME="MISC">
          <define VALUE="2.5" NAME="NAV_CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="NAV_DESCEND_VSPEED"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="11" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="11" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="-25" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="14" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="116" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="119" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="5.09245681612" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="5.29702744632" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="5.65287938992" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="-90." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3770441" NAME="H_X"/>
          <define VALUE="0.0193986" NAME="H_Y"/>
          <define VALUE="0.9259921" NAME="H_Z"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="10000" NAME="SP_MAX_P"/>
          <define VALUE="10000" NAME="SP_MAX_Q"/>
          <define VALUE="10000" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="4" NAME="REF_TAU"/>
          <define VALUE="400" NAME="GAIN_P"/>
          <define VALUE="400" NAME="GAIN_Q"/>
          <define VALUE="350" NAME="GAIN_R"/>
          <define VALUE="75" NAME="IGAIN_P"/>
          <define VALUE="75" NAME="IGAIN_Q"/>
          <define VALUE="50" NAME="IGAIN_R"/>
          <define VALUE="300" NAME="DDGAIN_P"/>
          <define VALUE="300" NAME="DDGAIN_Q"/>
          <define VALUE="300" NAME="DDGAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="65." UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="65." UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="250." UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.85" NAME="REF_ZETA_P"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.85" NAME="REF_ZETA_Q"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="500" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.85" NAME="REF_ZETA_R"/>
          <define VALUE="180." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(1800.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="900" NAME="PHI_PGAIN"/>
          <define VALUE="200" NAME="PHI_DGAIN"/>
          <define VALUE="200" NAME="PHI_IGAIN"/>
          <define VALUE="900" NAME="THETA_PGAIN"/>
          <define VALUE="200" NAME="THETA_DGAIN"/>
          <define VALUE="200" NAME="THETA_IGAIN"/>
          <define VALUE="900" NAME="PSI_PGAIN"/>
          <define VALUE="200" NAME="PSI_DGAIN"/>
          <define VALUE="10" NAME="PSI_IGAIN"/>
          <define VALUE=" 200" NAME="PHI_DDGAIN"/>
          <define VALUE=" 200" NAME="THETA_DDGAIN"/>
          <define VALUE=" 200" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="150" NAME="HOVER_KP"/>
          <define VALUE="80" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.5" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="35" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="TRUE" NAME="USE_SPEED_REF"/>
          <define VALUE="50" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="70" NAME="AGAIN"/>
          <define VALUE="20" NAME="IGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="{&quot;nw_motor&quot;, &quot;ne_motor&quot;, &quot;se_motor&quot;, &quot;sw_motor&quot;}" NAME="ACTUATOR_NAMES"/>
          <define VALUE="&quot;simple_x_quad&quot;" NAME="JSBSIM_MODEL"/>
          <define VALUE="&quot;nps_sensors_params_default.h&quot;" NAME="SENSORS_PARAMS"/>
          <define VALUE="4" NAME="JS_AXIS_MODE"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_HOVER_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="10.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Att Loop">
            <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="400"/>
            <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="asctec_v2">
            <dl_setting var="actuators_asctec_v2.cmd" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2" shortname="cmd" values="NONE|TEST|REVERSE|SET_ADDR" handler="SetCommand"/>
            <dl_setting var="actuators_asctec_v2.cur_addr" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2" shortname="cur_addr" values="FRONT|BACK|LEFT|RIGHT" handler="SetCurAddr"/>
            <dl_setting var="actuators_asctec_v2.new_addr" min="0" step="1" max="3" module="subsystems/actuators/actuators_asctec_v2" shortname="new_addr" values="FRONT|BACK|LEFT|RIGHT" handler="SetNewAddr"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="false" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="2000"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="MentorEnergy" ac_id="1" airframe="airframes/examples/MentorEnergy.xml" radio="radios/R6107SP_7ch.xml" telemetry="telemetry/default_fixedwing_imu.xml" flight_plan="flight_plans/versatile_airspeed.xml" settings="settings/fixedwing_basic.xml settings/control/ctl_energy.xml settings/estimation/ac_char.xml" settings_modules="modules/geo_mag.xml modules/gps_ubx_ucenter.xml modules/light.xml modules/digital_cam.xml" gui_color="white">
      <radio SYNC_MIN="4000" SYNC_MAX="15000" PULSE_TYPE="NEGATIVE" NAME="FASST TX Module" DATA_MIN="700" DATA_MAX="2300">
        <channel NEUTRAL="1500" MIN="1900" MAX="1100" FUNCTION="ROLL" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="PITCH" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1100" MIN="1100" MAX="1900" FUNCTION="THROTTLE" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="YAW" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="MODE" CTL="E" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="EXTRA1" CTL="F" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="FLAPS" CTL="G" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="25" qfu="270" name="Versatile" max_dist_from_home="1500" lon0="1.2729" lat0="43.4622" ground_alt="185" alt="260">
          <header>#include &quot;firmwares/fixedwing/guidance/energy_ctrl.h&quot;
#include &quot;subsystems/datalink/datalink.h&quot;</header>
          <waypoints>
            <waypoint y="0" x="0" name="HOME"/>
            <waypoint y="80" x="20" name="STDBY"/>
            <waypoint y="102.2" x="44.8" name="1"/>
            <waypoint y="122.9" x="-63.5" name="2"/>
            <waypoint y="-21.2" x="-11.5" name="MOB"/>
            <waypoint y="80.4" x="-151.6" name="S1"/>
            <waypoint y="214.9" x="180.1" name="S2"/>
            <waypoint y="-10" x="200" name="AF" alt="30"/>
            <waypoint y="20.0" x="80.0" name="TD" alt="0"/>
            <waypoint y="-23.0" x="26.9" name="BASELEG"/>
            <waypoint y="0" x="-100" name="_1"/>
            <waypoint y="200" x="-100" name="_2"/>
            <waypoint y="200" x="100" name="_3"/>
            <waypoint y="0" x="100" name="_4"/>
            <waypoint y="35.4" x="-122.5" name="CLIMB"/>
          </waypoints>
          <sectors>
            <sector name="Square">
              <corner name="_1"/>
              <corner name="_2"/>
              <corner name="_3"/>
              <corner name="_4"/>
            </sector>
          </sectors>
          <exceptions/>
          <blocks>
            <block name="Wait GPS" no="0">
              <set var="kill_throttle" value="1" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <set var="kill_throttle" value="1" no="0"/>
              <attitude vmode="throttle" throttle="0" roll="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff (wp CLIMB)" name="Takeoff" no="3">
              <exception deroute="Standby" cond="GetPosAlt() > GetAltRef()+25"/>
              <set var="kill_throttle" value="0" no="0"/>
              <set var="v_ctl_auto_airspeed_setpoint" value="CLIMB_AIRSPEED" no="1"/>
              <go wp="CLIMB" no="2"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="4">
              <set var="v_ctl_auto_airspeed_setpoint" value="NOMINAL_AIRSPEED" no="0"/>
              <circle wp="STDBY" radius="nav_radius" no="1"/>
            </block>
            <block strip_icon="eight.png" strip_button="Figure 8 (wp 1-2)" name="Figure 8 around wp 1" no="5">
              <eight turn_around="2" radius="nav_radius" center="1" no="1"/>
            </block>
            <block strip_icon="oval.png" strip_button="Oval (wp 1-2)" name="Oval 1-2" no="6">
              <set var="v_ctl_auto_airspeed_setpoint" value="RACE_AIRSPEED" no="0"/>
              <oval radius="nav_radius" p2="2" p1="1" no="2"/>
            </block>
            <block strip_icon="mob.png" strip_button="Circle around here" name="MOB" no="7">
              <call fun="NavSetWaypointHere(WP_MOB)" no="0"/>
              <circle wp="MOB" radius="100" no="1"/>
            </block>
            <block name="Auto pitch (circle wp 1)" no="8">
              <circle wp="1" throttle="0.7" radius="75" pitch="auto" no="0"/>
            </block>
            <block name="Climb 75% throttle" no="9">
              <circle wp="1" vmode="throttle" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" throttle="0.75" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="10" no="0"/>
            </block>
            <block name="Climb 0m/s" no="10">
              <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="nav_radius" climb="0" no="0"/>
            </block>
            <block name="Climb 1m/s" no="11">
              <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="5" climb="1" no="0"/>
            </block>
            <block name="Climb nav_climb m/s" no="12">
              <circle wp="1" vmode="climb" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" radius="nav_radius" climb="nav_climb" no="0"/>
            </block>
            <block name="Circle 0% throttle" no="13">
              <circle wp="1" vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" no="0"/>
              <deroute block="Standby" no="1"/>
            </block>
            <block name="Oval 0% throttle" no="14">
              <oval vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" p2="2" p1="1" no="1"/>
              <deroute block="Standby" no="2"/>
            </block>
            <block name="Route 1-2" no="15">
              <go wp="2" hmode="route" from="1" approaching_time="0" no="0"/>
            </block>
            <block name="Stack wp 2" no="16">
              <circle wp="2" radius="75" no="0"/>
            </block>
            <block name="Route 2-1" no="17">
              <go wp="1" hmode="route" from="2" approaching_time="0" no="0"/>
            </block>
            <block name="Stack wp 1" no="18">
              <circle wp="1" radius="75" no="0"/>
            </block>
            <block name="Glide 1-2" no="19">
              <go wp="2" vmode="glide" hmode="route" from="1" no="0"/>
              <deroute block="Standby" no="1"/>
            </block>
            <block strip_icon="survey.png" strip_button="Survey (wp S1-S2)" name="Survey S1-S2" no="20">
              <survey_rectangle wp2="S2" wp1="S1" grid="150" no="1"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land right (wp AF-TD)" name="Land Right AF-TD" no="21">
              <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="0"/>
              <deroute block="land" no="1"/>
            </block>
            <block strip_icon="land-left.png" strip_button="Land left (wp AF-TD)" name="Land Left AF-TD" no="22">
              <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="0"/>
              <deroute block="land" no="1"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land right (wp AF-TD)" name="Constant Slope Land Right AF-TD" no="23">
              <call fun="nav_compute_final_from_glide(WP_AF, WP_TD, 10.)" no="0"/>
              <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="1"/>
              <deroute block="land" no="2"/>
            </block>
            <block strip_icon="land-left.png" strip_button="Land left (wp AF-TD)" name="Constant Slope Land Left AF-TD" no="24">
              <call fun="nav_compute_final_from_glide(WP_AF, WP_TD, 10.)" no="0"/>
              <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="1"/>
              <deroute block="land" no="2"/>
            </block>
            <block name="land" no="25">
              <set var="v_ctl_auto_airspeed_setpoint" value="NOMINAL_AIRSPEED" no="0"/>
              <call fun="nav_compute_baseleg(WP_AF, WP_TD, WP_BASELEG, nav_radius)" no="1"/>
              <circle wp="BASELEG" until="NavCircleCount() > 0.5" radius="nav_radius" no="2"/>
              <set var="v_ctl_auto_airspeed_setpoint" value="GLIDE_AIRSPEED" no="3"/>
              <circle wp="BASELEG" until="NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-(nav_radius/fabs(nav_radius))*10) && 10 > fabs(GetPosAlt() - WaypointAlt(WP_BASELEG))" radius="nav_radius" no="4"/>
            </block>
            <block name="final" no="26">
              <go wp="TD" vmode="glide" hmode="route" from="AF" approaching_time="5" no="0"/>
              <set var="v_ctl_auto_airspeed_setpoint" value="(GLIDE_AIRSPEED*10.0/12.0)" no="1"/>
            </block>
            <block name="flare" no="27">
              <go wp="TD" vmode="glide" throttle="0.0" hmode="route" from="AF" approaching_time="0" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0.0" roll="0.0" no="1"/>
            </block>
            <block name="Steps roll -10, +10" no="28">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 6" roll="10.0" alt="250" no="1"/>
                <attitude vmode="alt" until="stage_time > 6" roll="-10.0" alt="250" no="2"/>
              </while>
            </block>
            <block name="Steps roll -20, +20" no="29">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 3" roll="20.0" alt="250" no="1"/>
                <attitude vmode="alt" until="stage_time > 3" roll="-20.0" alt="250" no="2"/>
              </while>
            </block>
            <block name="Steps pitch -10, +10" no="30">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="10" alt="250" no="1"/>
                <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="-10" alt="250" no="2"/>
              </while>
            </block>
            <block name="Heading 30" no="31">
              <heading until="FALSE" course="30" alt="GetAltRef()+50" no="0"/>
            </block>
            <block name="For loop (circles wp 1)" no="32">
              <for var="i" to="3" from="0" no="1">
                <circle wp="1" until="NavCircleCount() > 1" radius="DEFAULT_CIRCLE_RADIUS+ $i*10" no="2"/>
              </for>
              <deroute block="Standby" no="4"/>
            </block>
            <block name="Test datalink (go to wp 2)" no="33">
              <exception deroute="Standby" cond="datalink_time > 22"/>
              <go wp="2" hmode="route" from="STDBY" no="0"/>
              <go wp="STDBY" hmode="route" from="2" no="1"/>
            </block>
            <block name="Fly in Square" no="34">
              <exception deroute="Come back wp 1" cond="! InsideSquare(GetPosX(), GetPosY())"/>
              <attitude vmode="alt" roll="0" alt="GetAltRef()+75" no="0"/>
            </block>
            <block name="Come back wp 1" no="35">
              <exception deroute="Fly in Square" cond="InsideSquare(GetPosX(), GetPosY())"/>
              <go wp="1" no="0"/>
              <deroute block="Fly in Square" no="1"/>
            </block>
            <block name="HOME" no="36">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="36" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="35" block_name="Come back wp 1" stage="1">
            <deroute block="Fly in Square" no="1"/>
          </stage>
          <stage block="35" block_name="Come back wp 1" stage="0">
            <go wp="1" no="0"/>
          </stage>
          <stage block="34" block_name="Fly in Square" stage="0">
            <attitude vmode="alt" roll="0" alt="GetAltRef()+75" no="0"/>
          </stage>
          <stage block="33" block_name="Test datalink (go to wp 2)" stage="1">
            <go wp="STDBY" hmode="route" from="2" no="1"/>
          </stage>
          <stage block="33" block_name="Test datalink (go to wp 2)" stage="0">
            <go wp="2" hmode="route" from="STDBY" no="0"/>
          </stage>
          <stage block="32" block_name="For loop (circles wp 1)" stage="4">
            <deroute block="Standby" no="4"/>
          </stage>
          <stage block="32" block_name="For loop (circles wp 1)" stage="2">
            <circle wp="1" until="NavCircleCount() > 1" radius="DEFAULT_CIRCLE_RADIUS+ $i*10" no="2"/>
          </stage>
          <stage block="32" block_name="For loop (circles wp 1)" stage="1">
            <for var="i" to="3" from="0" no="1">
              <circle wp="1" until="NavCircleCount() > 1" radius="DEFAULT_CIRCLE_RADIUS+ $i*10" no="2"/>
            </for>
          </stage>
          <stage block="31" block_name="Heading 30" stage="0">
            <heading until="FALSE" course="30" alt="GetAltRef()+50" no="0"/>
          </stage>
          <stage block="30" block_name="Steps pitch -10, +10" stage="2">
            <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="-10" alt="250" no="2"/>
          </stage>
          <stage block="30" block_name="Steps pitch -10, +10" stage="1">
            <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="10" alt="250" no="1"/>
          </stage>
          <stage block="30" block_name="Steps pitch -10, +10" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="10" alt="250" no="1"/>
              <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="-10" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="29" block_name="Steps roll -20, +20" stage="2">
            <attitude vmode="alt" until="stage_time > 3" roll="-20.0" alt="250" no="2"/>
          </stage>
          <stage block="29" block_name="Steps roll -20, +20" stage="1">
            <attitude vmode="alt" until=" stage_time > 3" roll="20.0" alt="250" no="1"/>
          </stage>
          <stage block="29" block_name="Steps roll -20, +20" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 3" roll="20.0" alt="250" no="1"/>
              <attitude vmode="alt" until="stage_time > 3" roll="-20.0" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="28" block_name="Steps roll -10, +10" stage="2">
            <attitude vmode="alt" until="stage_time > 6" roll="-10.0" alt="250" no="2"/>
          </stage>
          <stage block="28" block_name="Steps roll -10, +10" stage="1">
            <attitude vmode="alt" until=" stage_time > 6" roll="10.0" alt="250" no="1"/>
          </stage>
          <stage block="28" block_name="Steps roll -10, +10" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 6" roll="10.0" alt="250" no="1"/>
              <attitude vmode="alt" until="stage_time > 6" roll="-10.0" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="27" block_name="flare" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0.0" roll="0.0" no="1"/>
          </stage>
          <stage block="27" block_name="flare" stage="0">
            <go wp="TD" vmode="glide" throttle="0.0" hmode="route" from="AF" approaching_time="0" no="0"/>
          </stage>
          <stage block="26" block_name="final" stage="1">
            <set var="v_ctl_auto_airspeed_setpoint" value="(GLIDE_AIRSPEED*10.0/12.0)" no="1"/>
          </stage>
          <stage block="26" block_name="final" stage="0">
            <go wp="TD" vmode="glide" hmode="route" from="AF" approaching_time="5" no="0"/>
          </stage>
          <stage block="25" block_name="land" stage="4">
            <circle wp="BASELEG" until="NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-(nav_radius/fabs(nav_radius))*10) && 10 > fabs(GetPosAlt() - WaypointAlt(WP_BASELEG))" radius="nav_radius" no="4"/>
          </stage>
          <stage block="25" block_name="land" stage="3">
            <set var="v_ctl_auto_airspeed_setpoint" value="GLIDE_AIRSPEED" no="3"/>
          </stage>
          <stage block="25" block_name="land" stage="2">
            <circle wp="BASELEG" until="NavCircleCount() > 0.5" radius="nav_radius" no="2"/>
          </stage>
          <stage block="25" block_name="land" stage="1">
            <call fun="nav_compute_baseleg(WP_AF, WP_TD, WP_BASELEG, nav_radius)" no="1"/>
          </stage>
          <stage block="25" block_name="land" stage="0">
            <set var="v_ctl_auto_airspeed_setpoint" value="NOMINAL_AIRSPEED" no="0"/>
          </stage>
          <stage block="24" block_name="Constant Slope Land Left AF-TD" stage="2">
            <deroute block="land" no="2"/>
          </stage>
          <stage block="24" block_name="Constant Slope Land Left AF-TD" stage="1">
            <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="1"/>
          </stage>
          <stage block="24" block_name="Constant Slope Land Left AF-TD" stage="0">
            <call fun="nav_compute_final_from_glide(WP_AF, WP_TD, 10.)" no="0"/>
          </stage>
          <stage block="23" block_name="Constant Slope Land Right AF-TD" stage="2">
            <deroute block="land" no="2"/>
          </stage>
          <stage block="23" block_name="Constant Slope Land Right AF-TD" stage="1">
            <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="1"/>
          </stage>
          <stage block="23" block_name="Constant Slope Land Right AF-TD" stage="0">
            <call fun="nav_compute_final_from_glide(WP_AF, WP_TD, 10.)" no="0"/>
          </stage>
          <stage block="22" block_name="Land Left AF-TD" stage="1">
            <deroute block="land" no="1"/>
          </stage>
          <stage block="22" block_name="Land Left AF-TD" stage="0">
            <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="0"/>
          </stage>
          <stage block="21" block_name="Land Right AF-TD" stage="1">
            <deroute block="land" no="1"/>
          </stage>
          <stage block="21" block_name="Land Right AF-TD" stage="0">
            <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="0"/>
          </stage>
          <stage block="20" block_name="Survey S1-S2" stage="1">
            <survey_rectangle wp2="S2" wp1="S1" grid="150" no="1"/>
          </stage>
          <stage block="19" block_name="Glide 1-2" stage="1">
            <deroute block="Standby" no="1"/>
          </stage>
          <stage block="19" block_name="Glide 1-2" stage="0">
            <go wp="2" vmode="glide" hmode="route" from="1" no="0"/>
          </stage>
          <stage block="18" block_name="Stack wp 1" stage="0">
            <circle wp="1" radius="75" no="0"/>
          </stage>
          <stage block="17" block_name="Route 2-1" stage="0">
            <go wp="1" hmode="route" from="2" approaching_time="0" no="0"/>
          </stage>
          <stage block="16" block_name="Stack wp 2" stage="0">
            <circle wp="2" radius="75" no="0"/>
          </stage>
          <stage block="15" block_name="Route 1-2" stage="0">
            <go wp="2" hmode="route" from="1" approaching_time="0" no="0"/>
          </stage>
          <stage block="14" block_name="Oval 0% throttle" stage="2">
            <deroute block="Standby" no="2"/>
          </stage>
          <stage block="14" block_name="Oval 0% throttle" stage="1">
            <oval vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" p2="2" p1="1" no="1"/>
          </stage>
          <stage block="13" block_name="Circle 0% throttle" stage="1">
            <deroute block="Standby" no="1"/>
          </stage>
          <stage block="13" block_name="Circle 0% throttle" stage="0">
            <circle wp="1" vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" no="0"/>
          </stage>
          <stage block="12" block_name="Climb nav_climb m/s" stage="0">
            <circle wp="1" vmode="climb" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" radius="nav_radius" climb="nav_climb" no="0"/>
          </stage>
          <stage block="11" block_name="Climb 1m/s" stage="0">
            <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="5" climb="1" no="0"/>
          </stage>
          <stage block="10" block_name="Climb 0m/s" stage="0">
            <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="nav_radius" climb="0" no="0"/>
          </stage>
          <stage block="9" block_name="Climb 75% throttle" stage="0">
            <circle wp="1" vmode="throttle" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" throttle="0.75" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="10" no="0"/>
          </stage>
          <stage block="8" block_name="Auto pitch (circle wp 1)" stage="0">
            <circle wp="1" throttle="0.7" radius="75" pitch="auto" no="0"/>
          </stage>
          <stage block="7" block_name="MOB" stage="1">
            <circle wp="MOB" radius="100" no="1"/>
          </stage>
          <stage block="7" block_name="MOB" stage="0">
            <call fun="NavSetWaypointHere(WP_MOB)" no="0"/>
          </stage>
          <stage block="6" block_name="Oval 1-2" stage="2">
            <oval radius="nav_radius" p2="2" p1="1" no="2"/>
          </stage>
          <stage block="6" block_name="Oval 1-2" stage="0">
            <set var="v_ctl_auto_airspeed_setpoint" value="RACE_AIRSPEED" no="0"/>
          </stage>
          <stage block="5" block_name="Figure 8 around wp 1" stage="1">
            <eight turn_around="2" radius="nav_radius" center="1" no="1"/>
          </stage>
          <stage block="4" block_name="Standby" stage="1">
            <circle wp="STDBY" radius="nav_radius" no="1"/>
          </stage>
          <stage block="4" block_name="Standby" stage="0">
            <set var="v_ctl_auto_airspeed_setpoint" value="NOMINAL_AIRSPEED" no="0"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="2">
            <go wp="CLIMB" no="2"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="1">
            <set var="v_ctl_auto_airspeed_setpoint" value="CLIMB_AIRSPEED" no="1"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="0">
            <set var="kill_throttle" value="0" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" throttle="0" roll="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <set var="kill_throttle" value="1" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <set var="kill_throttle" value="1" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="lights control">
            <dl_settings NAME="lights">
              <dl_setting VAR="strobe_light_mode" VALUES="OFF|ON|BLINK_1|BLINK_2|BLINK_3|COMPLEX_1|COMPLEX_2" STEP="1" MODULE="light/light" MIN="0" MAX="6">
                <strip_button VALUE="1" NAME="LightOn" ICON="on.png" GROUP="light"/>
                <strip_button VALUE="0" NAME="LightOff" ICON="off.png" GROUP="light"/>
              </dl_setting>
              <dl_setting VAR="nav_light_mode" VALUES="OFF|ON|BLINK_1|BLINK_2|BLINK_3" STEP="1" MIN="0" MAX="4"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="control">
            <dl_settings NAME="dc">
              <dl_setting VAR="0" STEP="1" SHORTNAME="Shutter" MODULE="digital_cam/dc" MIN="0" MAX="255" HANDLER="send_command">
                <strip_button VALUE="32" NAME="Photo" ICON="digital-camera.png" GROUP="maindc"/>
                <strip_button VALUE="111" NAME="Power" ICON="off.png" GROUP="maindc"/>
                <strip_button VALUE="116" NAME="ZoomIn" ICON="zoom.png" GROUP="dczoom"/>
                <strip_button VALUE="119" NAME="ZoomOut" ICON="zoom.png" GROUP="dczoom"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot" VALUES="STOP|PERIODIC|DISTANCE|EXT_TRIG" STEP="1" MIN="0" MAX="3">
                <strip_button VALUE="1" NAME="Start Autoshoot" ICON="dcstart.png" GROUP="dcauto"/>
                <strip_button VALUE="0" NAME="Stop Autoshoot" ICON="dcstart.png" GROUP="dcauto"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot_period" UNIT="sec" STEP="0.5" SHORTNAME="Periodic" PARAM="DC_AUTOSHOOT_PERIOD" MIN="0.1" MAX="60"/>
              <dl_setting VAR="dc_distance_interval" UNIT="meter" STEP="1" SHORTNAME="dist" PARAM="DC_AUTOSHOOT_DISTANCE_INTERVAL" MIN="0" MAX="255"/>
              <dl_setting VAR="dc_survey_interval" STEP="5" SHORTNAME="Survey-Interval" MODULE="digital_cam/dc" MIN="0" MAX="250" HANDLER="Survey"/>
              <dl_setting VAR="dc_circle_interval" STEP="5" SHORTNAME="Circle-Interval" MODULE="digital_cam/dc" MIN="5" MAX="90" HANDLER="Circle"/>
              <dl_setting VAR="dc_cam_tracing" STEP="1" SHORTNAME="Cam-Tracing" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="LisaAspirin2">
        <firmware NAME="fixedwing">
          <target NAME="ap" BOARD="lisa_m_1.0">
            <define NAME="LISA_M_LONGITUDINAL_X"/>
            <configure VALUE="120" NAME="PERIODIC_FREQUENCY"/>
            <configure VALUE="100" NAME="AHRS_PROPAGATE_FREQUENCY"/>
            <configure VALUE="100" NAME="AHRS_CORRECT_FREQUENCY"/>
            <define NAME="AHRS_TRIGGERED_ATTITUDE_LOOP"/>
          </target>
          <target NAME="sim" BOARD="pc"/>
          <target NAME="nps" BOARD="pc">
            <subsystem TYPE="jsbsim" NAME="fdm"/>
          </target>
          <define NAME="USE_AIRSPEED"/>
          <define NAME="AGR_CLIMB"/>
          <define NAME="STRONG_WIND"/>
          <define NAME="WIND_INFO"/>
          <define NAME="WIND_INFO_RET"/>
          <subsystem TYPE="aspirin_v2.1" NAME="imu"/>
          <subsystem TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define NAME="AHRS_GRAVITY_UPDATE_COORDINATED_TURN"/>
          </subsystem>
          <subsystem TYPE="alt_float" NAME="ins"/>
          <subsystem TYPE="ppm" NAME="radio_control"/>
          <subsystem TYPE="xbee_api" NAME="telemetry">
            <configure VALUE="B57600" NAME="MODEM_BAUD"/>
            <configure VALUE="UART2" NAME="MODEM_PORT"/>
          </subsystem>
          <subsystem TYPE="energy" NAME="control"/>
          <subsystem NAME="navigation"/>
          <subsystem TYPE="ublox" NAME="gps">
            <configure VALUE="UART1" NAME="GPS_PORT"/>
          </subsystem>
        </firmware>
        <modules>
          <load NAME="geo_mag.xml"/>
          <load NAME="gps_ubx_ucenter.xml"/>
          <load NAME="airspeed_ets.xml">
            <define NAME="AIRSPEED_ETS_SYNC_SEND"/>
            <define VALUE="i2c2" NAME="AIRSPEED_ETS_I2C_DEV"/>
            <define NAME="USE_I2C2"/>
          </load>
          <load NAME="adc_generic.xml">
            <configure VALUE="ADC_1" NAME="ADC_CHANNEL_GENERIC1"/>
            <configure VALUE="ADC_2" NAME="ADC_CHANNEL_GENERIC2"/>
          </load>
          <load NAME="light.xml">
            <define VALUE="2" NAME="LIGHT_LED_STROBE"/>
            <define VALUE="3" NAME="LIGHT_LED_NAV"/>
            <define VALUE="6" NAME="STROBE_LIGHT_MODE_DEFAULT"/>
            <define VALUE="4" NAME="NAV_LIGHT_MODE_DEFAULT"/>
          </load>
          <load NAME="digital_cam.xml">
            <define VALUE="GPIOC,GPIO12" NAME="DC_SHUTTER_GPIO"/>
          </load>
          <load NAME="nav_line.xml"/>
        </modules>
        <servos>
          <servo NO="0" NEUTRAL="1000" NAME="THROTTLE" MIN="1000" MAX="2000"/>
          <servo NO="1" NEUTRAL="1500" NAME="AILEVON_LEFT" MIN="1200" MAX="1800"/>
          <servo NO="2" NEUTRAL="1500" NAME="ELEVATOR" MIN="2000" MAX="1000"/>
          <servo NO="3" NEUTRAL="1500" NAME="RUDDER" MIN="1100" MAX="1900"/>
          <servo NO="4" NEUTRAL="1500" NAME="AILEVON_RIGHT" MIN="1800" MAX="1200"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set VALUE="@THROTTLE" COMMAND="THROTTLE"/>
          <set VALUE="@ROLL" COMMAND="ROLL"/>
          <set VALUE="@PITCH" COMMAND="PITCH"/>
          <set VALUE="@YAW" COMMAND="YAW"/>
        </rc_commands>
        <section PREFIX="AUTO1_" NAME="AUTO1">
          <define VALUE="0.8" NAME="MAX_ROLL"/>
          <define VALUE="0.8" NAME="MAX_PITCH"/>
        </section>
        <command_laws>
          <set VALUE="@ROLL" SERVO="AILEVON_LEFT"/>
          <set VALUE="-@ROLL" SERVO="AILEVON_RIGHT"/>
          <set VALUE="@THROTTLE" SERVO="THROTTLE"/>
          <set VALUE="@PITCH" SERVO="ELEVATOR"/>
          <set VALUE="@YAW" SERVO="RUDDER"/>
        </command_laws>
        <section PREFIX="COMMAND_" NAME="TRIM">
          <define VALUE="0" NAME="ROLL_TRIM"/>
          <define VALUE="788." NAME="PITCH_TRIM"/>
        </section>
        <section PREFIX="FAILSAFE_" NAME="FAILSAFE">
          <define VALUE="0.35" UNIT="%" NAME="DEFAULT_THROTTLE"/>
          <define VALUE="10.0" UNIT="deg" NAME="DEFAULT_ROLL"/>
          <define VALUE="5.0" UNIT="deg" NAME="DEFAULT_PITCH"/>
          <define VALUE="DEFAULT_CIRCLE_RADIUS" UNIT="m" NAME="HOME_RADIUS"/>
          <define VALUE="(MAX_DIST_FROM_HOME*1.5)" NAME="KILL_MODE_DISTANCE"/>
          <define VALUE="3" UNIT="s" NAME="DELAY_WITHOUT_GPS"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="-179" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="-21" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="79" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="4.17334785618" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="3.98885954135" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="4.40442339014" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.51562740288882" NAME="H_X"/>
          <define VALUE="-0.05707735220832" NAME="H_Y"/>
          <define VALUE="0.85490967783446" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="0.0" UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT"/>
          <define VALUE="5.9" UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT"/>
        </section>
        <section PREFIX="H_CTL_" NAME="HORIZONTAL CONTROL">
          <define VALUE="0.89" NAME="COURSE_PGAIN"/>
          <define VALUE="0.27" NAME="COURSE_DGAIN"/>
          <define VALUE="1.0" NAME="COURSE_PRE_BANK_CORRECTION"/>
          <define VALUE="45" UNIT="deg" NAME="ROLL_MAX_SETPOINT"/>
          <define VALUE="50" UNIT="deg" NAME="PITCH_MAX_SETPOINT"/>
          <define VALUE="-50" UNIT="deg" NAME="PITCH_MIN_SETPOINT"/>
          <define VALUE="12000" NAME="PITCH_PGAIN"/>
          <define VALUE="1.5" NAME="PITCH_DGAIN"/>
          <define VALUE="1273.88500977" NAME="ELEVATOR_OF_ROLL"/>
          <define VALUE="1." NAME="ROLL_SLEW"/>
          <define VALUE="7972.02783203" NAME="ROLL_ATTITUDE_GAIN"/>
          <define VALUE="500." NAME="ROLL_RATE_GAIN"/>
        </section>
        <section PREFIX="V_CTL_" NAME="VERTICAL CONTROL">
          <define VALUE="11.1" UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL"/>
          <define VALUE="0.183" NAME="ALTITUDE_PGAIN"/>
          <define VALUE="0.217" NAME="AIRSPEED_PGAIN"/>
          <define VALUE="10." NAME="ALTITUDE_MAX_CLIMB"/>
          <define VALUE="2." NAME="MAX_ACCELERATION"/>
          <define VALUE="0.205" NAME="ENERGY_TOT_PGAIN"/>
          <define VALUE="0.403" NAME="ENERGY_TOT_IGAIN"/>
          <define VALUE="0.403" NAME="ENERGY_DIFF_PGAIN"/>
          <define VALUE="0.259" NAME="ENERGY_DIFF_IGAIN"/>
          <define VALUE="7." NAME="GLIDE_RATIO"/>
          <define VALUE="0.5" NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE"/>
          <define VALUE="0." UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT"/>
          <define VALUE="0." NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN"/>
          <define VALUE="0.0" NAME="AUTO_THROTTLE_OF_AIRSPEED_PGAIN"/>
          <define VALUE="0.0" NAME="AUTO_THROTTLE_OF_AIRSPEED_IGAIN"/>
          <define VALUE="0.0" NAME="AUTO_PITCH_OF_AIRSPEED_PGAIN"/>
          <define VALUE="0.0" NAME="AUTO_PITCH_OF_AIRSPEED_IGAIN"/>
          <define VALUE="0.0" NAME="AUTO_PITCH_OF_AIRSPEED_DGAIN"/>
          <define VALUE="1" UNIT="m/s/s" NAME="THROTTLE_SLEW_LIMITER"/>
        </section>
        <section NAME="BAT">
          <define VALUE="((adc) - 505) * 124.0f" NAME="MilliAmpereOfAdc(adc)"/>
          <define VALUE="10.5" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="10" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="9.1" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
        </section>
        <section NAME="MISC">
          <define VALUE="14." UNIT="m/s" NAME="CLIMB_AIRSPEED"/>
          <define VALUE="16." UNIT="m/s" NAME="NOMINAL_AIRSPEED"/>
          <define VALUE="12." UNIT="m/s" NAME="GLIDE_AIRSPEED"/>
          <define VALUE="25." UNIT="m/s" NAME="RACE_AIRSPEED"/>
          <define VALUE="10." UNIT="m/s" NAME="STALL_AIRSPEED"/>
          <define VALUE="5." UNIT="s" NAME="CARROT"/>
          <define VALUE="80." NAME="DEFAULT_CIRCLE_RADIUS"/>
          <define VALUE="0." NAME="NAV_GLIDE_PITCH_TRIM"/>
        </section>
        <section PREFIX="NAV_CATAPULT_" NAME="CATAPULT">
          <define VALUE="0.75" UNIT="seconds" NAME="MOTOR_DELAY"/>
          <define VALUE="3.0" UNIT="seconds" NAME="HEADING_DELAY"/>
          <define VALUE="1.75" NAME="ACCELERATION_THRESHOLD"/>
          <define VALUE="15.0" UNIT="deg" NAME="INITIAL_PITCH"/>
          <define VALUE="1.0" NAME="INITIAL_THROTTLE"/>
        </section>
        <section PREFIX="APP_" NAME="GLS_APPROACH">
          <define VALUE="5" UNIT="deg" NAME="ANGLE"/>
          <define VALUE="10" UNIT="m" NAME="INTERCEPT_AF_SD"/>
          <define VALUE="13" UNIT="m/s" NAME="TARGET_SPEED"/>
        </section>
        <section PREFIX="DC_" NAME="DIGITAL_CAMERA">
          <define VALUE="1.5" UNIT="sec" NAME="AUTOSHOOT_PERIOD"/>
          <define VALUE="50" UNIT="meter" NAME="AUTOSHOOT_DISTANCE_INTERVAL"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="Malolo1" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="4" NAME="COMMANDS_NB"/>
          <define VALUE="throttle-cmd-norm, aileron-cmd-norm, elevator-cmd-norm, rudder-cmd-norm" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
          <define VALUE="4" NAME="JS_AXIS_MODE"/>
          <define VALUE="TRUE" NAME="BYPASS_AHRS"/>
          <define VALUE="TRUE" NAME="BYPASS_INS"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Ap">
          <mode NAME="default">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1" NAME="AIRSPEED"/>
            <message PERIOD="5.1" NAME="ALIVE"/>
            <message PERIOD="0.25" NAME="GPS"/>
            <message PERIOD="1." NAME="NAVIGATION"/>
            <message PERIOD="0.1" NAME="ATTITUDE"/>
            <message PERIOD="0.5" NAME="ESTIMATOR"/>
            <message PERIOD="2.4" NAME="ENERGY"/>
            <message PERIOD="0.5" NAME="WP_MOVED"/>
            <message PERIOD="1.05" NAME="CIRCLE"/>
            <message PERIOD="0.2" NAME="DESIRED"/>
            <message PERIOD="1.1" NAME="BAT"/>
            <message PERIOD="1.2" NAME="SEGMENT"/>
            <message PERIOD="2.1" NAME="CALIBRATION"/>
            <message PERIOD="9." NAME="NAVIGATION_REF"/>
            <message PERIOD="4.9" NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="SETTINGS"/>
            <message PERIOD="2.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="1.5" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="IR_SENSORS"/>
            <message PERIOD="2.1" NAME="SURVEY"/>
            <message PERIOD="2.0" NAME="GPS_SOL"/>
            <message PERIOD=".8" NAME="IMU_ACCEL"/>
            <message PERIOD=".6" NAME="IMU_GYRO"/>
            <message PERIOD="1.3" NAME="IMU_MAG"/>
            <message PERIOD="0.5" NAME="CAM"/>
            <message PERIOD="1.0" NAME="CAM_POINT"/>
            <message PERIOD="5" NAME="COMMANDS"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
          </mode>
          <mode NAME="minimal">
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="4" NAME="ATTITUDE"/>
            <message PERIOD="1.05" NAME="GPS"/>
            <message PERIOD="1.3" NAME="ESTIMATOR"/>
            <message PERIOD="1.4" NAME="WP_MOVED"/>
            <message PERIOD="3.05" NAME="CIRCLE"/>
            <message PERIOD="4.05" NAME="DESIRED"/>
            <message PERIOD="1.1" NAME="BAT"/>
            <message PERIOD="3.2" NAME="SEGMENT"/>
            <message PERIOD="5.1" NAME="CALIBRATION"/>
            <message PERIOD="9." NAME="NAVIGATION_REF"/>
            <message PERIOD="3." NAME="NAVIGATION"/>
            <message PERIOD="5." NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="1.5" NAME="DL_VALUE"/>
            <message PERIOD="5.2" NAME="IR_SENSORS"/>
            <message PERIOD="2.1" NAME="SURVEY"/>
            <message PERIOD="5.0" NAME="GPS_SOL"/>
          </mode>
          <mode NAME="extremal">
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="GPS"/>
            <message PERIOD="5.3" NAME="ESTIMATOR"/>
            <message PERIOD="10.1" NAME="BAT"/>
            <message PERIOD="10.2" NAME="DESIRED"/>
            <message PERIOD="5.4" NAME="NAVIGATION"/>
            <message PERIOD="7.5" NAME="PPRZ_MODE"/>
            <message PERIOD="8." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.7" NAME="DATALINK_REPORT"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD="0.5" NAME="BARO_RAW"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO"/>
            <message PERIOD=".075" NAME="IMU_ACCEL"/>
            <message PERIOD=".1" NAME="IMU_MAG"/>
          </mode>
          <mode NAME="debug_imu">
            <message PERIOD="0.1" NAME="ATTITUDE"/>
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="GPS"/>
            <message PERIOD="5.3" NAME="ESTIMATOR"/>
            <message PERIOD="10.1" NAME="BAT"/>
            <message PERIOD="10.2" NAME="DESIRED"/>
            <message PERIOD="5.4" NAME="NAVIGATION"/>
            <message PERIOD="5.5" NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.7" NAME="DATALINK_REPORT"/>
            <message PERIOD=".5" NAME="IMU_ACCEL"/>
            <message PERIOD=".5" NAME="IMU_GYRO"/>
            <message PERIOD=".5" NAME="IMU_MAG"/>
            <message PERIOD=".5" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".5" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".5" NAME="IMU_MAG_RAW"/>
          </mode>
        </process>
        <process NAME="Fbw">
          <mode NAME="default">
            <message PERIOD="5" NAME="COMMANDS"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD="5" NAME="ACTUATORS"/>
          </mode>
          <mode NAME="debug">
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="COMMANDS"/>
            <message PERIOD="1" NAME="FBW_STATUS"/>
            <message PERIOD="5" NAME="ACTUATORS"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting VAR="flight_altitude" STEP="10" SHORTNAME="altitude" MIN="0" MAX="1000"/>
            <dl_setting VAR="nav_course" STEP="1" MIN="0" MAX="360"/>
            <dl_setting VAR="nav_shift" STEP="5" SHORTNAME="inc. shift" MODULE="firmwares/fixedwing/nav" MIN="-10" MAX="10" HANDLER="IncreaseShift"/>
            <dl_setting VAR="autopilot_flight_time" STEP="1" SHORTNAME="flight time" MODULE="autopilot" MIN="0" MAX="0" HANDLER="ResetFlightTimeAndLaunch"/>
            <dl_setting VAR="nav_radius" STEP="10" MODULE="firmwares/fixedwing/nav" MIN="-200" MAX="200" HANDLER="SetNavRadius">
              <strip_button VALUE="1" NAME="Circle right" ICON="circle-right.png" GROUP="circle"/>
              <strip_button VALUE="-1" NAME="Circle left" ICON="circle-left.png" GROUP="circle"/>
              <key_press VALUE="1" KEY="greater"/>
              <key_press VALUE="-1" KEY="less"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting VAR="pprz_mode" VALUES="MANUAL|AUTO1|AUTO2|HOME|NOGPS|FAILSAFE" STEP="1" MODULE="autopilot" MIN="0" MAX="2"/>
            <dl_setting VAR="launch" STEP="1" MIN="0" MAX="1"/>
            <dl_setting VAR="kill_throttle" STEP="1" MIN="0" MAX="1"/>
            <dl_setting VAR="gps.reset" STEP="1" SHORTNAME="GPS reset" MODULE="subsystems/gps" MIN="0" MAX="2" HANDLER="Reset"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="control">
            <dl_settings NAME="trim">
              <dl_setting VAR="ap_state->command_roll_trim" STEP="1" SHORTNAME="roll_trim" PARAM="COMMAND_ROLL_TRIM" MODULE="inter_mcu" MIN="-960" MAX="960"/>
              <dl_setting VAR="ap_state->command_pitch_trim" STEP="1" SHORTNAME="pitch_trim" PARAM="COMMAND_PITCH_TRIM" MIN="-960" MAX="960"/>
            </dl_settings>
            <dl_settings NAME="attitude">
              <dl_setting VAR="h_ctl_roll_pgain" STEP="250" SHORTNAME="roll_pgain" MODULE="stabilization/stabilization_attitude" MIN="000" MAX="25000"/>
              <dl_setting VAR="h_ctl_roll_max_setpoint" UNIT="rad" STEP="1." SHORTNAME="max_roll" PARAM="H_CTL_ROLL_MAX_SETPOINT" MIN="0" MAX="60" ALT_UNIT="deg"/>
              <dl_setting VAR="h_ctl_pitch_pgain" STEP="250" SHORTNAME="pitch_pgain" PARAM="H_CTL_PITCH_PGAIN" MIN="0" MAX="25000"/>
              <dl_setting VAR="h_ctl_pitch_dgain" STEP="10" SHORTNAME="pitch_dgain" PARAM="H_CTL_PITCH_DGAIN" MIN="0" MAX="50000"/>
              <dl_setting VAR="h_ctl_elevator_of_roll" STEP="100" SHORTNAME="elevator_of_roll" PARAM="H_CTL_ELEVATOR_OF_ROLL" MIN="0" MAX="5000"/>
              <dl_setting VAR="h_ctl_aileron_of_throttle" STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" MAX="5000"/>
              <dl_setting VAR="h_ctl_roll_attitude_gain" STEP="250" SHORTNAME="roll attitude pgain" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" MIN="0" MAX="15000"/>
              <dl_setting VAR="h_ctl_roll_rate_gain" STEP="250" SHORTNAME="roll rate gain" PARAM="H_CTL_ROLL_RATE_GAIN" MIN="0" MAX="15000"/>
            </dl_settings>
            <dl_settings NAME="climb_accel">
              <dl_setting VAR="v_ctl_altitude_pgain" STEP="0.01" SHORTNAME="alt_pgain" PARAM="V_CTL_ALTITUDE_PGAIN" MODULE="guidance/energy_ctrl" MIN="0" MAX="2.0"/>
              <dl_setting VAR="v_ctl_airspeed_pgain" STEP="0.01" SHORTNAME="speed_pgain" PARAM="V_CTL_AIRSPEED_PGAIN" MIN="0" MAX="1.0"/>
              <dl_setting VAR="v_ctl_max_climb" STEP="0.5" SHORTNAME="max_climb" PARAM="V_CTL_MAX_CLIMB" MIN="-10" MAX="10.0"/>
              <dl_setting VAR="v_ctl_max_acceleration" STEP="0.05" SHORTNAME="max_acc_g" PARAM="V_CTL_MAX_ACCELERATION" MIN="-2" MAX="2.0"/>
            </dl_settings>
            <dl_settings NAME="energy_loop">
              <dl_setting VAR="v_ctl_auto_airspeed_setpoint" STEP="0.5" SHORTNAME="airspeed sp" MIN="8.0" MAX="45"/>
              <dl_setting VAR="v_ctl_auto_throttle_nominal_cruise_throttle" STEP="0.05" SHORTNAME="cruise throttle" MIN="0.0" MAX="1"/>
              <dl_setting VAR="v_ctl_auto_throttle_nominal_cruise_pitch" STEP="0.05" SHORTNAME="cruise pitch" MIN="0.0" MAX="1"/>
              <dl_setting VAR="v_ctl_desired_acceleration" STEP="0.01" SHORTNAME="acc_cmd" MIN="0" MAX="1.0"/>
              <dl_setting VAR="v_ctl_auto_throttle_climb_throttle_increment" STEP="0.01" SHORTNAME="throttle_incr" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" MIN="0" MAX="1"/>
              <dl_setting VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" STEP="0.01" SHORTNAME="pitch_of_vz" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" MIN="0" MAX="1"/>
              <dl_setting VAR="v_ctl_auto_throttle_of_airspeed_pgain" STEP="0.01" SHORTNAME="P_th_air" MIN="0" MAX="1."/>
              <dl_setting VAR="v_ctl_auto_throttle_of_airspeed_igain" STEP="0.001" SHORTNAME="I_th_air" MIN="0" MAX="0.1"/>
              <dl_setting VAR="v_ctl_auto_pitch_of_airspeed_pgain" STEP="0.001" SHORTNAME="P_pitch_air" MIN="0" MAX="1."/>
              <dl_setting VAR="v_ctl_auto_pitch_of_airspeed_igain" STEP="0.001" SHORTNAME="I_pitch_air" MIN="0" MAX="0.1"/>
              <dl_setting VAR="v_ctl_auto_pitch_of_airspeed_dgain" STEP="0.01" SHORTNAME="D_pitch_air" MIN="0" MAX="5."/>
              <dl_setting VAR="v_ctl_energy_total_pgain" STEP="0.01" SHORTNAME="P_en_tot" PARAM="V_CTL_ENERGY_TOT_PGAIN" MIN="0" MAX="1."/>
              <dl_setting VAR="v_ctl_energy_total_igain" STEP="0.01" SHORTNAME="I_en_tot" PARAM="V_CTL_ENERGY_TOT_IGAIN" MIN="0" MAX="1."/>
              <dl_setting VAR="v_ctl_energy_diff_pgain" STEP="0.01" SHORTNAME="P_en_dis" PARAM="V_CTL_ENERGY_DIFF_PGAIN" MIN="0" MAX="1."/>
              <dl_setting VAR="v_ctl_energy_diff_igain" STEP="0.01" SHORTNAME="I_en_dis" PARAM="V_CTL_ENERGY_DIFF_IGAIN" MIN="0" MAX="1."/>
            </dl_settings>
            <dl_settings NAME="groundspeed">
              <dl_setting VAR="v_ctl_auto_groundspeed_setpoint" STEP="0.1" SHORTNAME="gs_sp" PARAM="V_CTL_AUTO_GROUNDSPEED_SETPOINT" MODULE="guidance/energy_ctrl" MIN="5" MAX="40"/>
              <dl_setting VAR="v_ctl_auto_groundspeed_pgain" STEP="0.01" SHORTNAME="gs_pgain" PARAM="V_CTL_AUTO_GROUNDSPEED_PGAIN" MIN="0" MAX="2"/>
              <dl_setting VAR="v_ctl_auto_groundspeed_igain" STEP="0.01" SHORTNAME="gs_igain" PARAM="V_CTL_AUTO_GROUNDSPEED_IGAIN" MIN="0" MAX="2"/>
            </dl_settings>
            <dl_settings NAME="nav">
              <dl_setting VAR="h_ctl_course_pgain" STEP="0.05" SHORTNAME="course pgain" PARAM="H_CTL_COURSE_PGAIN" MIN="0.1" MAX="3"/>
              <dl_setting VAR="h_ctl_course_dgain" STEP="0.1" SHORTNAME="course dgain" PARAM="H_CTL_COURSE_DGAIN" MIN="0" MAX="2"/>
              <dl_setting VAR="h_ctl_course_pre_bank_correction" STEP="0.05" SHORTNAME="pre bank cor" PARAM="H_CTL_COURSE_PRE_BANK_CORRECTION" MIN="0.1" MAX="2"/>
              <dl_setting VAR="nav_glide_pitch_trim" STEP="0.05" SHORTNAME="glide pitch trim" PARAM="NAV_GLIDE_PITCH_TRIM" MIN="0.0" MAX="1"/>
              <dl_setting VAR="h_ctl_roll_slew" STEP="0.01" SHORTNAME="roll slew" MIN="0.02" MAX="1"/>
              <dl_setting VAR="nav_radius" STEP="5" MIN="-500" MAX="500"/>
              <dl_setting VAR="nav_course" STEP="5" MIN="0" MAX="359"/>
              <dl_setting VAR="nav_mode" STEP="1" MIN="1" MAX="2"/>
              <dl_setting VAR="nav_climb" STEP="0.5" MIN="-5" MAX="5"/>
              <dl_setting VAR="fp_pitch" STEP="1" MIN="-15" MAX="15"/>
              <dl_setting VAR="nav_shift" STEP="5" SHORTNAME="inc. shift" MODULE="firmwares/fixedwing/nav" MIN="-50" MAX="50" HANDLER="IncreaseShift"/>
              <dl_setting VAR="nav_ground_speed_setpoint" STEP="0.5" SHORTNAME="ground speed" MIN="5" MAX="50"/>
              <dl_setting VAR="nav_ground_speed_pgain" STEP="0.01" SHORTNAME="ground speed pgain" MIN="0" MAX="0.2"/>
              <dl_setting VAR="nav_survey_shift" STEP="5" MIN="50" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="performance">
            <dl_settings NAME="estimates">
              <dl_setting VAR="ac_char_climb_pitch" STEP="1" SHORTNAME="climb_pitch" MODULE="guidance/energy_ctrl" MIN="-1" MAX="1"/>
              <dl_setting VAR="ac_char_climb_max" STEP="1" SHORTNAME="climb_max" MIN="-1" MAX="1"/>
              <dl_setting VAR="ac_char_descend_pitch" STEP="1" SHORTNAME="descend_pitch" MIN="-1" MAX="1"/>
              <dl_setting VAR="ac_char_descend_max" STEP="1" SHORTNAME="descend_max" MIN="-1" MAX="1"/>
              <dl_setting VAR="ac_char_cruise_throttle" STEP="1" SHORTNAME="cruise_thr" MIN="-1" MAX="1"/>
              <dl_setting VAR="ac_char_cruise_pitch" STEP="1" SHORTNAME="cruise_pitch" MIN="-1" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="Quad_Navstik" ac_id="50" airframe="airframes/examples/quadrotor_navstik.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/rotorcraft_basic.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_guidance.xml [settings/control/stabilization_att_int.xml] [settings/control/stabilization_rate.xml] settings/estimation/ahrs_int_cmpl_quat.xml settings/control/stabilization_att_indi.xml" settings_modules="modules/gps_ubx_ucenter.xml" gui_color="#710080">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="Rotorcraft Basic (Enac)" max_dist_from_home="150" lon0="1 28 52.61" lat0="43 33 50.83" ground_alt="147" alt="152">
          <header>#include &quot;autopilot.h&quot;</header>
          <waypoints>
            <waypoint y="0.0" x="0.0" name="HOME"/>
            <waypoint y="5.0" x="0.0" name="CLIMB"/>
            <waypoint y="-5.0" x="-2.0" name="STDBY"/>
            <waypoint y="-13.9" x="3.6" name="p1"/>
            <waypoint y="-48.2" x="27.5" name="p2"/>
            <waypoint y="-19.6" x="16.7" name="p3"/>
            <waypoint y="-40.7" x="13.7" name="p4"/>
            <waypoint y="-50" x="-20" name="CAM" height="2."/>
            <waypoint y="-10.9" x="5.6" name="TD"/>
          </waypoints>
          <blocks>
            <block name="Wait GPS" no="0">
              <call fun="NavKillThrottle()" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <call fun="NavKillThrottle()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block name="Start Engine" no="3">
              <call fun="NavResurrect()" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff" name="Takeoff" no="4">
              <exception deroute="Standby" cond="stateGetPositionEnu_f()->z > 2.0"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="5">
              <stay wp="STDBY" no="0"/>
            </block>
            <block name="stay_p1" no="6">
              <stay wp="p1" no="0"/>
            </block>
            <block name="go_p2" no="7">
              <call fun="nav_set_heading_deg(90)" no="0"/>
              <go wp="p2" no="1"/>
              <deroute block="stay_p1" no="2"/>
            </block>
            <block name="line_p1_p2" no="8">
              <go wp="p2" hmode="route" from="p1" no="0"/>
              <stay wp="p2" until="stage_time>10" no="1"/>
              <go wp="p1" hmode="route" from="p2" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="route" no="9">
              <go wp="p3" hmode="route" from="p1" no="0"/>
              <go wp="p4" hmode="route" from="p3" no="1"/>
              <go wp="p1" hmode="route" from="p4" no="2"/>
              <deroute block="stay_p1" no="3"/>
            </block>
            <block name="test yaw" no="10">
              <go wp="p1" no="0"/>
              <for var="i" to="16" from="1" no="2">
                <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
              </for>
              <deroute block="Standby" no="5"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="circle CAM" no="11">
              <circle wp="CAM" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land Here" name="land here" no="12">
              <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
            </block>
            <block name="land" no="13">
              <go wp="TD" no="0"/>
            </block>
            <block name="flare" no="14">
              <exception deroute="Holding point" cond="NavDetectGround()"/>
              <exception deroute="landed" cond="!nav_is_in_flight()"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
            </block>
            <block name="landed" no="15">
              <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
            </block>
            <block name="HOME" no="16">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="16" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="15" block_name="landed" stage="0">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="0"/>
          </stage>
          <stage block="14" block_name="flare" stage="1">
            <stay wp="TD" vmode="climb" climb="nav_descend_vspeed" no="1"/>
          </stage>
          <stage block="14" block_name="flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="13" block_name="land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="12" block_name="land here" stage="0">
            <call fun="NavSetWaypointHere(WP_TD)" no="0"/>
          </stage>
          <stage block="11" block_name="circle CAM" stage="0">
            <circle wp="CAM" radius="nav_radius" no="0"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="5">
            <deroute block="Standby" no="5"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="3">
            <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
          </stage>
          <stage block="10" block_name="test yaw" stage="2">
            <for var="i" to="16" from="1" no="2">
              <heading until="stage_time > 3" course="90 * $i" alt="WaypointAlt(WP_p1)" no="3"/>
            </for>
          </stage>
          <stage block="10" block_name="test yaw" stage="0">
            <go wp="p1" no="0"/>
          </stage>
          <stage block="9" block_name="route" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="9" block_name="route" stage="2">
            <go wp="p1" hmode="route" from="p4" no="2"/>
          </stage>
          <stage block="9" block_name="route" stage="1">
            <go wp="p4" hmode="route" from="p3" no="1"/>
          </stage>
          <stage block="9" block_name="route" stage="0">
            <go wp="p3" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="3">
            <deroute block="stay_p1" no="3"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="2">
            <go wp="p1" hmode="route" from="p2" no="2"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="1">
            <stay wp="p2" until="stage_time>10" no="1"/>
          </stage>
          <stage block="8" block_name="line_p1_p2" stage="0">
            <go wp="p2" hmode="route" from="p1" no="0"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="2">
            <deroute block="stay_p1" no="2"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="1">
            <go wp="p2" no="1"/>
          </stage>
          <stage block="7" block_name="go_p2" stage="0">
            <call fun="nav_set_heading_deg(90)" no="0"/>
          </stage>
          <stage block="6" block_name="stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="5" block_name="Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="1">
            <stay wp="CLIMB" vmode="climb" climb="nav_climb_vspeed" no="1"/>
          </stage>
          <stage block="4" block_name="Takeoff" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="3" block_name="Start Engine" stage="0">
            <call fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0" roll="0" pitch="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="Quadrotor Navstik">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="navstik_1.0">
            <configure VALUE="i2c3" NAME="ACTUATORS_ASCTEC_V2_I2C_DEV"/>
            <define VALUE="1" NAME="ACTUATORS_START_DELAY"/>
          </target>
          <target NAME="nps" BOARD="pc">
            <subsystem TYPE="jsbsim" NAME="fdm"/>
          </target>
          <subsystem TYPE="spektrum" NAME="radio_control">
            <define VALUE="RADIO_GEAR" NAME="RADIO_KILL_SWITCH"/>
            <define VALUE="RADIO_AUX1" NAME="RADIO_MODE"/>
          </subsystem>
          <subsystem NAME="motor_mixing"/>
          <subsystem TYPE="asctec_v2" NAME="actuators"/>
          <subsystem TYPE="xbee_api" NAME="telemetry"/>
          <subsystem TYPE="navstik" NAME="imu"/>
          <subsystem TYPE="ublox" NAME="gps"/>
          <subsystem TYPE="indi" NAME="stabilization"/>
          <subsystem TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="FALSE" NAME="USE_MAGNETOMETER"/>
          </subsystem>
          <subsystem TYPE="hff" NAME="ins"/>
        </firmware>
        <firmware NAME="test_progs">
          <configure VALUE="UART1" NAME="MODEM_PORT"/>
          <target NAME="test_sys_time_timer" BOARD="navstik_1.0"/>
          <target NAME="test_telemetry" BOARD="navstik_1.0"/>
          <target NAME="test_actuators_pwm_sin" BOARD="navstik_1.0"/>
        </firmware>
        <modules>
          <load NAME="gps_ubx_ucenter.xml"/>
        </modules>
        <servos DRIVER="Asctec_v2">
          <servo NO="0" NEUTRAL="3" NAME="FRONT" MIN="0" MAX="200"/>
          <servo NO="1" NEUTRAL="3" NAME="BACK" MIN="0" MAX="200"/>
          <servo NO="2" NEUTRAL="3" NAME="LEFT" MIN="0" MAX="200"/>
          <servo NO="3" NEUTRAL="3" NAME="RIGHT" MIN="0" MAX="200"/>
        </servos>
        <commands>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="0"/>
        </commands>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="4" NAME="NB_MOTOR"/>
          <define VALUE="256" NAME="SCALE"/>
          <define VALUE="{ -256, -256,  256,  256 }" NAME="ROLL_COEF"/>
          <define VALUE="{  256, -256, -256,  256 }" NAME="PITCH_COEF"/>
          <define VALUE="{ -256,  256, -256,  256 }" NAME="YAW_COEF"/>
          <define VALUE="{  256,  256,  256,  256 }" NAME="THRUST_COEF"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_motors_on,FALSE,values)"/>
          <set VALUE="motor_mixing.commands[0]" SERVO="FRONT"/>
          <set VALUE="motor_mixing.commands[1]" SERVO="BACK"/>
          <set VALUE="motor_mixing.commands[2]" SERVO="LEFT"/>
          <set VALUE="motor_mixing.commands[3]" SERVO="RIGHT"/>
        </command_laws>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="11" NAME="ACCEL_X_NEUTRAL"/>
          <define VALUE="11" NAME="ACCEL_Y_NEUTRAL"/>
          <define VALUE="-25" NAME="ACCEL_Z_NEUTRAL"/>
          <define VALUE="-179" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="-21" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="79" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="4.17334785618" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="3.98885954135" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="4.40442339014" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3770441" NAME="H_X"/>
          <define VALUE="0.0193986" NAME="H_Y"/>
          <define VALUE="0.9259921" NAME="H_Z"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="10000" NAME="SP_MAX_P"/>
          <define VALUE="10000" NAME="SP_MAX_Q"/>
          <define VALUE="10000" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="4" NAME="REF_TAU"/>
          <define VALUE="400" NAME="GAIN_P"/>
          <define VALUE="400" NAME="GAIN_Q"/>
          <define VALUE="350" NAME="GAIN_R"/>
          <define VALUE="75" NAME="IGAIN_P"/>
          <define VALUE="75" NAME="IGAIN_Q"/>
          <define VALUE="50" NAME="IGAIN_R"/>
          <define VALUE="300" NAME="DDGAIN_P"/>
          <define VALUE="300" NAME="DDGAIN_Q"/>
          <define VALUE="300" NAME="DDGAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.150" NAME="G1_P"/>
          <define VALUE="0.150" NAME="G1_Q"/>
          <define VALUE="0.005119" NAME="G1_R"/>
          <define VALUE="0.2166" NAME="G2_R"/>
          <define VALUE="900.0" NAME="REF_ERR_P"/>
          <define VALUE="900.0" NAME="REF_ERR_Q"/>
          <define VALUE="500.0" NAME="REF_ERR_R"/>
          <define VALUE="38.0" NAME="REF_RATE_P"/>
          <define VALUE="38.0" NAME="REF_RATE_Q"/>
          <define VALUE="25.0" NAME="REF_RATE_R"/>
          <define VALUE="50.0" NAME="FILT_OMEGA"/>
          <define VALUE="0.55" NAME="FILT_ZETA"/>
          <define VALUE="50.0" NAME="FILT_OMEGA_R"/>
          <define VALUE="0.55" NAME="FILT_ZETA_R"/>
          <define VALUE="0.2" NAME="ACT_DYN_P"/>
          <define VALUE="0.2" NAME="ACT_DYN_Q"/>
          <define VALUE="0.2" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="STABILIZATION_ATTITUDE">
          <define VALUE="45." UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45." UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="90." UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="250" NAME="DEADBAND_R"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.85" NAME="REF_ZETA_P"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="800" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.85" NAME="REF_ZETA_Q"/>
          <define VALUE="300." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(7000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="500" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.85" NAME="REF_ZETA_R"/>
          <define VALUE="180." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(1800.)" NAME="REF_MAX_RDOT"/>
          <define VALUE="900" NAME="PHI_PGAIN"/>
          <define VALUE="200" NAME="PHI_DGAIN"/>
          <define VALUE="200" NAME="PHI_IGAIN"/>
          <define VALUE="900" NAME="THETA_PGAIN"/>
          <define VALUE="200" NAME="THETA_DGAIN"/>
          <define VALUE="200" NAME="THETA_IGAIN"/>
          <define VALUE="900" NAME="PSI_PGAIN"/>
          <define VALUE="200" NAME="PSI_DGAIN"/>
          <define VALUE="10" NAME="PSI_IGAIN"/>
          <define VALUE="75" NAME="PHI_DDGAIN"/>
          <define VALUE="75" NAME="THETA_DDGAIN"/>
          <define VALUE="75" NAME="PSI_DDGAIN"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="POS_BFP_OF_REAL(-10.)" NAME="MIN_ERR_Z"/>
          <define VALUE="POS_BFP_OF_REAL( 10.)" NAME="MAX_ERR_Z"/>
          <define VALUE="SPEED_BFP_OF_REAL(-10.)" NAME="MIN_ERR_ZD"/>
          <define VALUE="SPEED_BFP_OF_REAL( 10.)" NAME="MAX_ERR_ZD"/>
          <define VALUE="2000000" NAME="MAX_SUM_ERR"/>
          <define VALUE="150" NAME="HOVER_KP"/>
          <define VALUE="80" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.5" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="TRUE" NAME="USE_SPEED_REF"/>
          <define VALUE="50" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="70" NAME="AGAIN"/>
          <define VALUE="20" NAME="IGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="ne_motor, se_motor, sw_motor, nw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="10.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="false" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="2000"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps|test_ahrs">
        <dl_settings>
          <dl_settings NAME="AHRS">
            <dl_setting VAR="ahrs_icq.gravity_heuristic_factor" TYPE="uint8" STEP="1" SHORTNAME="g_heuristic" PERSISTENT="true" PARAM="AHRS_GRAVITY_HEURISTIC_FACTOR" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0" MAX="50"/>
            <dl_setting VAR="ahrs_icq.accel_omega" UNIT="rad/s" TYPE="float" STEP="0.02" SHORTNAME="acc_omega" PERSISTENT="true" PARAM="AHRS_ACCEL_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.2" HANDLER="SetAccelOmega"/>
            <dl_setting VAR="ahrs_icq.accel_zeta" TYPE="float" STEP="0.05" SHORTNAME="acc_zeta" PERSISTENT="true" PARAM="AHRS_ACCEL_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetAccelZeta"/>
            <dl_setting VAR="ahrs_icq.mag_omega" UNIT="rad/s" TYPE="float" STEP="0.01" SHORTNAME="mag_omega" PERSISTENT="true" PARAM="AHRS_MAG_OMEGA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.02" MAX="0.1" HANDLER="SetMagOmega"/>
            <dl_setting VAR="ahrs_icq.mag_zeta" TYPE="float" STEP="0.05" SHORTNAME="mag_zeta" PERSISTENT="true" PARAM="AHRS_MAG_ZETA" MODULE="subsystems/ahrs/ahrs_int_cmpl_quat" MIN="0.7" MAX="1.5" HANDLER="SetMagZeta"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="indi">
            <dl_setting VAR="reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.p" STEP="1" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.q" STEP="1" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.r" STEP="0.01" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="use_adaptive_indi" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="SkyWalker" ac_id="2" airframe="airframes/CDW/yapa_xsens.xml" radio="radios/R6107SP_7ch.xml" telemetry="telemetry/default_fixedwing_imu_9k6.xml" flight_plan="flight_plans/versatile.xml" settings="settings/fixedwing_basic.xml settings/control/ctl_basic.xml settings/estimation/ins_neutrals.xml settings/control/tune_agr_climb.xml" settings_modules="modules/light.xml modules/digital_cam.xml" gui_color="blue">
      <radio SYNC_MIN="4000" SYNC_MAX="15000" PULSE_TYPE="NEGATIVE" NAME="FASST TX Module" DATA_MIN="700" DATA_MAX="2300">
        <channel NEUTRAL="1500" MIN="1900" MAX="1100" FUNCTION="ROLL" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="PITCH" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1100" MIN="1100" MAX="1900" FUNCTION="THROTTLE" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="YAW" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="MODE" CTL="E" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="EXTRA1" CTL="F" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="1100" MAX="1900" FUNCTION="FLAPS" CTL="G" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="25" qfu="270" name="Versatile" max_dist_from_home="1500" lon0="1.2729" lat0="43.4622" home_mode_height="50" ground_alt="185" alt="260">
          <header>#include &quot;subsystems/datalink/datalink.h&quot;</header>
          <waypoints>
            <waypoint y="0" x="0" name="HOME"/>
            <waypoint y="80" x="20" name="STDBY"/>
            <waypoint y="102.2" x="44.8" name="1"/>
            <waypoint y="122.9" x="-63.5" name="2"/>
            <waypoint y="-21.2" x="-11.5" name="MOB"/>
            <waypoint y="80.4" x="-151.6" name="S1"/>
            <waypoint y="214.9" x="180.1" name="S2"/>
            <waypoint y="-10" x="200" name="AF" alt="215.0"/>
            <waypoint y="20.0" x="80.0" name="TD" alt="185.0"/>
            <waypoint y="-23.0" x="26.9" name="BASELEG"/>
            <waypoint y="0" x="-100" name="_1"/>
            <waypoint y="200" x="-100" name="_2"/>
            <waypoint y="200" x="100" name="_3"/>
            <waypoint y="0" x="100" name="_4"/>
            <waypoint y="35.4" x="-122.5" name="CLIMB"/>
          </waypoints>
          <sectors>
            <sector name="Square">
              <corner name="_1"/>
              <corner name="_2"/>
              <corner name="_3"/>
              <corner name="_4"/>
            </sector>
          </sectors>
          <exceptions/>
          <blocks>
            <block name="Wait GPS" no="0">
              <set var="kill_throttle" value="1" no="0"/>
              <while cond="!GpsFixValid()" no="1"/>
            </block>
            <block name="Geo init" no="1">
              <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
              <call fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Holding point" no="2">
              <set var="kill_throttle" value="1" no="0"/>
              <attitude vmode="throttle" throttle="0" roll="0" no="1"/>
            </block>
            <block strip_icon="takeoff.png" strip_button="Takeoff (wp CLIMB)" name="Takeoff" no="3">
              <exception deroute="Standby" cond="GetPosAlt() > GetAltRef()+25"/>
              <set var="kill_throttle" value="0" no="0"/>
              <go wp="CLIMB" no="1"/>
            </block>
            <block strip_icon="home.png" strip_button="Standby" name="Standby" no="4">
              <circle wp="STDBY" radius="nav_radius" no="0"/>
            </block>
            <block strip_icon="line.png" strip_button="Line (wp 1-2)" name="Line 1-2" group="extra_pattern" no="5">
              <call fun="nav_line_setup()" no="0"/>
              <call fun="nav_line_run(WP_1, WP_2, nav_radius)" no="1"/>
            </block>
            <block strip_icon="eight.png" strip_button="Figure 8 (wp 1-2)" name="Figure 8 around wp 1" no="6">
              <eight turn_around="2" radius="nav_radius" center="1" no="1"/>
            </block>
            <block strip_icon="oval.png" strip_button="Oval (wp 1-2)" name="Oval 1-2" no="7">
              <oval radius="nav_radius" p2="2" p1="1" no="1"/>
            </block>
            <block strip_icon="mob.png" strip_button="Circle around here" name="MOB" no="8">
              <call fun="NavSetWaypointHere(WP_MOB)" no="0"/>
              <circle wp="MOB" radius="100" no="1"/>
            </block>
            <block name="Auto pitch (circle wp 1)" no="9">
              <circle wp="1" throttle="0.7" radius="75" pitch="auto" no="0"/>
            </block>
            <block name="Climb 75% throttle" no="10">
              <circle wp="1" vmode="throttle" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" throttle="0.75" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="10" no="0"/>
            </block>
            <block name="Climb 0m/s" no="11">
              <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="nav_radius" climb="0" no="0"/>
            </block>
            <block name="Climb 1m/s" no="12">
              <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="5" climb="1" no="0"/>
            </block>
            <block name="Climb nav_climb m/s" no="13">
              <circle wp="1" vmode="climb" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" radius="nav_radius" climb="nav_climb" no="0"/>
            </block>
            <block name="Circle 0% throttle" no="14">
              <circle wp="1" vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" no="0"/>
              <deroute block="Standby" no="1"/>
            </block>
            <block name="Oval 0% throttle" no="15">
              <oval vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" p2="2" p1="1" no="1"/>
              <deroute block="Standby" no="2"/>
            </block>
            <block name="Route 1-2" no="16">
              <go wp="2" hmode="route" from="1" approaching_time="0" no="0"/>
            </block>
            <block name="Stack wp 2" no="17">
              <circle wp="2" radius="75" no="0"/>
            </block>
            <block name="Route 2-1" no="18">
              <go wp="1" hmode="route" from="2" approaching_time="0" no="0"/>
            </block>
            <block name="Stack wp 1" no="19">
              <circle wp="1" radius="75" no="0"/>
            </block>
            <block name="Glide 1-2" no="20">
              <go wp="2" vmode="glide" hmode="route" from="1" no="0"/>
              <deroute block="Standby" no="1"/>
            </block>
            <block strip_icon="survey.png" strip_button="Survey (wp S1-S2)" name="Survey S1-S2" no="21">
              <survey_rectangle wp2="S2" wp1="S1" grid="150" no="1"/>
            </block>
            <block strip_icon="land-right.png" strip_button="Land right (wp AF-TD)" name="Land Right AF-TD" no="22">
              <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="0"/>
              <deroute block="land" no="1"/>
            </block>
            <block strip_icon="land-left.png" strip_button="Land left (wp AF-TD)" name="Land Left AF-TD" no="23">
              <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="0"/>
              <deroute block="land" no="1"/>
            </block>
            <block name="land" no="24">
              <call fun="nav_compute_baseleg(WP_AF, WP_TD, WP_BASELEG, nav_radius)" no="0"/>
              <circle wp="BASELEG" until="NavCircleCount() > 0.5" radius="nav_radius" no="1"/>
              <set var="v_ctl_auto_throttle_cruise_throttle" value="V_CTL_AUTO_THROTTLE_MIN_CRUISE_THROTTLE" no="2"/>
              <circle wp="BASELEG" until="NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-(nav_radius/fabs(nav_radius))*10) && 10 > fabs(GetPosAlt() - WaypointAlt(WP_BASELEG))" radius="nav_radius" no="3"/>
            </block>
            <block name="final" no="25">
              <exception deroute="flare" cond="GetAltRef() + 10 > GetPosAlt()"/>
              <go wp="TD" vmode="glide" hmode="route" from="AF" no="0"/>
            </block>
            <block name="flare" no="26">
              <go wp="TD" vmode="throttle" throttle="0.0" hmode="route" from="AF" approaching_time="0" no="0"/>
              <attitude vmode="throttle" until="FALSE" throttle="0.0" roll="0.0" no="1"/>
            </block>
            <block name="Steps roll -10, +10" no="27">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 6" roll="10.0" alt="250" no="1"/>
                <attitude vmode="alt" until="stage_time > 6" roll="-10.0" alt="250" no="2"/>
              </while>
            </block>
            <block name="Steps roll -20, +20" no="28">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 3" roll="20.0" alt="250" no="1"/>
                <attitude vmode="alt" until="stage_time > 3" roll="-20.0" alt="250" no="2"/>
              </while>
            </block>
            <block name="Steps pitch -10, +10" no="29">
              <while cond="TRUE" no="0">
                <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="10" alt="250" no="1"/>
                <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="-10" alt="250" no="2"/>
              </while>
            </block>
            <block name="Heading 30" no="30">
              <heading until="FALSE" course="30" alt="GetAltRef()+50" no="0"/>
            </block>
            <block name="For loop (circles wp 1)" no="31">
              <for var="i" to="3" from="0" no="1">
                <circle wp="1" until="NavCircleCount() > 1" radius="DEFAULT_CIRCLE_RADIUS+ $i*10" no="2"/>
              </for>
              <deroute block="Standby" no="4"/>
            </block>
            <block name="Test datalink (go to wp 2)" no="32">
              <exception deroute="Standby" cond="datalink_time > 22"/>
              <go wp="2" hmode="route" from="STDBY" no="0"/>
              <go wp="STDBY" hmode="route" from="2" no="1"/>
            </block>
            <block name="Fly in Square" no="33">
              <exception deroute="Come back wp 1" cond="! InsideSquare(GetPosX(), GetPosY())"/>
              <attitude vmode="alt" roll="0" alt="GetAltRef()+75" no="0"/>
            </block>
            <block name="Come back wp 1" no="34">
              <exception deroute="Fly in Square" cond="InsideSquare(GetPosX(), GetPosY())"/>
              <go wp="1" no="0"/>
              <deroute block="Fly in Square" no="1"/>
            </block>
            <block name="HOME" no="35">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="35" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="34" block_name="Come back wp 1" stage="1">
            <deroute block="Fly in Square" no="1"/>
          </stage>
          <stage block="34" block_name="Come back wp 1" stage="0">
            <go wp="1" no="0"/>
          </stage>
          <stage block="33" block_name="Fly in Square" stage="0">
            <attitude vmode="alt" roll="0" alt="GetAltRef()+75" no="0"/>
          </stage>
          <stage block="32" block_name="Test datalink (go to wp 2)" stage="1">
            <go wp="STDBY" hmode="route" from="2" no="1"/>
          </stage>
          <stage block="32" block_name="Test datalink (go to wp 2)" stage="0">
            <go wp="2" hmode="route" from="STDBY" no="0"/>
          </stage>
          <stage block="31" block_name="For loop (circles wp 1)" stage="4">
            <deroute block="Standby" no="4"/>
          </stage>
          <stage block="31" block_name="For loop (circles wp 1)" stage="2">
            <circle wp="1" until="NavCircleCount() > 1" radius="DEFAULT_CIRCLE_RADIUS+ $i*10" no="2"/>
          </stage>
          <stage block="31" block_name="For loop (circles wp 1)" stage="1">
            <for var="i" to="3" from="0" no="1">
              <circle wp="1" until="NavCircleCount() > 1" radius="DEFAULT_CIRCLE_RADIUS+ $i*10" no="2"/>
            </for>
          </stage>
          <stage block="30" block_name="Heading 30" stage="0">
            <heading until="FALSE" course="30" alt="GetAltRef()+50" no="0"/>
          </stage>
          <stage block="29" block_name="Steps pitch -10, +10" stage="2">
            <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="-10" alt="250" no="2"/>
          </stage>
          <stage block="29" block_name="Steps pitch -10, +10" stage="1">
            <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="10" alt="250" no="1"/>
          </stage>
          <stage block="29" block_name="Steps pitch -10, +10" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="10" alt="250" no="1"/>
              <attitude vmode="alt" until=" stage_time > 2" roll="0.0" pitch="-10" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="28" block_name="Steps roll -20, +20" stage="2">
            <attitude vmode="alt" until="stage_time > 3" roll="-20.0" alt="250" no="2"/>
          </stage>
          <stage block="28" block_name="Steps roll -20, +20" stage="1">
            <attitude vmode="alt" until=" stage_time > 3" roll="20.0" alt="250" no="1"/>
          </stage>
          <stage block="28" block_name="Steps roll -20, +20" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 3" roll="20.0" alt="250" no="1"/>
              <attitude vmode="alt" until="stage_time > 3" roll="-20.0" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="27" block_name="Steps roll -10, +10" stage="2">
            <attitude vmode="alt" until="stage_time > 6" roll="-10.0" alt="250" no="2"/>
          </stage>
          <stage block="27" block_name="Steps roll -10, +10" stage="1">
            <attitude vmode="alt" until=" stage_time > 6" roll="10.0" alt="250" no="1"/>
          </stage>
          <stage block="27" block_name="Steps roll -10, +10" stage="0">
            <while cond="TRUE" no="0">
              <attitude vmode="alt" until=" stage_time > 6" roll="10.0" alt="250" no="1"/>
              <attitude vmode="alt" until="stage_time > 6" roll="-10.0" alt="250" no="2"/>
            </while>
          </stage>
          <stage block="26" block_name="flare" stage="1">
            <attitude vmode="throttle" until="FALSE" throttle="0.0" roll="0.0" no="1"/>
          </stage>
          <stage block="26" block_name="flare" stage="0">
            <go wp="TD" vmode="throttle" throttle="0.0" hmode="route" from="AF" approaching_time="0" no="0"/>
          </stage>
          <stage block="25" block_name="final" stage="0">
            <go wp="TD" vmode="glide" hmode="route" from="AF" no="0"/>
          </stage>
          <stage block="24" block_name="land" stage="3">
            <circle wp="BASELEG" until="NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-(nav_radius/fabs(nav_radius))*10) && 10 > fabs(GetPosAlt() - WaypointAlt(WP_BASELEG))" radius="nav_radius" no="3"/>
          </stage>
          <stage block="24" block_name="land" stage="2">
            <set var="v_ctl_auto_throttle_cruise_throttle" value="V_CTL_AUTO_THROTTLE_MIN_CRUISE_THROTTLE" no="2"/>
          </stage>
          <stage block="24" block_name="land" stage="1">
            <circle wp="BASELEG" until="NavCircleCount() > 0.5" radius="nav_radius" no="1"/>
          </stage>
          <stage block="24" block_name="land" stage="0">
            <call fun="nav_compute_baseleg(WP_AF, WP_TD, WP_BASELEG, nav_radius)" no="0"/>
          </stage>
          <stage block="23" block_name="Land Left AF-TD" stage="1">
            <deroute block="land" no="1"/>
          </stage>
          <stage block="23" block_name="Land Left AF-TD" stage="0">
            <set var="nav_radius" value="-DEFAULT_CIRCLE_RADIUS" no="0"/>
          </stage>
          <stage block="22" block_name="Land Right AF-TD" stage="1">
            <deroute block="land" no="1"/>
          </stage>
          <stage block="22" block_name="Land Right AF-TD" stage="0">
            <set var="nav_radius" value="DEFAULT_CIRCLE_RADIUS" no="0"/>
          </stage>
          <stage block="21" block_name="Survey S1-S2" stage="1">
            <survey_rectangle wp2="S2" wp1="S1" grid="150" no="1"/>
          </stage>
          <stage block="20" block_name="Glide 1-2" stage="1">
            <deroute block="Standby" no="1"/>
          </stage>
          <stage block="20" block_name="Glide 1-2" stage="0">
            <go wp="2" vmode="glide" hmode="route" from="1" no="0"/>
          </stage>
          <stage block="19" block_name="Stack wp 1" stage="0">
            <circle wp="1" radius="75" no="0"/>
          </stage>
          <stage block="18" block_name="Route 2-1" stage="0">
            <go wp="1" hmode="route" from="2" approaching_time="0" no="0"/>
          </stage>
          <stage block="17" block_name="Stack wp 2" stage="0">
            <circle wp="2" radius="75" no="0"/>
          </stage>
          <stage block="16" block_name="Route 1-2" stage="0">
            <go wp="2" hmode="route" from="1" approaching_time="0" no="0"/>
          </stage>
          <stage block="15" block_name="Oval 0% throttle" stage="2">
            <deroute block="Standby" no="2"/>
          </stage>
          <stage block="15" block_name="Oval 0% throttle" stage="1">
            <oval vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" p2="2" p1="1" no="1"/>
          </stage>
          <stage block="14" block_name="Circle 0% throttle" stage="1">
            <deroute block="Standby" no="1"/>
          </stage>
          <stage block="14" block_name="Circle 0% throttle" stage="0">
            <circle wp="1" vmode="throttle" until="GetAltRef()+50 > GetPosAlt()" throttle="0.0" radius="nav_radius" pitch="fp_pitch" no="0"/>
          </stage>
          <stage block="13" block_name="Climb nav_climb m/s" stage="0">
            <circle wp="1" vmode="climb" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" radius="nav_radius" climb="nav_climb" no="0"/>
          </stage>
          <stage block="12" block_name="Climb 1m/s" stage="0">
            <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="5" climb="1" no="0"/>
          </stage>
          <stage block="11" block_name="Climb 0m/s" stage="0">
            <circle wp="1" vmode="climb" until="10 > PowerVoltage()" radius="nav_radius" climb="0" no="0"/>
          </stage>
          <stage block="10" block_name="Climb 75% throttle" stage="0">
            <circle wp="1" vmode="throttle" until="(10 > PowerVoltage()) || (GetPosAlt() > GetAltRef()+ 1350)" throttle="0.75" radius="50+(GetPosAlt()-GetAltRef())/2" pitch="10" no="0"/>
          </stage>
          <stage block="9" block_name="Auto pitch (circle wp 1)" stage="0">
            <circle wp="1" throttle="0.7" radius="75" pitch="auto" no="0"/>
          </stage>
          <stage block="8" block_name="MOB" stage="1">
            <circle wp="MOB" radius="100" no="1"/>
          </stage>
          <stage block="8" block_name="MOB" stage="0">
            <call fun="NavSetWaypointHere(WP_MOB)" no="0"/>
          </stage>
          <stage block="7" block_name="Oval 1-2" stage="1">
            <oval radius="nav_radius" p2="2" p1="1" no="1"/>
          </stage>
          <stage block="6" block_name="Figure 8 around wp 1" stage="1">
            <eight turn_around="2" radius="nav_radius" center="1" no="1"/>
          </stage>
          <stage block="5" block_name="Line 1-2" stage="1">
            <call fun="nav_line_run(WP_1, WP_2, nav_radius)" no="1"/>
          </stage>
          <stage block="5" block_name="Line 1-2" stage="0">
            <call fun="nav_line_setup()" no="0"/>
          </stage>
          <stage block="4" block_name="Standby" stage="0">
            <circle wp="STDBY" radius="nav_radius" no="0"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="1">
            <go wp="CLIMB" no="1"/>
          </stage>
          <stage block="3" block_name="Takeoff" stage="0">
            <set var="kill_throttle" value="0" no="0"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="1">
            <attitude vmode="throttle" throttle="0" roll="0" no="1"/>
          </stage>
          <stage block="2" block_name="Holding point" stage="0">
            <set var="kill_throttle" value="1" no="0"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="2">
            <call fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="1" block_name="Geo init" stage="0">
            <while cond="LessThan(NavBlockTime(), 10)" no="0"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="1">
            <while cond="!GpsFixValid()" no="1"/>
          </stage>
          <stage block="0" block_name="Wait GPS" stage="0">
            <set var="kill_throttle" value="1" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="lights control">
            <dl_settings NAME="lights">
              <dl_setting VAR="strobe_light_mode" VALUES="OFF|ON|BLINK_1|BLINK_2|BLINK_3|COMPLEX_1|COMPLEX_2" STEP="1" MODULE="light/light" MIN="0" MAX="6">
                <strip_button VALUE="1" NAME="LightOn" ICON="on.png" GROUP="light"/>
                <strip_button VALUE="0" NAME="LightOff" ICON="off.png" GROUP="light"/>
              </dl_setting>
              <dl_setting VAR="nav_light_mode" VALUES="OFF|ON|BLINK_1|BLINK_2|BLINK_3" STEP="1" MIN="0" MAX="4"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="control">
            <dl_settings NAME="dc">
              <dl_setting VAR="0" STEP="1" SHORTNAME="Shutter" MODULE="digital_cam/dc" MIN="0" MAX="255" HANDLER="send_command">
                <strip_button VALUE="32" NAME="Photo" ICON="digital-camera.png" GROUP="maindc"/>
                <strip_button VALUE="111" NAME="Power" ICON="off.png" GROUP="maindc"/>
                <strip_button VALUE="116" NAME="ZoomIn" ICON="zoom.png" GROUP="dczoom"/>
                <strip_button VALUE="119" NAME="ZoomOut" ICON="zoom.png" GROUP="dczoom"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot" VALUES="STOP|PERIODIC|DISTANCE|EXT_TRIG" STEP="1" MIN="0" MAX="3">
                <strip_button VALUE="1" NAME="Start Autoshoot" ICON="dcstart.png" GROUP="dcauto"/>
                <strip_button VALUE="0" NAME="Stop Autoshoot" ICON="dcstart.png" GROUP="dcauto"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot_period" UNIT="sec" STEP="0.5" SHORTNAME="Periodic" PARAM="DC_AUTOSHOOT_PERIOD" MIN="0.1" MAX="60"/>
              <dl_setting VAR="dc_distance_interval" UNIT="meter" STEP="1" SHORTNAME="dist" PARAM="DC_AUTOSHOOT_DISTANCE_INTERVAL" MIN="0" MAX="255"/>
              <dl_setting VAR="dc_survey_interval" STEP="5" SHORTNAME="Survey-Interval" MODULE="digital_cam/dc" MIN="0" MAX="250" HANDLER="Survey"/>
              <dl_setting VAR="dc_circle_interval" STEP="5" SHORTNAME="Circle-Interval" MODULE="digital_cam/dc" MIN="5" MAX="90" HANDLER="Circle"/>
              <dl_setting VAR="dc_cam_tracing" STEP="1" SHORTNAME="Cam-Tracing" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="Yapa v1">
        <firmware NAME="fixedwing">
          <target NAME="ap" BOARD="yapa_2.0"/>
          <target NAME="sim" BOARD="pc"/>
          <define NAME="STRONG_WIND"/>
          <define NAME="WIND_INFO"/>
          <define NAME="WIND_INFO_RET"/>
          <define NAME="LOITER_TRIM"/>
          <define NAME="TUNE_AGRESSIVE_CLIMB"/>
          <define NAME="AGR_CLIMB"/>
          <subsystem TYPE="ppm" NAME="radio_control"/>
          <subsystem TYPE="xbee_api" NAME="telemetry">
            <configure VALUE="B9600" NAME="MODEM_BAUD"/>
          </subsystem>
          <subsystem NAME="control"/>
          <subsystem NAME="navigation"/>
          <subsystem TYPE="xsens" NAME="ins">
            <configure VALUE="0" NAME="XSENS_UART_NR"/>
            <configure VALUE="B230400" NAME="XSENS_UART_BAUD"/>
          </subsystem>
        </firmware>
        <modules>
          <load NAME="light.xml">
            <define VALUE="1" NAME="LIGHT_LED_STROBE"/>
            <define VALUE="6" NAME="STROBE_LIGHT_MODE_DEFAULT"/>
            <define VALUE="4" NAME="NAV_LIGHT_MODE_DEFAULT"/>
          </load>
          <load NAME="digital_cam.xml">
            <define VALUE="GPIOB,GPIO16" NAME="DC_SHUTTER_GPIO"/>
          </load>
          <load NAME="nav_line.xml"/>
        </modules>
        <servos>
          <servo NO="0" NEUTRAL="1000" NAME="THROTTLE" MIN="1000" MAX="2000"/>
          <servo NO="2" NEUTRAL="1500" NAME="AILERON_LEFT" MIN="900" MAX="2100"/>
          <servo NO="6" NEUTRAL="1500" NAME="AILERON_RIGHT" MIN="900" MAX="2100"/>
          <servo NO="7" NEUTRAL="1500" NAME="ELEVATOR" MIN="1900" MAX="1100"/>
          <servo NO="3" NEUTRAL="1575" NAME="RUDDER" MIN="1175" MAX="1975"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="BRAKE" FAILSAFE_VALUE="9600"/>
        </commands>
        <rc_commands>
          <set VALUE="@THROTTLE" COMMAND="THROTTLE"/>
          <set VALUE="@ROLL" COMMAND="ROLL"/>
          <set VALUE="@YAW" COMMAND="YAW"/>
          <set VALUE="@PITCH" COMMAND="PITCH"/>
          <set VALUE="@FLAPS" COMMAND="BRAKE"/>
        </rc_commands>
        <section PREFIX="AUTO1_" NAME="AUTO1">
          <define VALUE="RadOfDeg(75)" NAME="MAX_ROLL"/>
          <define VALUE="RadOfDeg(45)" NAME="MAX_PITCH"/>
        </section>
        <section NAME="SERVO_MIXER_GAINS">
          <define VALUE="0.3f" NAME="AILERON_NEUTRAL"/>
          <define VALUE="1.0f" NAME="AILERON_RATE_UP"/>
          <define VALUE="0.5f" NAME="AILERON_RATE_DOWN"/>
          <define VALUE="1.0f" NAME="AILERON_RATE_UP_BRAKE"/>
          <define VALUE="1.0f" NAME="AILERON_RATE_DOWN_BRAKE"/>
          <define VALUE="0.9f" NAME="PITCH_GAIN"/>
          <define VALUE="-0.7f" NAME="BRAKE_AILEVON"/>
          <define VALUE="0.1f" NAME="BRAKE_PITCH"/>
          <define VALUE="80" NAME="MAX_BRAKE_RATE"/>
          <define VALUE="0.3" NAME="RUDDER_OF_AILERON"/>
        </section>
        <command_laws>
          <let VAR="brake_value_nofilt" VALUE="Chop(-@BRAKE, 0, MAX_PPRZ)"/>
          <ratelimit VAR="brake_value" VALUE="$brake_value_nofilt" RATE_MIN="-MAX_BRAKE_RATE" RATE_MAX="MAX_BRAKE_RATE"/>
          <let VAR="aileron_up_rate" VALUE="(AILERON_RATE_UP   * (MAX_PPRZ - $brake_value)) + (AILERON_RATE_UP_BRAKE   * $brake_value)"/>
          <let VAR="aileron_down_rate" VALUE="(AILERON_RATE_DOWN * (MAX_PPRZ - $brake_value)) + (AILERON_RATE_DOWN_BRAKE * $brake_value)"/>
          <let VAR="aileron_up" VALUE="((-@ROLL)  *  (((float)$aileron_up_rate) / ((float)MAX_PPRZ)))"/>
          <let VAR="aileron_down" VALUE="((-@ROLL)  * (((float)$aileron_down_rate) / ((float)MAX_PPRZ)))"/>
          <let VAR="leftturn" VALUE="(@ROLL >= 0? 0 : 1)"/>
          <let VAR="rightturn" VALUE="(1 - $leftturn)"/>
          <set VALUE="($aileron_up * $leftturn) + ($aileron_down * $rightturn) - $brake_value*(BRAKE_AILEVON) - (MAX_PPRZ * AILERON_NEUTRAL)" SERVO="AILERON_LEFT"/>
          <set VALUE="($aileron_up * $rightturn) + ($aileron_down * $leftturn) + $brake_value*(BRAKE_AILEVON) + (MAX_PPRZ *AILERON_NEUTRAL)" SERVO="AILERON_RIGHT"/>
          <set VALUE="-(@YAW + @ROLL * RUDDER_OF_AILERON)" SERVO="RUDDER"/>
          <set VALUE="@THROTTLE" SERVO="THROTTLE"/>
          <set VALUE="@PITCH * PITCH_GAIN - BRAKE_PITCH * $brake_value" SERVO="ELEVATOR"/>
        </command_laws>
        <section PREFIX="FAILSAFE_" NAME="FAILSAFE">
          <define VALUE="0.35" UNIT="%" NAME="DEFAULT_THROTTLE"/>
          <define VALUE="0.17" UNIT="rad" NAME="DEFAULT_ROLL"/>
          <define VALUE="0.08" UNIT="rad" NAME="DEFAULT_PITCH"/>
          <define VALUE="DEFAULT_CIRCLE_RADIUS" UNIT="m" NAME="HOME_RADIUS"/>
          <define VALUE="(MAX_DIST_FROM_HOME*1.5)" NAME="KILL_MODE_DISTANCE"/>
          <define VALUE="3" UNIT="s" NAME="DELAY_WITHOUT_GPS"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.51562740288882" NAME="H_X"/>
          <define VALUE="-0.05707735220832" NAME="H_Y"/>
          <define VALUE="0.85490967783446" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="0.0" UNIT="rad" NAME="ROLL_NEUTRAL_DEFAULT"/>
          <define VALUE="-0.0885749980807" UNIT="rad" NAME="PITCH_NEUTRAL_DEFAULT"/>
        </section>
        <section NAME="XSENS">
          <define VALUE="-0.285f" NAME="GPS_IMU_LEVER_ARM_X"/>
          <define VALUE="0.0f" NAME="GPS_IMU_LEVER_ARM_Y"/>
          <define VALUE="0.0f" NAME="GPS_IMU_LEVER_ARM_Z"/>
        </section>
        <section PREFIX="H_CTL_" NAME="HORIZONTAL CONTROL">
          <define VALUE="0.90" NAME="COURSE_PGAIN"/>
          <define VALUE="0.35" NAME="COURSE_DGAIN"/>
          <define VALUE="1.0039999485" NAME="COURSE_PRE_BANK_CORRECTION"/>
          <define VALUE="0.851999998093" UNIT="radians" NAME="ROLL_MAX_SETPOINT"/>
          <define VALUE="0.5" UNIT="radians" NAME="PITCH_MAX_SETPOINT"/>
          <define VALUE="-0.6" UNIT="radians" NAME="PITCH_MIN_SETPOINT"/>
          <define VALUE="16917.2929688" NAME="PITCH_PGAIN"/>
          <define VALUE="7.73400020599" NAME="PITCH_DGAIN"/>
          <define VALUE="3007.81298828" NAME="ELEVATOR_OF_ROLL"/>
          <define VALUE="2." NAME="ROLL_SLEW"/>
          <define VALUE="11718.75" NAME="ROLL_ATTITUDE_GAIN"/>
          <define VALUE="820.312011719" NAME="ROLL_RATE_GAIN"/>
        </section>
        <section PREFIX="V_CTL_" NAME="VERTICAL CONTROL">
          <define VALUE="11.1" UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL"/>
          <define VALUE="0.108000002801" NAME="ALTITUDE_PGAIN"/>
          <define VALUE="2." NAME="ALTITUDE_MAX_CLIMB"/>
          <define VALUE="0.6" NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE"/>
          <define VALUE="0.25" NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE"/>
          <define VALUE="0.9" NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE"/>
          <define VALUE="1500" NAME="AUTO_THROTTLE_LOITER_TRIM"/>
          <define VALUE="-4000" NAME="AUTO_THROTTLE_DASH_TRIM"/>
          <define VALUE="0.158000007272" UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT"/>
          <define VALUE="0." NAME="AUTO_THROTTLE_PGAIN"/>
          <define VALUE="0." NAME="AUTO_THROTTLE_IGAIN"/>
          <define VALUE="0.361000001431" NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN"/>
          <define VALUE="2" UNIT="s" NAME="THROTTLE_SLEW_LIMITER"/>
        </section>
        <section PREFIX="AGR_" NAME="AGGRESSIVE">
          <define VALUE="30" NAME="BLEND_START"/>
          <define VALUE="15" NAME="BLEND_END"/>
          <define VALUE="1." NAME="CLIMB_THROTTLE"/>
          <define VALUE="0.40000000596" NAME="CLIMB_PITCH"/>
          <define VALUE="0." NAME="DESCENT_THROTTLE"/>
          <define VALUE="-0.10000000149" NAME="DESCENT_PITCH"/>
          <define VALUE="0.800000011921" NAME="CLIMB_NAV_RATIO"/>
          <define VALUE="0.834999978542" NAME="DESCENT_NAV_RATIO"/>
        </section>
        <section NAME="BAT">
          <define VALUE="10.5" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="10" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="9.1" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
        </section>
        <section NAME="MISC">
          <define VALUE="8." UNIT="m/s" NAME="NOMINAL_AIRSPEED"/>
          <define VALUE="5." UNIT="s" NAME="CARROT"/>
          <define VALUE="&quot;ATPL4\\rATRN5\\rATTT80\\r&quot;" NAME="XBEE_INIT"/>
          <define VALUE="80." NAME="DEFAULT_CIRCLE_RADIUS"/>
          <define VALUE="180" NAME="COMMAND_ROLL_TRIM"/>
          <define VALUE="-194." NAME="COMMAND_PITCH_TRIM"/>
        </section>
        <section PREFIX="DC_" NAME="DIGITAL_CAMERA">
          <define VALUE="1.5" UNIT="sec" NAME="AUTOSHOOT_PERIOD"/>
          <define VALUE="50" UNIT="meter" NAME="AUTOSHOOT_DISTANCE_INTERVAL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Ap">
          <mode NAME="default">
            <message PERIOD="1.4" NAME="AIRSPEED"/>
            <message PERIOD="1.4" NAME="AMSL"/>
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="0.5" NAME="GPS"/>
            <message PERIOD="1." NAME="NAVIGATION"/>
            <message PERIOD="0.7" NAME="ATTITUDE"/>
            <message PERIOD="0.6" NAME="ESTIMATOR"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="1.1" NAME="WP_MOVED"/>
            <message PERIOD="1.05" NAME="CIRCLE"/>
            <message PERIOD="1.05" NAME="DESIRED"/>
            <message PERIOD="1.1" NAME="BAT"/>
            <message PERIOD="1.2" NAME="SEGMENT"/>
            <message PERIOD="2.1" NAME="CALIBRATION"/>
            <message PERIOD="9." NAME="NAVIGATION_REF"/>
            <message PERIOD="5." NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="SETTINGS"/>
            <message PERIOD="2.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="1.2" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="IR_SENSORS"/>
            <message PERIOD="2.1" NAME="SURVEY"/>
            <message PERIOD="2.0" NAME="GPS_SOL"/>
            <message PERIOD=".8" NAME="IMU_ACCEL"/>
            <message PERIOD=".9" NAME="IMU_GYRO"/>
            <message PERIOD="1.9" NAME="IMU_MAG"/>
            <message PERIOD="5" NAME="COMMANDS"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD=".2" NAME="PAYLOAD"/>
          </mode>
          <mode NAME="minimal">
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="4" NAME="ATTITUDE"/>
            <message PERIOD="1.05" NAME="GPS"/>
            <message PERIOD="1.3" NAME="ESTIMATOR"/>
            <message PERIOD="1.4" NAME="WP_MOVED"/>
            <message PERIOD="3.05" NAME="CIRCLE"/>
            <message PERIOD="4.05" NAME="DESIRED"/>
            <message PERIOD="1.1" NAME="BAT"/>
            <message PERIOD="3.2" NAME="SEGMENT"/>
            <message PERIOD="5.1" NAME="CALIBRATION"/>
            <message PERIOD="9." NAME="NAVIGATION_REF"/>
            <message PERIOD="3." NAME="NAVIGATION"/>
            <message PERIOD="5." NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="1.5" NAME="DL_VALUE"/>
            <message PERIOD="5.2" NAME="IR_SENSORS"/>
            <message PERIOD="2.1" NAME="SURVEY"/>
            <message PERIOD="5.0" NAME="GPS_SOL"/>
          </mode>
          <mode NAME="extremal">
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="GPS"/>
            <message PERIOD="5.3" NAME="ESTIMATOR"/>
            <message PERIOD="10.1" NAME="BAT"/>
            <message PERIOD="10.2" NAME="DESIRED"/>
            <message PERIOD="5.4" NAME="NAVIGATION"/>
            <message PERIOD="7.5" NAME="PPRZ_MODE"/>
            <message PERIOD="8." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.7" NAME="DATALINK_REPORT"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD="0.5" NAME="BARO_RAW"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO"/>
            <message PERIOD=".075" NAME="IMU_ACCEL"/>
            <message PERIOD=".1" NAME="IMU_MAG"/>
          </mode>
          <mode NAME="debug_imu">
            <message PERIOD="0.1" NAME="ATTITUDE"/>
            <message PERIOD="5" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="GPS"/>
            <message PERIOD="5.3" NAME="ESTIMATOR"/>
            <message PERIOD="10.1" NAME="BAT"/>
            <message PERIOD="10.2" NAME="DESIRED"/>
            <message PERIOD="5.4" NAME="NAVIGATION"/>
            <message PERIOD="5.5" NAME="PPRZ_MODE"/>
            <message PERIOD="5." NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="5.7" NAME="DATALINK_REPORT"/>
            <message PERIOD=".5" NAME="IMU_ACCEL"/>
            <message PERIOD=".5" NAME="IMU_GYRO"/>
            <message PERIOD=".5" NAME="IMU_MAG"/>
            <message PERIOD=".5" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".5" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".5" NAME="IMU_MAG_RAW"/>
          </mode>
        </process>
        <process NAME="Fbw">
          <mode NAME="default">
            <message PERIOD="5" NAME="COMMANDS"/>
            <message PERIOD="2" NAME="FBW_STATUS"/>
            <message PERIOD="5" NAME="ACTUATORS"/>
          </mode>
          <mode NAME="debug">
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="COMMANDS"/>
            <message PERIOD="1" NAME="FBW_STATUS"/>
            <message PERIOD="5" NAME="ACTUATORS"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting VAR="flight_altitude" STEP="10" SHORTNAME="altitude" MIN="0" MAX="1000"/>
            <dl_setting VAR="nav_course" STEP="1" MIN="0" MAX="360"/>
            <dl_setting VAR="nav_shift" STEP="5" SHORTNAME="inc. shift" MODULE="firmwares/fixedwing/nav" MIN="-10" MAX="10" HANDLER="IncreaseShift"/>
            <dl_setting VAR="autopilot_flight_time" STEP="1" SHORTNAME="flight time" MODULE="autopilot" MIN="0" MAX="0" HANDLER="ResetFlightTimeAndLaunch"/>
            <dl_setting VAR="nav_radius" STEP="10" MODULE="firmwares/fixedwing/nav" MIN="-200" MAX="200" HANDLER="SetNavRadius">
              <strip_button VALUE="1" NAME="Circle right" ICON="circle-right.png" GROUP="circle"/>
              <strip_button VALUE="-1" NAME="Circle left" ICON="circle-left.png" GROUP="circle"/>
              <key_press VALUE="1" KEY="greater"/>
              <key_press VALUE="-1" KEY="less"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting VAR="pprz_mode" VALUES="MANUAL|AUTO1|AUTO2|HOME|NOGPS|FAILSAFE" STEP="1" MODULE="autopilot" MIN="0" MAX="2"/>
            <dl_setting VAR="launch" STEP="1" MIN="0" MAX="1"/>
            <dl_setting VAR="kill_throttle" STEP="1" MIN="0" MAX="1"/>
            <dl_setting VAR="gps.reset" STEP="1" SHORTNAME="GPS reset" MODULE="subsystems/gps" MIN="0" MAX="2" HANDLER="Reset"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="control">
            <dl_settings NAME="trim">
              <dl_setting VAR="ap_state->command_roll_trim" STEP="1" SHORTNAME="roll_trim" PARAM="COMMAND_ROLL_TRIM" MODULE="inter_mcu" MIN="-960" MAX="960"/>
              <dl_setting VAR="ap_state->command_pitch_trim" STEP="1" SHORTNAME="pitch_trim" PARAM="COMMAND_PITCH_TRIM" MIN="-960" MAX="960"/>
              <dl_setting VAR="ap_state->command_yaw_trim" STEP="1" SHORTNAME="yaw_trim" PARAM="COMMAND_YAW_TRIM" MIN="-9000" MAX="9000"/>
            </dl_settings>
            <dl_settings NAME="attitude">
              <dl_setting VAR="h_ctl_roll_pgain" STEP="250" SHORTNAME="roll_pgain" MODULE="stabilization/stabilization_attitude" MIN="000" MAX="25000"/>
              <dl_setting VAR="h_ctl_roll_max_setpoint" UNIT="rad" STEP="1." SHORTNAME="max_roll" PARAM="H_CTL_ROLL_MAX_SETPOINT" MIN="0" MAX="60" ALT_UNIT="deg"/>
              <dl_setting VAR="h_ctl_pitch_pgain" STEP="250" SHORTNAME="pitch_pgain" PARAM="H_CTL_PITCH_PGAIN" MIN="0" MAX="25000"/>
              <dl_setting VAR="h_ctl_pitch_dgain" STEP="10" SHORTNAME="pitch_dgain" PARAM="H_CTL_PITCH_DGAIN" MIN="0" MAX="50000"/>
              <dl_setting VAR="h_ctl_elevator_of_roll" STEP="100" SHORTNAME="elevator_of_roll" PARAM="H_CTL_ELEVATOR_OF_ROLL" MIN="0" MAX="5000"/>
              <dl_setting VAR="h_ctl_aileron_of_throttle" STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" MAX="5000"/>
              <dl_setting VAR="h_ctl_roll_attitude_gain" STEP="250" SHORTNAME="roll attitude pgain" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" MIN="0" MAX="15000"/>
              <dl_setting VAR="h_ctl_roll_rate_gain" STEP="250" SHORTNAME="roll rate gain" PARAM="H_CTL_ROLL_RATE_GAIN" MIN="0" MAX="15000"/>
            </dl_settings>
            <dl_settings NAME="alt">
              <dl_setting VAR="v_ctl_altitude_pgain" STEP="0.01" SHORTNAME="alt_pgain" PARAM="V_CTL_ALTITUDE_PGAIN" MIN="0" MAX="0.2"/>
            </dl_settings>
            <dl_settings NAME="auto_throttle">
              <dl_setting VAR="v_ctl_auto_throttle_cruise_throttle" STEP="0.05" SHORTNAME="cruise throttle" PARAM="V_CTL_AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" MODULE="guidance/guidance_v" MIN="0.0" MAX="1" HANDLER="SetCruiseThrottle">
                <strip_button VALUE="0.1" NAME="Loiter" GROUP="dash_loiter"/>
                <strip_button VALUE="0" NAME="Cruise" GROUP="dash_loiter"/>
                <strip_button VALUE="1" NAME="Dash" GROUP="dash_loiter"/>
              </dl_setting>
              <dl_setting VAR="v_ctl_pitch_trim" UNIT="rad" STEP="0.1" SHORTNAME="pitch trim" PARAM="V_CTL_PITCH_TRIM" MIN="-15" MAX="15" ALT_UNIT="deg"/>
              <dl_setting VAR="v_ctl_auto_throttle_pgain" STEP="0.005" SHORTNAME="throttle_pgain" PARAM="V_CTL_AUTO_THROTTLE_PGAIN" MIN="0.00" MAX="0.05"/>
              <dl_setting VAR="v_ctl_auto_throttle_igain" STEP="0.05" SHORTNAME="throttle_igain" PARAM="V_CTL_AUTO_THROTTLE_IGAIN" MIN="0.0" MAX="1"/>
              <dl_setting VAR="v_ctl_auto_throttle_dgain" STEP="0.1" SHORTNAME="throttle_dgain" MIN="0.0" MAX="2"/>
              <dl_setting VAR="v_ctl_auto_throttle_climb_throttle_increment" STEP="0.01" SHORTNAME="throttle_incr" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" MIN="0" MAX="1"/>
              <dl_setting VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" STEP="0.01" SHORTNAME="pitch_of_vz" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" MIN="0" MAX="1"/>
              <dl_setting VAR="v_ctl_auto_throttle_pitch_of_vz_dgain" STEP="0.1" SHORTNAME="pitch_of_vz (d)" MIN="-10" MAX="10"/>
            </dl_settings>
            <dl_settings NAME="auto_pitch">
              <dl_setting VAR="v_ctl_auto_pitch_pgain" STEP="0.01" SHORTNAME="pgain" PARAM="V_CTL_AUTO_PITCH_PGAIN" MIN="0.01" MAX="0.1"/>
              <dl_setting VAR="v_ctl_auto_pitch_igain" STEP="0.01" SHORTNAME="igain" PARAM="V_CTL_AUTO_PITCH_IGAIN" MIN="0" MAX="1"/>
            </dl_settings>
            <dl_settings NAME="nav">
              <dl_setting VAR="h_ctl_course_pgain" STEP="0.05" SHORTNAME="course pgain" PARAM="H_CTL_COURSE_PGAIN" MIN="0.1" MAX="3"/>
              <dl_setting VAR="h_ctl_course_dgain" STEP="0.1" SHORTNAME="course dgain" PARAM="H_CTL_COURSE_DGAIN" MIN="0" MAX="2"/>
              <dl_setting VAR="h_ctl_course_pre_bank_correction" STEP="0.05" SHORTNAME="pre bank cor" PARAM="H_CTL_COURSE_PRE_BANK_CORRECTION" MIN="0.1" MAX="2"/>
              <dl_setting VAR="nav_glide_pitch_trim" STEP="0.05" SHORTNAME="glide pitch trim" PARAM="NAV_GLIDE_PITCH_TRIM" MIN="0.0" MAX="1"/>
              <dl_setting VAR="h_ctl_roll_slew" STEP="0.01" SHORTNAME="roll slew" MIN="0.02" MAX="1"/>
              <dl_setting VAR="nav_radius" STEP="5" MIN="-500" MAX="500"/>
              <dl_setting VAR="nav_course" STEP="5" MIN="0" MAX="359"/>
              <dl_setting VAR="nav_mode" STEP="1" MIN="1" MAX="2"/>
              <dl_setting VAR="nav_climb" STEP="0.5" MIN="-5" MAX="5"/>
              <dl_setting VAR="fp_pitch" STEP="1" MIN="-15" MAX="15"/>
              <dl_setting VAR="nav_shift" STEP="5" SHORTNAME="inc. shift" MODULE="firmwares/fixedwing/nav" MIN="-50" MAX="50" HANDLER="IncreaseShift"/>
              <dl_setting VAR="nav_ground_speed_setpoint" STEP="0.5" SHORTNAME="ground speed" MIN="5" MAX="50"/>
              <dl_setting VAR="nav_ground_speed_pgain" STEP="0.01" SHORTNAME="ground speed pgain" MIN="0" MAX="0.2"/>
              <dl_setting VAR="nav_survey_shift" STEP="5" MIN="50" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="ins">
            <dl_setting VAR="ins_roll_neutral" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="roll_neutral" PERSISTENT="true" PARAM="INS_ROLL_NEUTRAL_DEFAULT" MODULE="subsystems/ahrs" MIN="-15" MAX="15" ALT_UNIT="deg"/>
            <dl_setting VAR="ins_pitch_neutral" UNIT="rad" TYPE="float" STEP="0.5" SHORTNAME="pitch_neutral" PERSISTENT="true" PARAM="INS_PITCH_NEUTRAL_DEFAULT" MIN="-15" MAX="15" ALT_UNIT="deg"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings NAME="control">
          <dl_settings NAME="agr">
            <dl_setting VAR="agr_climb_throttle" STEP="0.05" SHORTNAME="climb_throttle" PARAM="AGR_CLIMB_THROTTLE" MODULE="guidance/guidance_v" MIN="0." MAX="1.0"/>
            <dl_setting VAR="agr_climb_pitch" STEP="0.05" SHORTNAME="climb_pitch" PARAM="AGR_CLIMB_PITCH" MODULE="guidance/guidance_v" MIN="-0.1" MAX="0.5"/>
            <dl_setting VAR="agr_climb_nav_ratio" STEP="0.1" SHORTNAME="climb_nav_ratio" PARAM="AGR_CLIMB_NAV_RATIO" MODULE="guidance/guidance_v" MIN="0." MAX="1.0"/>
            <dl_setting VAR="agr_descent_throttle" STEP="0.05" SHORTNAME="descent_throttle" PARAM="AGR_DESCENT_THROTTLE" MODULE="guidance/guidance_v" MIN="0." MAX="1.0"/>
            <dl_setting VAR="agr_descent_pitch" STEP="0.05" SHORTNAME="descent_pitch" PARAM="AGR_DESCENT_PITCH" MODULE="guidance/guidance_v" MIN="-0.5" MAX="0.1"/>
            <dl_setting VAR="agr_descent_nav_ratio" STEP="0.1" SHORTNAME="descent_nav_ratio" PARAM="AGR_DESCENT_NAV_RATIO" MODULE="guidance/guidance_v" MIN="0." MAX="1.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="bebop_flip" ac_id="3" airframe="airframes/TUDelft/airframes/bebop_flip.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/dummy.xml" settings="settings/rotorcraft_basic.xml settings/control/stabilization_att_indi.xml" settings_modules="modules/geo_mag.xml modules/air_data.xml" gui_color="blue">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="ROLL" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="PITCH" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="950" MAX="2050" FUNCTION="YAW" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1223" MIN="1223" MAX="2050" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="UNUSED" CTL="G" AVERAGE="1"/>
        <channel NEUTRAL="1496" MIN="2050" MAX="948" FUNCTION="GAIN1" CTL="E" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="948" FUNCTION="MODE" CTL="PHAUX2" AVERAGE="1"/>
      </radio>
      <dump>
        <flight_plan name="Dummy" lon0="1.27289" max_dist_from_home="1000" ground_alt="185" security_height="25" qfu="270" alt="250" lat0="43.46223">
          <waypoints>
            <waypoint name="HOME" x="0.0" y="120.0" alt="250."/>
          </waypoints>
          <blocks>
            <block name="HOME" no="0">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="0" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop_indi">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop"/>
          <target NAME="nps" BOARD="pc">
            <subsystem TYPE="jsbsim" NAME="fdm"/>
          </target>
          <subsystem TYPE="transparent_udp" NAME="telemetry"/>
          <subsystem TYPE="datalink" NAME="radio_control"/>
          <subsystem NAME="motor_mixing"/>
          <subsystem TYPE="bebop" NAME="actuators"/>
          <subsystem TYPE="bebop" NAME="imu"/>
          <subsystem TYPE="furuno" NAME="gps"/>
          <subsystem TYPE="indi" NAME="stabilization"/>
          <subsystem TYPE="float_mlkf" NAME="ahrs"/>
          <subsystem TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="FALSE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
            <configure VALUE="int_cmpl_quat" NAME="SECONDARY_AHRS"/>
          </subsystem>
          <subsystem TYPE="extended" NAME="ins"/>
        </firmware>
        <modules MAIN_FREQ="512">
          <load NAME="geo_mag.xml"/>
          <load NAME="air_data.xml"/>
          <load NAME="send_imu_mag_current.xml"/>
          <load NAME="logger_file.xml">
            <define VALUE="/data/ftp/internal_000" NAME="FILE_LOGGER_PATH"/>
          </load>
        </modules>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <section NAME="gyro_scaling">
          <define VALUE="MPU60X0_GYRO_RANGE_2000" NAME="BEBOP_GYRO_RANGE"/>
          <define VALUE="4.359" NAME="IMU_GYRO_P_SENS"/>
          <define VALUE="4.359" NAME="IMU_GYRO_Q_SENS"/>
          <define VALUE="4.359" NAME="IMU_GYRO_R_SENS"/>
          <define VALUE="4359" NAME="IMU_GYRO_P_SENS_NUM"/>
          <define VALUE="4359" NAME="IMU_GYRO_Q_SENS_NUM"/>
          <define VALUE="4359" NAME="IMU_GYRO_R_SENS_NUM"/>
          <define VALUE="1000" NAME="IMU_GYRO_P_SENS_DEN"/>
          <define VALUE="1000" NAME="IMU_GYRO_Q_SENS_DEN"/>
          <define VALUE="1000" NAME="IMU_GYRO_R_SENS_DEN"/>
        </section>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_motors_on,FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="18" NAME="MAG_X_NEUTRAL"/>
          <define VALUE="157" NAME="MAG_Y_NEUTRAL"/>
          <define VALUE="49" NAME="MAG_Z_NEUTRAL"/>
          <define VALUE="10.5007722373" NAME="MAG_X_SENS" INTEGER="16"/>
          <define VALUE="11.1147400462" NAME="MAG_Y_SENS" INTEGER="16"/>
          <define VALUE="11.6479371722" NAME="MAG_Z_SENS" INTEGER="16"/>
          <define VALUE="0.0" NAME="MAG_X_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Y_CURRENT_COEF"/>
          <define VALUE="0.0" NAME="MAG_Z_CURRENT_COEF"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="10000" NAME="SP_MAX_P"/>
          <define VALUE="10000" NAME="SP_MAX_Q"/>
          <define VALUE="10000" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="4" NAME="REF_TAU"/>
          <define VALUE="400" NAME="GAIN_P"/>
          <define VALUE="400" NAME="GAIN_Q"/>
          <define VALUE="350" NAME="GAIN_R"/>
          <define VALUE="75" NAME="IGAIN_P"/>
          <define VALUE="75" NAME="IGAIN_Q"/>
          <define VALUE="50" NAME="IGAIN_R"/>
          <define VALUE="300" NAME="DDGAIN_P"/>
          <define VALUE="300" NAME="DDGAIN_Q"/>
          <define VALUE="300" NAME="DDGAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.0639" NAME="G1_P"/>
          <define VALUE="0.0361" NAME="G1_Q"/>
          <define VALUE="0.0022" NAME="G1_R"/>
          <define VALUE="0.1450" NAME="G2_R"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="50.0" NAME="FILT_OMEGA"/>
          <define VALUE="0.55" NAME="FILT_ZETA"/>
          <define VALUE="50.0" NAME="FILT_OMEGA_R"/>
          <define VALUE="0.55" NAME="FILT_ZETA_R"/>
          <define VALUE="0.1" NAME="ACT_DYN_P"/>
          <define VALUE="0.1" NAME="ACT_DYN_Q"/>
          <define VALUE="0.1" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="13" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_FLIP" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_FLIP" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.3" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="9.6" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="9.7" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="indi">
            <dl_setting VAR="reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.p" STEP="1" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.q" STEP="1" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.r" STEP="0.01" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="use_adaptive_indi" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="frog1" ac_id="25" airframe="airframes/BR/bebop_indi_frog.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/Tudelft/rotorcraft_survey_competition.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_guidance.xml settings/control/stabilization_att_indi.xml settings/control/rotorcraft_speed.xml" settings_modules="[modules/geo_mag.xml] modules/air_data.xml modules/video_thread.xml modules/cv_blob_locator.xml modules/video_rtp_stream.xml [modules/nav_survey_rectangle_rotorcraft.xml] modules/nav_survey_poly_rotorcraft.xml modules/digital_cam_video.xml" gui_color="#ffff0689b7a1">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="IMAV2015_competition_outdoor" max_dist_from_home="500" lon0="6.04692" lat0="50.788595" ground_alt="260" alt="290">
          <exceptions>
            <exception cond="(electrical.bat_low&&(exception_flag[0]==0))" deroute="Mission.ComeBackAndLand" exec="set_exception_flag(0)"/>
            <exception cond="(electrical.bat_critical&&(exception_flag[1]==0))" deroute="Mission.land_here" exec="set_exception_flag(1)"/>
            <exception cond="((((!(InsideRED(GetPosX(),GetPosY()))&&!((nav_block==IndexOfBlock('Mission.flare'))))&&!((nav_block==IndexOfBlock('Mission.landed'))))&&!((nav_block==IndexOfBlock('Mission.WaitGPS'))))&&!((nav_block==IndexOfBlock('Mission.GeoInit'))))" deroute="Mission.land_emergency"/>
          </exceptions>
          <header>#include &quot;autopilot.h&quot;
#include &quot;subsystems/electrical.h&quot;
#ifdef dc_Survey
#define LINE_START_FUNCTION dc_Survey(dc_distance_interval);
#define LINE_STOP_FUNCTION {dc_autoshoot = DC_AUTOSHOOT_STOP;}
#endif
#ifndef DropOpen
#define DropOpen() FALSE
#endif
#ifndef StartVision
#define StartVision() FALSE
#endif
#ifndef StartVisionLand
#define StartVisionLand() FALSE
#endif
#ifndef StopVision
#define StopVision() FALSE
#endif
#define WpAlt(X) (30)</header>
          <waypoints>
            <waypoint name="_PLATE1" lon="6.04674224830944" lat="50.7888090239206" x="0.00" y="0.00"/>
            <waypoint name="_PLATE2" lon="6.04647268082583" lat="50.7890460391004" x="0.00" y="0.00"/>
            <waypoint name="_PLATE3" lon="6.04631880264475" lat="50.7888723417903" x="0.00" y="0.00"/>
            <waypoint y=".0" x="0.0" name="HOME"/>
            <waypoint y="15.4" x="-7.6" name="CLIMB"/>
            <waypoint y="24.0" x="-3.7" name="STDBY"/>
            <waypoint name="raceA" lon="6.047899" lat="50.790483" x="0.00" y="0.00"/>
            <waypoint name="raceB" lon="6.050200" lat="50.791800" x="0.00" y="0.00"/>
            <waypoint name="WG" lon="6.047431" lat="50.789794" x="0.00" y="0.00"/>
            <waypoint name="WD" lon="6.04677769236132" lat="50.7889307058111" height="30" x="0.00" y="0.00"/>
            <waypoint name="DROP" lon="6.04652336854142" lat="50.788775526101" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ1" lon="6.04652336854142" lat="50.788775526101" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ2" lon="6.04640018582595" lat="50.7889170568219" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ3" lon="6.04642327267965" lat="50.7889755961272" height="15" x="0.00" y="0.00"/>
            <waypoint name="FC" lon="6.047118" lat="50.789522" height="20" x="0.00" y="0.00"/>
            <waypoint y="95.0" x="27.5" name="CAM" height="20"/>
            <waypoint name="S1" lon="6.046721" lat="50.788597" x="0.00" y="0.00"/>
            <waypoint name="S2" lon="6.045944" lat="50.788973" x="0.00" y="0.00"/>
            <waypoint name="S3" lon="6.046330" lat="50.789323" x="0.00" y="0.00"/>
            <waypoint name="S4" lon="6.047113" lat="50.788917" x="0.00" y="0.00"/>
            <waypoint name="p1" lon="6.047864" lat="50.790483" x="0.00" y="0.00"/>
            <waypoint name="p2" lon="6.047897" lat="50.790463" x="0.00" y="0.00"/>
            <waypoint name="p3" lon="6.050232" lat="50.791799" x="0.00" y="0.00"/>
            <waypoint name="p4" lon="6.050201" lat="50.791818" x="0.00" y="0.00"/>
            <waypoint y="-55.4" x="19.2" name="CRUISE" height="25"/>
            <waypoint name="TD" lon="6.04695109268497" lat="50.7887171157922" height="15" x="0.00" y="0.00"/>
            <waypoint y="0" x="0" name="ETD" height="15"/>
            <waypoint name="_green1A" lon="6.046879" lat="50.790144" x="0.00" y="0.00"/>
            <waypoint name="_green1B" lon="6.047844" lat="50.789748" x="0.00" y="0.00"/>
            <waypoint name="_green1C" lon="6.047072" lat="50.789058" x="0.00" y="0.00"/>
            <waypoint name="_green1D" lon="6.047391" lat="50.788919" x="0.00" y="0.00"/>
            <waypoint name="_green1E" lon="6.046880" lat="50.788477" x="0.00" y="0.00"/>
            <waypoint name="_green1F" lon="6.045554" lat="50.789113" x="0.00" y="0.00"/>
            <waypoint name="_green2A" lon="6.050405" lat="50.792252" x="0.00" y="0.00"/>
            <waypoint name="_green2B" lon="6.050962" lat="50.791915" x="0.00" y="0.00"/>
            <waypoint name="_green2C" lon="6.047761" lat="50.790077" x="0.00" y="0.00"/>
            <waypoint name="_green2D" lon="6.047251" lat="50.790426" x="0.00" y="0.00"/>
            <waypoint name="_red1" lon="6.050093" lat="50.792552" x="0.00" y="0.00"/>
            <waypoint name="_red2" lon="6.051268" lat="50.791882" x="0.00" y="0.00"/>
            <waypoint name="_red3" lon="6.047834" lat="50.789988" x="0.00" y="0.00"/>
            <waypoint name="_red4" lon="6.048204" lat="50.789781" x="0.00" y="0.00"/>
            <waypoint name="_red5" lon="6.047626" lat="50.788865" x="0.00" y="0.00"/>
            <waypoint name="_red6" lon="6.046744" lat="50.788209" x="0.00" y="0.00"/>
            <waypoint name="_red7" lon="6.045032" lat="50.789046" x="0.00" y="0.00"/>
            <waypoint name="_red8" lon="6.046338" lat="50.790416" x="0.00" y="0.00"/>
            <waypoint name="_vision1" lon="6.047338" lat="50.789622" x="0.00" y="0.00"/>
            <waypoint name="_vision2" lon="6.047115" lat="50.789352" x="0.00" y="0.00"/>
            <waypoint name="_vision3" lon="6.046932" lat="50.789443" x="0.00" y="0.00"/>
            <waypoint name="_vision4" lon="6.047205" lat="50.789662" x="0.00" y="0.00"/>
            <waypoint name="_land1" lon="6.046939" lat="50.788606" x="0.00" y="0.00"/>
            <waypoint name="_land2" lon="6.046810" lat="50.788686" x="0.00" y="0.00"/>
            <waypoint name="_land3" lon="6.046949" lat="50.788813" x="0.00" y="0.00"/>
            <waypoint name="_land4" lon="6.047124" lat="50.788737" x="0.00" y="0.00"/>
          </waypoints>
          <sectors>
            <sector name="RED" color="red">
              <corner name="_red1"/>
              <corner name="_red2"/>
              <corner name="_red3"/>
              <corner name="_red4"/>
              <corner name="_red5"/>
              <corner name="_red6"/>
              <corner name="_red7"/>
              <corner name="_red8"/>
            </sector>
            <sector name="GREEN1" color="green">
              <corner name="_green1A"/>
              <corner name="_green1B"/>
              <corner name="_green1C"/>
              <corner name="_green1D"/>
              <corner name="_green1E"/>
              <corner name="_green1F"/>
            </sector>
            <sector name="GREEN2" color="green">
              <corner name="_green2A"/>
              <corner name="_green2B"/>
              <corner name="_green2C"/>
              <corner name="_green2D"/>
            </sector>
            <sector name="TENNIS" color="green">
              <corner name="_vision1"/>
              <corner name="_vision2"/>
              <corner name="_vision3"/>
              <corner name="_vision4"/>
            </sector>
            <sector name="LAND" color="green">
              <corner name="_land1"/>
              <corner name="_land2"/>
              <corner name="_land3"/>
              <corner name="_land4"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Dummy" no="0"/>
            <block name="Mission.WaitGPS" no="1">
              <call fun="NavKillThrottle()" no="0"/>
              <while cond="!(GpsFixValid())" no="1"/>
            </block>
            <block name="Mission.GeoInit" no="2">
              <while cond="LessThan(NavBlockTime(),10)" no="0"/>
              <call fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Mission.holding_point" no="3">
              <call fun="NavKillThrottle()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Start Engine" strip_icon="resurrect.png" group="engine" name="Mission.Start Engine" no="4">
              <call fun="NavResurrect()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Takeoff-Standby" strip_icon="takeoff.png" group="takeoff" name="Mission.Takeoff-Standby" no="5">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.Standby"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Map" strip_icon="survey.png" group="takeoff" name="Mission.Takeoff-Map" no="6">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.SurveyPoly"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Drop" strip_icon="parachute.png" group="takeoff" name="Mission.Takeoff-Drop" no="7">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.drop"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Water" group="takeoff" name="Mission.Takeoff-Water" no="8">
              <exception cond="((stateGetPositionEnu_f())->z>27.000000)" deroute="Mission.drop_water"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Standby" strip_icon="home.png" group="hover" name="Mission.Standby" no="9">
              <stay wp="STDBY" no="0"/>
            </block>
            <block strip_button="LookRobot-FC" strip_icon="lookdown.png" group="hover" name="Mission.GoTennis" no="10">
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
              <go wp="CRUISE" no="1"/>
            </block>
            <block name="Mission.LookRobot" no="11">
              <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
            </block>
            <block name="Mission.Vision" no="12">
              <exception cond="!(InsideTENNIS(GetPosX(),GetPosY()))" deroute="Mission.NoVision"/>
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndVisualLand"/>
              <call fun="StartVision()" no="0"/>
              <stay wp="CAM" no="1"/>
            </block>
            <block name="Mission.NoVision" no="13">
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndLand"/>
              <call fun="StartVision()" no="0"/>
              <stay wp="FC" no="1"/>
            </block>
            <block strip_button="ComeBackAndLand" strip_icon="land-right.png" group="hover" name="Mission.ComeBackAndLand" no="14">
              <call fun="StopVision()" no="0"/>
              <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <go wp="CRUISE" no="4"/>
              <deroute block="Mission.land" no="5"/>
            </block>
            <block name="Mission.ComeBackAndVisualLand" no="15">
              <call fun="StopVision()" no="0"/>
              <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
              <go wp="CRUISE" no="5"/>
              <deroute block="Mission.visual_flare" no="6"/>
            </block>
            <block strip_button="Follow-Vision-Geolocation-Results" strip_icon="lookdown.png" group="hover" name="Mission.CAM" no="16">
              <stay wp="CAM" no="0"/>
            </block>
            <block name="Mission.stay_p1" no="17">
              <stay wp="p1" no="0"/>
            </block>
            <block name="Mission.go_p2" no="18">
              <go wp="p2" no="0"/>
              <deroute block="Mission.stay_p1" no="1"/>
            </block>
            <block name="Mission.line_p1_p2" no="19">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <stay until="(stage_time>10)" wp="p2" no="1"/>
              <go from="p2" hmode="route" wp="p1" no="2"/>
              <deroute block="Mission.stay_p1" no="3"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="Mission.circle CV" no="20">
              <circle radius="nav_radius" wp="CAM" no="0"/>
            </block>
            <block group="drop" name="Mission.drop" no="21">
              <go wp="DROP" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone1" no="22">
              <go wp="RZ1" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone2" no="23">
              <go wp="RZ2" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone3" no="24">
              <go wp="RZ3" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_water" no="25">
              <go wp="WD" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block strip_button="Oval p1-p2-p3-p4" strip_icon="oval.png" group="race" name="Mission.race" no="26">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <go from="p2" hmode="route" wp="p3" no="1"/>
              <go from="p3" hmode="route" wp="p4" no="2"/>
              <go from="p4" hmode="route" wp="p1" no="3"/>
              <deroute block="Mission.race" no="4"/>
            </block>
            <block strip_button="Line raceA-raceB" strip_icon="line.png" group="race" name="Mission.raceline" no="27">
              <go from="raceA" hmode="route" wp="raceB" no="0"/>
              <go from="raceB" hmode="route" wp="raceA" no="1"/>
              <deroute block="Mission.raceline" no="2"/>
            </block>
            <block group="survey" strip_button="Survey-Polygon-S1-S2-S3-S4" strip_icon="googleearth.png" name="Mission.SurveyPoly" no="28">
              <call fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
              <deroute block="Mission.Survey Poly RUN" no="1"/>
            </block>
            <block name="Mission.Survey Poly RUN" no="29">
              <exception cond="(PolySurveySweepNum>=5)" deroute="Mission.GoTennis"/>
              <call fun="nav_survey_poly_run()" no="0"/>
            </block>
            <block strip_button="Land Here" strip_icon="downdown.png" group="landing" name="Mission.land_here" no="30">
              <call fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
              <call fun="NavSetWaypointHere(WP_TD)" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="Land at TD" strip_icon="land-right.png" group="landing" name="Mission.land" no="31">
              <go wp="TD" no="0"/>
              <call fun="StartVisionLand()" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="VisualLanding-CAM" strip_icon="cam_lock.png" group="landing" name="Mission.visual_flare" no="32">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <exception cond="!(InsideLAND(GetPosX(),GetPosY()))" deroute="Mission.land"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.flare" no="33">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block strip_button="Kill" strip_icon="kill.png" group="landing" name="Mission.landed" no="34">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="Mission.land_emergency" no="35">
              <call fun="NavSetWaypointHere(WP_ETD)" no="0"/>
              <deroute block="Mission.flare_emergency" no="1"/>
            </block>
            <block name="Mission.flare_emergency" no="36">
              <exception cond="NavDetectGround()" deroute="Mission.landed_emergency"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed_emergency"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.landed_emergency" no="37">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="HOME" no="38">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="38" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="37" block_name="Mission.landed_emergency" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="1">
            <deroute block="Mission.flare_emergency" no="1"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="0">
            <call fun="NavSetWaypointHere(WP_ETD)" no="0"/>
          </stage>
          <stage block="34" block_name="Mission.landed" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="1">
            <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="1">
            <call fun="StartVisionLand()" no="1"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="1">
            <call fun="NavSetWaypointHere(WP_TD)" no="1"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="0">
            <call fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
          </stage>
          <stage block="29" block_name="Mission.Survey Poly RUN" stage="0">
            <call fun="nav_survey_poly_run()" no="0"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="1">
            <deroute block="Mission.Survey Poly RUN" no="1"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="0">
            <call fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="2">
            <deroute block="Mission.raceline" no="2"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="1">
            <go from="raceB" hmode="route" wp="raceA" no="1"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="0">
            <go from="raceA" hmode="route" wp="raceB" no="0"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="4">
            <deroute block="Mission.race" no="4"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="3">
            <go from="p4" hmode="route" wp="p1" no="3"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="2">
            <go from="p3" hmode="route" wp="p4" no="2"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="1">
            <go from="p2" hmode="route" wp="p3" no="1"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="0">
            <go wp="WD" no="0"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="0">
            <go wp="RZ3" no="0"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="0">
            <go wp="RZ2" no="0"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="0">
            <go wp="RZ1" no="0"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="0">
            <go wp="DROP" no="0"/>
          </stage>
          <stage block="20" block_name="Mission.circle CV" stage="0">
            <circle radius="nav_radius" wp="CAM" no="0"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="3">
            <deroute block="Mission.stay_p1" no="3"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="2">
            <go from="p2" hmode="route" wp="p1" no="2"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="1">
            <stay until="(stage_time>10)" wp="p2" no="1"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="1">
            <deroute block="Mission.stay_p1" no="1"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="17" block_name="Mission.stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="16" block_name="Mission.CAM" stage="0">
            <stay wp="CAM" no="0"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="6">
            <deroute block="Mission.visual_flare" no="6"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="5">
            <go wp="CRUISE" no="5"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="4">
            <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="3">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="1">
            <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="0">
            <call fun="StopVision()" no="0"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="5">
            <deroute block="Mission.land" no="5"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="4">
            <go wp="CRUISE" no="4"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="3">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="1">
            <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="0">
            <call fun="StopVision()" no="0"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="1">
            <stay wp="FC" no="1"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="0">
            <call fun="StartVision()" no="0"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="1">
            <stay wp="CAM" no="1"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="0">
            <call fun="StartVision()" no="0"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="1">
            <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="0">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="1">
            <go wp="CRUISE" no="1"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="0">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
          </stage>
          <stage block="9" block_name="Mission.Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="0">
            <call fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="2">
            <call fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="0">
            <while cond="LessThan(NavBlockTime(),10)" no="0"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="1">
            <while cond="!(GpsFixValid())" no="1"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="video_thread.take_shot" STEP="1" SHORTNAME="take_shot" MODULE="computer_vision/video_thread" MIN="0" MAX="1" HANDLER="take_shot">
                <strip_button VALUE="1" NAME="Videothread Save Jpeg" ICON="digital-camera.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="video_thread.fps" STEP="1" SHORTNAME="fps" PARAM="VIDEO_THREAD_FPS" MODULE="computer_vision/video_thread" MIN="1" MAX="25"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="ColorFilter">
              <dl_setting VAR="color_lum_min" STEP="1" SHORTNAME="y_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_lum_max" STEP="1" SHORTNAME="y_max" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cb_min" STEP="1" SHORTNAME="u_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cb_max" STEP="1" SHORTNAME="u_max" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cr_min" STEP="1" SHORTNAME="v_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cr_max" STEP="1" SHORTNAME="v_max" MIN="0" MAX="255"/>
              <dl_setting VAR="marker_size" STEP="1" SHORTNAME="marker" MIN="1" MAX="20"/>
              <dl_setting VAR="geofilter_length" STEP="1" SHORTNAME="filter" MIN="1" MAX="100"/>
              <dl_setting VAR="record_video" VALUES="OFF|ON" STEP="1" SHORTNAME="record" MIN="0" MAX="1"/>
              <dl_setting VAR="cv_blob_locator_reset" STEP="1" MODULE="computer_vision/cv_blob_locator" MIN="0" MAX="1" HANDLER="GeoReset">
                <strip_button VALUE="1" NAME="Reset Geoprojection Filter" ICON="resurrect.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="cv_blob_locator_type" VALUES="NONE|BLOB|IMAVMARKER|WINDOW" STEP="1" MODULE="computer_vision/cv_blob_locator" MIN="0" MAX="2">
                <strip_button VALUE="0" NAME="CV: None" ICON="off.png" GROUP="cv"/>
                <strip_button VALUE="1" NAME="CV: Colored Blob" ICON="cv_blob.png" GROUP="cv"/>
                <strip_button VALUE="2" NAME="CV: Marker" ICON="cv_marker.png" GROUP="cv"/>
                <strip_button VALUE="3" NAME="CV: Window Finder" ICON="cv_window.png" GROUP="cv"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="viewvideo.use_rtp" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="rtp" PARAM="VIEWVIDEO_USE_RTP" MODULE="computer_vision/viewvideo" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="P_Survey">
              <dl_setting VAR="Poly_Size" TYPE="uint8_t" STEP="1" SHORTNAME="Size" MODULE="modules/nav/nav_survey_poly_rotorcraft" MIN="0" MAX="20"/>
              <dl_setting VAR="Poly_Distance" TYPE="float" STEP="1" SHORTNAME="Sweep" MODULE="modules/nav/nav_survey_poly_rotorcraft" MIN="0" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="control">
            <dl_settings NAME="dc">
              <dl_setting VAR="0" STEP="1" SHORTNAME="Shutter" MODULE="digital_cam/dc" MIN="0" MAX="255" HANDLER="send_command">
                <strip_button VALUE="32" NAME="Photo" ICON="digital-camera.png" GROUP="dc"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot" VALUES="STOP|PERIODIC|DISTANCE|EXT_TRIG" STEP="1" MIN="0" MAX="3">
                <strip_button VALUE="1" NAME="Start Autoshoot" ICON="dcstart.png" GROUP="dc"/>
                <strip_button VALUE="0" NAME="Stop Autoshoot" ICON="dcstop.png" GROUP="dc"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot_period" UNIT="sec" STEP="0.5" SHORTNAME="Periodic" PARAM="DC_AUTOSHOOT_PERIOD" MIN="0.1" MAX="60"/>
              <dl_setting VAR="dc_distance_interval" UNIT="meter" STEP="1" SHORTNAME="dist" PARAM="DC_AUTOSHOOT_DISTANCE_INTERVAL" MIN="0" MAX="255"/>
              <dl_setting VAR="dc_survey_interval" STEP="5" SHORTNAME="Survey-Interval" MODULE="digital_cam/dc" MIN="0" MAX="250" HANDLER="Survey"/>
              <dl_setting VAR="dc_circle_interval" STEP="5" SHORTNAME="Circle-Interval" MODULE="digital_cam/dc" MIN="5" MAX="90" HANDLER="Circle"/>
              <dl_setting VAR="dc_cam_tracing" STEP="1" SHORTNAME="Cam-Tracing" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop_indi">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop"/>
          <target NAME="nps" BOARD="pc">
            <subsystem TYPE="jsbsim" NAME="fdm"/>
            <subsystem NAME="udp"/>
          </target>
          <subsystem TYPE="transparent_udp" NAME="telemetry"/>
          <subsystem TYPE="datalink" NAME="radio_control"/>
          <subsystem NAME="motor_mixing"/>
          <subsystem TYPE="bebop" NAME="actuators"/>
          <subsystem TYPE="bebop" NAME="imu"/>
          <subsystem TYPE="furuno" NAME="gps"/>
          <subsystem TYPE="indi" NAME="stabilization"/>
          <subsystem TYPE="float_mlkf" NAME="ahrs"/>
          <subsystem TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
            <configure VALUE="int_cmpl_quat" NAME="SECONDARY_AHRS"/>
          </subsystem>
          <subsystem TYPE="extended" NAME="ins"/>
        </firmware>
        <modules MAIN_FREQ="512">
          <load NAME="geo_mag.xml"/>
          <load NAME="air_data.xml"/>
          <load NAME="send_imu_mag_current.xml"/>
          <load NAME="video_thread.xml">
            <define VALUE="4" NAME="VIDEO_THREAD_FPS"/>
            <define VALUE="bottom_camera" NAME="VIDEO_THREAD_CAMERA"/>
            <define VALUE="/data/ftp/internal_000/images" NAME="VIDEO_THREAD_SHOT_PATH"/>
          </load>
          <load NAME="cv_blob_locator.xml"/>
          <load NAME="video_rtp_stream.xml">
            <define VALUE="60" NAME="VIEWVIDEO_QUALITY_FACTOR"/>
            <define VALUE="2" NAME="VIEWVIDEO_DOWNSIZE_FACTOR"/>
          </load>
          <load NAME="nav_survey_rectangle_rotorcraft.xml">
            <define VALUE="10" NAME="RECTANGLE_SURVEY_DEFAULT_SWEEP"/>
          </load>
          <load NAME="nav_survey_poly_rotorcraft.xml">
            <define VALUE="10" NAME="POLYSURVEY_DEFAULT_DISTANCE"/>
          </load>
          <load NAME="digital_cam_video.xml">
            <define VALUE="5" NAME="DC_AUTOSHOOT_DISTANCE_INTERVAL"/>
          </load>
          <load NAME="video_exif.xml"/>
        </modules>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_motors_on,FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <include HREF="conf/airframes/TUDelft/calibrations/bebop8.xml"/>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="10000" NAME="SP_MAX_P"/>
          <define VALUE="10000" NAME="SP_MAX_Q"/>
          <define VALUE="10000" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="4" NAME="REF_TAU"/>
          <define VALUE="400" NAME="GAIN_P"/>
          <define VALUE="400" NAME="GAIN_Q"/>
          <define VALUE="350" NAME="GAIN_R"/>
          <define VALUE="75" NAME="IGAIN_P"/>
          <define VALUE="75" NAME="IGAIN_Q"/>
          <define VALUE="50" NAME="IGAIN_R"/>
          <define VALUE="300" NAME="DDGAIN_P"/>
          <define VALUE="300" NAME="DDGAIN_Q"/>
          <define VALUE="300" NAME="DDGAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.0639" NAME="G1_P"/>
          <define VALUE="0.0361" NAME="G1_Q"/>
          <define VALUE="0.0022" NAME="G1_R"/>
          <define VALUE="0.1450" NAME="G2_R"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="50.0" NAME="FILT_OMEGA"/>
          <define VALUE="0.55" NAME="FILT_ZETA"/>
          <define VALUE="50.0" NAME="FILT_OMEGA_R"/>
          <define VALUE="0.55" NAME="FILT_ZETA_R"/>
          <define VALUE="0.1" NAME="ACT_DYN_P"/>
          <define VALUE="0.1" NAME="ACT_DYN_Q"/>
          <define VALUE="0.1" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="15" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="2.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.9" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="11.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="11.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="false" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="2000"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="indi">
            <dl_setting VAR="reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.p" STEP="1" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.q" STEP="1" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.r" STEP="0.01" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="use_adaptive_indi" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="gh_ref.max_speed" STEP="0.1" SHORTNAME="max_speed" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed">
              <strip_button VALUE="1" NAME="V1" GROUP="speed"/>
              <strip_button VALUE="2" NAME="V2" GROUP="speed"/>
              <strip_button VALUE="5" NAME="V5" GROUP="speed"/>
              <strip_button VALUE="10" NAME="V10" GROUP="speed"/>
            </dl_setting>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="frog2" ac_id="26" airframe="airframes/BR/bebop_indi_frog2.xml" radio="radios/dummy.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/Tudelft/rotorcraft_survey_competition.xml" settings="settings/rotorcraft_basic.xml settings/control/rotorcraft_guidance.xml settings/control/stabilization_att_indi.xml settings/control/rotorcraft_speed.xml" settings_modules="[modules/geo_mag.xml] modules/air_data.xml modules/video_thread.xml modules/cv_blob_locator.xml modules/video_rtp_stream.xml [modules/nav_survey_rectangle_rotorcraft.xml] modules/nav_survey_poly_rotorcraft.xml modules/digital_cam_video.xml" gui_color="#ffff0689b7a1">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitMM" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1120" MIN="1120" MAX="2000" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
      </radio>
      <dump>
        <flight_plan security_height="2" name="IMAV2015_competition_outdoor" max_dist_from_home="500" lon0="6.04692" lat0="50.788595" ground_alt="260" alt="290">
          <exceptions>
            <exception cond="(electrical.bat_low&&(exception_flag[0]==0))" deroute="Mission.ComeBackAndLand" exec="set_exception_flag(0)"/>
            <exception cond="(electrical.bat_critical&&(exception_flag[1]==0))" deroute="Mission.land_here" exec="set_exception_flag(1)"/>
            <exception cond="((((!(InsideRED(GetPosX(),GetPosY()))&&!((nav_block==IndexOfBlock('Mission.flare'))))&&!((nav_block==IndexOfBlock('Mission.landed'))))&&!((nav_block==IndexOfBlock('Mission.WaitGPS'))))&&!((nav_block==IndexOfBlock('Mission.GeoInit'))))" deroute="Mission.land_emergency"/>
          </exceptions>
          <header>#include &quot;autopilot.h&quot;
#include &quot;subsystems/electrical.h&quot;
#ifdef dc_Survey
#define LINE_START_FUNCTION dc_Survey(dc_distance_interval);
#define LINE_STOP_FUNCTION {dc_autoshoot = DC_AUTOSHOOT_STOP;}
#endif
#ifndef DropOpen
#define DropOpen() FALSE
#endif
#ifndef StartVision
#define StartVision() FALSE
#endif
#ifndef StartVisionLand
#define StartVisionLand() FALSE
#endif
#ifndef StopVision
#define StopVision() FALSE
#endif
#define WpAlt(X) (30)</header>
          <waypoints>
            <waypoint name="_PLATE1" lon="6.04674224830944" lat="50.7888090239206" x="0.00" y="0.00"/>
            <waypoint name="_PLATE2" lon="6.04647268082583" lat="50.7890460391004" x="0.00" y="0.00"/>
            <waypoint name="_PLATE3" lon="6.04631880264475" lat="50.7888723417903" x="0.00" y="0.00"/>
            <waypoint y=".0" x="0.0" name="HOME"/>
            <waypoint y="15.4" x="-7.6" name="CLIMB"/>
            <waypoint y="24.0" x="-3.7" name="STDBY"/>
            <waypoint name="raceA" lon="6.047899" lat="50.790483" x="0.00" y="0.00"/>
            <waypoint name="raceB" lon="6.050200" lat="50.791800" x="0.00" y="0.00"/>
            <waypoint name="WG" lon="6.047431" lat="50.789794" x="0.00" y="0.00"/>
            <waypoint name="WD" lon="6.04677769236132" lat="50.7889307058111" height="30" x="0.00" y="0.00"/>
            <waypoint name="DROP" lon="6.04652336854142" lat="50.788775526101" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ1" lon="6.04652336854142" lat="50.788775526101" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ2" lon="6.04640018582595" lat="50.7889170568219" height="15" x="0.00" y="0.00"/>
            <waypoint name="RZ3" lon="6.04642327267965" lat="50.7889755961272" height="15" x="0.00" y="0.00"/>
            <waypoint name="FC" lon="6.047118" lat="50.789522" height="20" x="0.00" y="0.00"/>
            <waypoint y="95.0" x="27.5" name="CAM" height="20"/>
            <waypoint name="S1" lon="6.046721" lat="50.788597" x="0.00" y="0.00"/>
            <waypoint name="S2" lon="6.045944" lat="50.788973" x="0.00" y="0.00"/>
            <waypoint name="S3" lon="6.046330" lat="50.789323" x="0.00" y="0.00"/>
            <waypoint name="S4" lon="6.047113" lat="50.788917" x="0.00" y="0.00"/>
            <waypoint name="p1" lon="6.047864" lat="50.790483" x="0.00" y="0.00"/>
            <waypoint name="p2" lon="6.047897" lat="50.790463" x="0.00" y="0.00"/>
            <waypoint name="p3" lon="6.050232" lat="50.791799" x="0.00" y="0.00"/>
            <waypoint name="p4" lon="6.050201" lat="50.791818" x="0.00" y="0.00"/>
            <waypoint y="-55.4" x="19.2" name="CRUISE" height="25"/>
            <waypoint name="TD" lon="6.04695109268497" lat="50.7887171157922" height="15" x="0.00" y="0.00"/>
            <waypoint y="0" x="0" name="ETD" height="15"/>
            <waypoint name="_green1A" lon="6.046879" lat="50.790144" x="0.00" y="0.00"/>
            <waypoint name="_green1B" lon="6.047844" lat="50.789748" x="0.00" y="0.00"/>
            <waypoint name="_green1C" lon="6.047072" lat="50.789058" x="0.00" y="0.00"/>
            <waypoint name="_green1D" lon="6.047391" lat="50.788919" x="0.00" y="0.00"/>
            <waypoint name="_green1E" lon="6.046880" lat="50.788477" x="0.00" y="0.00"/>
            <waypoint name="_green1F" lon="6.045554" lat="50.789113" x="0.00" y="0.00"/>
            <waypoint name="_green2A" lon="6.050405" lat="50.792252" x="0.00" y="0.00"/>
            <waypoint name="_green2B" lon="6.050962" lat="50.791915" x="0.00" y="0.00"/>
            <waypoint name="_green2C" lon="6.047761" lat="50.790077" x="0.00" y="0.00"/>
            <waypoint name="_green2D" lon="6.047251" lat="50.790426" x="0.00" y="0.00"/>
            <waypoint name="_red1" lon="6.050093" lat="50.792552" x="0.00" y="0.00"/>
            <waypoint name="_red2" lon="6.051268" lat="50.791882" x="0.00" y="0.00"/>
            <waypoint name="_red3" lon="6.047834" lat="50.789988" x="0.00" y="0.00"/>
            <waypoint name="_red4" lon="6.048204" lat="50.789781" x="0.00" y="0.00"/>
            <waypoint name="_red5" lon="6.047626" lat="50.788865" x="0.00" y="0.00"/>
            <waypoint name="_red6" lon="6.046744" lat="50.788209" x="0.00" y="0.00"/>
            <waypoint name="_red7" lon="6.045032" lat="50.789046" x="0.00" y="0.00"/>
            <waypoint name="_red8" lon="6.046338" lat="50.790416" x="0.00" y="0.00"/>
            <waypoint name="_vision1" lon="6.047338" lat="50.789622" x="0.00" y="0.00"/>
            <waypoint name="_vision2" lon="6.047115" lat="50.789352" x="0.00" y="0.00"/>
            <waypoint name="_vision3" lon="6.046932" lat="50.789443" x="0.00" y="0.00"/>
            <waypoint name="_vision4" lon="6.047205" lat="50.789662" x="0.00" y="0.00"/>
            <waypoint name="_land1" lon="6.046939" lat="50.788606" x="0.00" y="0.00"/>
            <waypoint name="_land2" lon="6.046810" lat="50.788686" x="0.00" y="0.00"/>
            <waypoint name="_land3" lon="6.046949" lat="50.788813" x="0.00" y="0.00"/>
            <waypoint name="_land4" lon="6.047124" lat="50.788737" x="0.00" y="0.00"/>
          </waypoints>
          <sectors>
            <sector name="RED" color="red">
              <corner name="_red1"/>
              <corner name="_red2"/>
              <corner name="_red3"/>
              <corner name="_red4"/>
              <corner name="_red5"/>
              <corner name="_red6"/>
              <corner name="_red7"/>
              <corner name="_red8"/>
            </sector>
            <sector name="GREEN1" color="green">
              <corner name="_green1A"/>
              <corner name="_green1B"/>
              <corner name="_green1C"/>
              <corner name="_green1D"/>
              <corner name="_green1E"/>
              <corner name="_green1F"/>
            </sector>
            <sector name="GREEN2" color="green">
              <corner name="_green2A"/>
              <corner name="_green2B"/>
              <corner name="_green2C"/>
              <corner name="_green2D"/>
            </sector>
            <sector name="TENNIS" color="green">
              <corner name="_vision1"/>
              <corner name="_vision2"/>
              <corner name="_vision3"/>
              <corner name="_vision4"/>
            </sector>
            <sector name="LAND" color="green">
              <corner name="_land1"/>
              <corner name="_land2"/>
              <corner name="_land3"/>
              <corner name="_land4"/>
            </sector>
          </sectors>
          <blocks>
            <block name="Dummy" no="0"/>
            <block name="Mission.WaitGPS" no="1">
              <call fun="NavKillThrottle()" no="0"/>
              <while cond="!(GpsFixValid())" no="1"/>
            </block>
            <block name="Mission.GeoInit" no="2">
              <while cond="LessThan(NavBlockTime(),10)" no="0"/>
              <call fun="NavSetGroundReferenceHere()" no="2"/>
            </block>
            <block name="Mission.holding_point" no="3">
              <call fun="NavKillThrottle()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Start Engine" strip_icon="resurrect.png" group="engine" name="Mission.Start Engine" no="4">
              <call fun="NavResurrect()" no="0"/>
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
            </block>
            <block strip_button="Takeoff-Standby" strip_icon="takeoff.png" group="takeoff" name="Mission.Takeoff-Standby" no="5">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.Standby"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Map" strip_icon="survey.png" group="takeoff" name="Mission.Takeoff-Map" no="6">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.SurveyPoly"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Drop" strip_icon="parachute.png" group="takeoff" name="Mission.Takeoff-Drop" no="7">
              <exception cond="((stateGetPositionEnu_f())->z>10.000000)" deroute="Mission.drop"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Takeoff-Water" group="takeoff" name="Mission.Takeoff-Water" no="8">
              <exception cond="((stateGetPositionEnu_f())->z>27.000000)" deroute="Mission.drop_water"/>
              <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
            </block>
            <block strip_button="Standby" strip_icon="home.png" group="hover" name="Mission.Standby" no="9">
              <stay wp="STDBY" no="0"/>
            </block>
            <block strip_button="LookRobot-FC" strip_icon="lookdown.png" group="hover" name="Mission.GoTennis" no="10">
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
              <go wp="CRUISE" no="1"/>
            </block>
            <block name="Mission.LookRobot" no="11">
              <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
            </block>
            <block name="Mission.Vision" no="12">
              <exception cond="!(InsideTENNIS(GetPosX(),GetPosY()))" deroute="Mission.NoVision"/>
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndVisualLand"/>
              <call fun="StartVision()" no="0"/>
              <stay wp="CAM" no="1"/>
            </block>
            <block name="Mission.NoVision" no="13">
              <exception cond="(block_time>60)" deroute="Mission.ComeBackAndLand"/>
              <call fun="StartVision()" no="0"/>
              <stay wp="FC" no="1"/>
            </block>
            <block strip_button="ComeBackAndLand" strip_icon="land-right.png" group="hover" name="Mission.ComeBackAndLand" no="14">
              <call fun="StopVision()" no="0"/>
              <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <go wp="CRUISE" no="4"/>
              <deroute block="Mission.land" no="5"/>
            </block>
            <block name="Mission.ComeBackAndVisualLand" no="15">
              <call fun="StopVision()" no="0"/>
              <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
              <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
              <go wp="CRUISE" no="5"/>
              <deroute block="Mission.visual_flare" no="6"/>
            </block>
            <block strip_button="Follow-Vision-Geolocation-Results" strip_icon="lookdown.png" group="hover" name="Mission.CAM" no="16">
              <stay wp="CAM" no="0"/>
            </block>
            <block name="Mission.stay_p1" no="17">
              <stay wp="p1" no="0"/>
            </block>
            <block name="Mission.go_p2" no="18">
              <go wp="p2" no="0"/>
              <deroute block="Mission.stay_p1" no="1"/>
            </block>
            <block name="Mission.line_p1_p2" no="19">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <stay until="(stage_time>10)" wp="p2" no="1"/>
              <go from="p2" hmode="route" wp="p1" no="2"/>
              <deroute block="Mission.stay_p1" no="3"/>
            </block>
            <block pre_call="nav_set_heading_towards_waypoint(WP_CAM)" name="Mission.circle CV" no="20">
              <circle radius="nav_radius" wp="CAM" no="0"/>
            </block>
            <block group="drop" name="Mission.drop" no="21">
              <go wp="DROP" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone1" no="22">
              <go wp="RZ1" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone2" no="23">
              <go wp="RZ2" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_zone3" no="24">
              <go wp="RZ3" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block group="drop" name="Mission.drop_water" no="25">
              <go wp="WD" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
              <call fun="DropOpen()" no="2"/>
              <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
              <deroute block="Mission.land" no="4"/>
            </block>
            <block strip_button="Oval p1-p2-p3-p4" strip_icon="oval.png" group="race" name="Mission.race" no="26">
              <go from="p1" hmode="route" wp="p2" no="0"/>
              <go from="p2" hmode="route" wp="p3" no="1"/>
              <go from="p3" hmode="route" wp="p4" no="2"/>
              <go from="p4" hmode="route" wp="p1" no="3"/>
              <deroute block="Mission.race" no="4"/>
            </block>
            <block strip_button="Line raceA-raceB" strip_icon="line.png" group="race" name="Mission.raceline" no="27">
              <go from="raceA" hmode="route" wp="raceB" no="0"/>
              <go from="raceB" hmode="route" wp="raceA" no="1"/>
              <deroute block="Mission.raceline" no="2"/>
            </block>
            <block group="survey" strip_button="Survey-Polygon-S1-S2-S3-S4" strip_icon="googleearth.png" name="Mission.SurveyPoly" no="28">
              <call fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
              <deroute block="Mission.Survey Poly RUN" no="1"/>
            </block>
            <block name="Mission.Survey Poly RUN" no="29">
              <exception cond="(PolySurveySweepNum>=5)" deroute="Mission.GoTennis"/>
              <call fun="nav_survey_poly_run()" no="0"/>
            </block>
            <block strip_button="Land Here" strip_icon="downdown.png" group="landing" name="Mission.land_here" no="30">
              <call fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
              <call fun="NavSetWaypointHere(WP_TD)" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="Land at TD" strip_icon="land-right.png" group="landing" name="Mission.land" no="31">
              <go wp="TD" no="0"/>
              <call fun="StartVisionLand()" no="1"/>
              <deroute block="Mission.flare" no="2"/>
            </block>
            <block strip_button="VisualLanding-CAM" strip_icon="cam_lock.png" group="landing" name="Mission.visual_flare" no="32">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <exception cond="!(InsideLAND(GetPosX(),GetPosY()))" deroute="Mission.land"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.flare" no="33">
              <exception cond="NavDetectGround()" deroute="Mission.holding_point"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block strip_button="Kill" strip_icon="kill.png" group="landing" name="Mission.landed" no="34">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="Mission.land_emergency" no="35">
              <call fun="NavSetWaypointHere(WP_ETD)" no="0"/>
              <deroute block="Mission.flare_emergency" no="1"/>
            </block>
            <block name="Mission.flare_emergency" no="36">
              <exception cond="NavDetectGround()" deroute="Mission.landed_emergency"/>
              <exception cond="!(nav_is_in_flight())" deroute="Mission.landed_emergency"/>
              <call fun="NavStartDetectGround()" no="0"/>
              <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
              <deroute block="Mission.landed" no="2"/>
            </block>
            <block name="Mission.landed_emergency" no="37">
              <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
            </block>
            <block name="HOME" no="38">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="38" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
          <stage block="37" block_name="Mission.landed_emergency" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="ETD" no="1"/>
          </stage>
          <stage block="36" block_name="Mission.flare_emergency" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="1">
            <deroute block="Mission.flare_emergency" no="1"/>
          </stage>
          <stage block="35" block_name="Mission.land_emergency" stage="0">
            <call fun="NavSetWaypointHere(WP_ETD)" no="0"/>
          </stage>
          <stage block="34" block_name="Mission.landed" stage="0">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="0"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="TD" no="1"/>
          </stage>
          <stage block="33" block_name="Mission.flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="2">
            <deroute block="Mission.landed" no="2"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="1">
            <stay climb="-(0.200000)" vmode="climb" wp="CAM" no="1"/>
          </stage>
          <stage block="32" block_name="Mission.visual_flare" stage="0">
            <call fun="NavStartDetectGround()" no="0"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="1">
            <call fun="StartVisionLand()" no="1"/>
          </stage>
          <stage block="31" block_name="Mission.land" stage="0">
            <go wp="TD" no="0"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="2">
            <deroute block="Mission.flare" no="2"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="1">
            <call fun="NavSetWaypointHere(WP_TD)" no="1"/>
          </stage>
          <stage block="30" block_name="Mission.land_here" stage="0">
            <call fun="NavCopyWaypoint(WP_CAM,WP_TD)" no="0"/>
          </stage>
          <stage block="29" block_name="Mission.Survey Poly RUN" stage="0">
            <call fun="nav_survey_poly_run()" no="0"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="1">
            <deroute block="Mission.Survey Poly RUN" no="1"/>
          </stage>
          <stage block="28" block_name="Mission.SurveyPoly" stage="0">
            <call fun="nav_survey_poly_setup_towards(WP_S1,4,sweep,WP_S2)" no="0"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="2">
            <deroute block="Mission.raceline" no="2"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="1">
            <go from="raceB" hmode="route" wp="raceA" no="1"/>
          </stage>
          <stage block="27" block_name="Mission.raceline" stage="0">
            <go from="raceA" hmode="route" wp="raceB" no="0"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="4">
            <deroute block="Mission.race" no="4"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="3">
            <go from="p4" hmode="route" wp="p1" no="3"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="2">
            <go from="p3" hmode="route" wp="p4" no="2"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="1">
            <go from="p2" hmode="route" wp="p3" no="1"/>
          </stage>
          <stage block="26" block_name="Mission.race" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="WD" until="((stateGetPositionEnu_f())->z>12)" no="3"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="WD" until="LessThan((stateGetPositionEnu_f())->z,8)" no="1"/>
          </stage>
          <stage block="25" block_name="Mission.drop_water" stage="0">
            <go wp="WD" no="0"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ3" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ3" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="24" block_name="Mission.drop_zone3" stage="0">
            <go wp="RZ3" no="0"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ2" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ2" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="23" block_name="Mission.drop_zone2" stage="0">
            <go wp="RZ2" no="0"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="RZ1" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="RZ1" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="22" block_name="Mission.drop_zone1" stage="0">
            <go wp="RZ1" no="0"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="4">
            <deroute block="Mission.land" no="4"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="3">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="DROP" until="((stateGetPositionEnu_f())->z>13)" no="3"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="2">
            <call fun="DropOpen()" no="2"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="1">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="DROP" until="LessThan((stateGetPositionEnu_f())->z,6)" no="1"/>
          </stage>
          <stage block="21" block_name="Mission.drop" stage="0">
            <go wp="DROP" no="0"/>
          </stage>
          <stage block="20" block_name="Mission.circle CV" stage="0">
            <circle radius="nav_radius" wp="CAM" no="0"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="3">
            <deroute block="Mission.stay_p1" no="3"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="2">
            <go from="p2" hmode="route" wp="p1" no="2"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="1">
            <stay until="(stage_time>10)" wp="p2" no="1"/>
          </stage>
          <stage block="19" block_name="Mission.line_p1_p2" stage="0">
            <go from="p1" hmode="route" wp="p2" no="0"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="1">
            <deroute block="Mission.stay_p1" no="1"/>
          </stage>
          <stage block="18" block_name="Mission.go_p2" stage="0">
            <go wp="p2" no="0"/>
          </stage>
          <stage block="17" block_name="Mission.stay_p1" stage="0">
            <stay wp="p1" no="0"/>
          </stage>
          <stage block="16" block_name="Mission.CAM" stage="0">
            <stay wp="CAM" no="0"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="6">
            <deroute block="Mission.visual_flare" no="6"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="5">
            <go wp="CRUISE" no="5"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="4">
            <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_TD)" no="4"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="3">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="1">
            <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="15" block_name="Mission.ComeBackAndVisualLand" stage="0">
            <call fun="StopVision()" no="0"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="5">
            <deroute block="Mission.land" no="5"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="4">
            <go wp="CRUISE" no="4"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="3">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_TD)" no="3"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="2">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CRUISE" until="((stateGetPositionEnu_f())->z>30)" no="2"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="1">
            <call fun="NavSetWaypointHere(WP_CRUISE)" no="1"/>
          </stage>
          <stage block="14" block_name="Mission.ComeBackAndLand" stage="0">
            <call fun="StopVision()" no="0"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="1">
            <stay wp="FC" no="1"/>
          </stage>
          <stage block="13" block_name="Mission.NoVision" stage="0">
            <call fun="StartVision()" no="0"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="1">
            <stay wp="CAM" no="1"/>
          </stage>
          <stage block="12" block_name="Mission.Vision" stage="0">
            <call fun="StartVision()" no="0"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="1">
            <call fun="NavCopyWaypointPositionOnly(WP_CAM,WP_FC)" no="1"/>
          </stage>
          <stage block="11" block_name="Mission.LookRobot" stage="0">
            <stay climb="nav_descend_vspeed" vmode="climb" wp="FC" until="LessThan((stateGetPositionEnu_f())->z,20)" no="0"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="1">
            <go wp="CRUISE" no="1"/>
          </stage>
          <stage block="10" block_name="Mission.GoTennis" stage="0">
            <call fun="NavCopyWaypointPositionOnly(WP_CRUISE,WP_FC)" no="0"/>
          </stage>
          <stage block="9" block_name="Mission.Standby" stage="0">
            <stay wp="STDBY" no="0"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="8" block_name="Mission.Takeoff-Water" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="7" block_name="Mission.Takeoff-Drop" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="6" block_name="Mission.Takeoff-Map" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="1">
            <stay climb="nav_climb_vspeed" vmode="climb" wp="CLIMB" no="1"/>
          </stage>
          <stage block="5" block_name="Mission.Takeoff-Standby" stage="0">
            <call fun="NavSetWaypointHere(WP_CLIMB)" no="0"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="4" block_name="Mission.Start Engine" stage="0">
            <call fun="NavResurrect()" no="0"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="1">
            <attitude pitch="0" roll="0" throttle="0" until="FALSE" vmode="throttle" no="1"/>
          </stage>
          <stage block="3" block_name="Mission.holding_point" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="2">
            <call fun="NavSetGroundReferenceHere()" no="2"/>
          </stage>
          <stage block="2" block_name="Mission.GeoInit" stage="0">
            <while cond="LessThan(NavBlockTime(),10)" no="0"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="1">
            <while cond="!(GpsFixValid())" no="1"/>
          </stage>
          <stage block="1" block_name="Mission.WaitGPS" stage="0">
            <call fun="NavKillThrottle()" no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="video_thread.take_shot" STEP="1" SHORTNAME="take_shot" MODULE="computer_vision/video_thread" MIN="0" MAX="1" HANDLER="take_shot">
                <strip_button VALUE="1" NAME="Videothread Save Jpeg" ICON="digital-camera.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="video_thread.fps" STEP="1" SHORTNAME="fps" PARAM="VIDEO_THREAD_FPS" MODULE="computer_vision/video_thread" MIN="1" MAX="25"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="ColorFilter">
              <dl_setting VAR="color_lum_min" STEP="1" SHORTNAME="y_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_lum_max" STEP="1" SHORTNAME="y_max" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cb_min" STEP="1" SHORTNAME="u_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cb_max" STEP="1" SHORTNAME="u_max" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cr_min" STEP="1" SHORTNAME="v_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cr_max" STEP="1" SHORTNAME="v_max" MIN="0" MAX="255"/>
              <dl_setting VAR="marker_size" STEP="1" SHORTNAME="marker" MIN="1" MAX="20"/>
              <dl_setting VAR="geofilter_length" STEP="1" SHORTNAME="filter" MIN="1" MAX="100"/>
              <dl_setting VAR="record_video" VALUES="OFF|ON" STEP="1" SHORTNAME="record" MIN="0" MAX="1"/>
              <dl_setting VAR="cv_blob_locator_reset" STEP="1" MODULE="computer_vision/cv_blob_locator" MIN="0" MAX="1" HANDLER="GeoReset">
                <strip_button VALUE="1" NAME="Reset Geoprojection Filter" ICON="resurrect.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="cv_blob_locator_type" VALUES="NONE|BLOB|IMAVMARKER|WINDOW" STEP="1" MODULE="computer_vision/cv_blob_locator" MIN="0" MAX="2">
                <strip_button VALUE="0" NAME="CV: None" ICON="off.png" GROUP="cv"/>
                <strip_button VALUE="1" NAME="CV: Colored Blob" ICON="cv_blob.png" GROUP="cv"/>
                <strip_button VALUE="2" NAME="CV: Marker" ICON="cv_marker.png" GROUP="cv"/>
                <strip_button VALUE="3" NAME="CV: Window Finder" ICON="cv_window.png" GROUP="cv"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="viewvideo.use_rtp" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="rtp" PARAM="VIEWVIDEO_USE_RTP" MODULE="computer_vision/viewvideo" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="P_Survey">
              <dl_setting VAR="Poly_Size" TYPE="uint8_t" STEP="1" SHORTNAME="Size" MODULE="modules/nav/nav_survey_poly_rotorcraft" MIN="0" MAX="20"/>
              <dl_setting VAR="Poly_Distance" TYPE="float" STEP="1" SHORTNAME="Sweep" MODULE="modules/nav/nav_survey_poly_rotorcraft" MIN="0" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="control">
            <dl_settings NAME="dc">
              <dl_setting VAR="0" STEP="1" SHORTNAME="Shutter" MODULE="digital_cam/dc" MIN="0" MAX="255" HANDLER="send_command">
                <strip_button VALUE="32" NAME="Photo" ICON="digital-camera.png" GROUP="dc"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot" VALUES="STOP|PERIODIC|DISTANCE|EXT_TRIG" STEP="1" MIN="0" MAX="3">
                <strip_button VALUE="1" NAME="Start Autoshoot" ICON="dcstart.png" GROUP="dc"/>
                <strip_button VALUE="0" NAME="Stop Autoshoot" ICON="dcstop.png" GROUP="dc"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot_period" UNIT="sec" STEP="0.5" SHORTNAME="Periodic" PARAM="DC_AUTOSHOOT_PERIOD" MIN="0.1" MAX="60"/>
              <dl_setting VAR="dc_distance_interval" UNIT="meter" STEP="1" SHORTNAME="dist" PARAM="DC_AUTOSHOOT_DISTANCE_INTERVAL" MIN="0" MAX="255"/>
              <dl_setting VAR="dc_survey_interval" STEP="5" SHORTNAME="Survey-Interval" MODULE="digital_cam/dc" MIN="0" MAX="250" HANDLER="Survey"/>
              <dl_setting VAR="dc_circle_interval" STEP="5" SHORTNAME="Circle-Interval" MODULE="digital_cam/dc" MIN="5" MAX="90" HANDLER="Circle"/>
              <dl_setting VAR="dc_cam_tracing" STEP="1" SHORTNAME="Cam-Tracing" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop_indi">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop"/>
          <target NAME="nps" BOARD="pc">
            <subsystem TYPE="jsbsim" NAME="fdm"/>
            <subsystem NAME="udp"/>
          </target>
          <subsystem TYPE="transparent_udp" NAME="telemetry"/>
          <subsystem TYPE="datalink" NAME="radio_control"/>
          <subsystem NAME="motor_mixing"/>
          <subsystem TYPE="bebop" NAME="actuators"/>
          <subsystem TYPE="bebop" NAME="imu"/>
          <subsystem TYPE="furuno" NAME="gps"/>
          <subsystem TYPE="indi" NAME="stabilization"/>
          <subsystem TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
          </subsystem>
          <subsystem TYPE="extended" NAME="ins"/>
        </firmware>
        <modules MAIN_FREQ="512">
          <load NAME="geo_mag.xml"/>
          <load NAME="air_data.xml"/>
          <load NAME="send_imu_mag_current.xml"/>
          <load NAME="video_thread.xml">
            <define VALUE="4" NAME="VIDEO_THREAD_FPS"/>
            <define VALUE="bottom_camera" NAME="VIDEO_THREAD_CAMERA"/>
            <define VALUE="/data/ftp/internal_000/images" NAME="VIDEO_THREAD_SHOT_PATH"/>
          </load>
          <load NAME="cv_blob_locator.xml"/>
          <load NAME="video_rtp_stream.xml">
            <define VALUE="80" NAME="VIEWVIDEO_QUALITY_FACTOR"/>
            <define VALUE="1" NAME="VIEWVIDEO_DOWNSIZE_FACTOR"/>
          </load>
          <load NAME="nav_survey_rectangle_rotorcraft.xml">
            <define VALUE="10" NAME="RECTANGLE_SURVEY_DEFAULT_SWEEP"/>
          </load>
          <load NAME="nav_survey_poly_rotorcraft.xml">
            <define VALUE="10" NAME="POLYSURVEY_DEFAULT_DISTANCE"/>
          </load>
          <load NAME="digital_cam_video.xml">
            <define VALUE="5" NAME="DC_AUTOSHOOT_DISTANCE_INTERVAL"/>
          </load>
          <load NAME="video_exif.xml"/>
        </modules>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_motors_on,FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <include HREF="conf/airframes/TUDelft/calibrations/bebop4.xml"/>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="10000" NAME="SP_MAX_P"/>
          <define VALUE="10000" NAME="SP_MAX_Q"/>
          <define VALUE="10000" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="4" NAME="REF_TAU"/>
          <define VALUE="400" NAME="GAIN_P"/>
          <define VALUE="400" NAME="GAIN_Q"/>
          <define VALUE="350" NAME="GAIN_R"/>
          <define VALUE="75" NAME="IGAIN_P"/>
          <define VALUE="75" NAME="IGAIN_Q"/>
          <define VALUE="50" NAME="IGAIN_R"/>
          <define VALUE="300" NAME="DDGAIN_P"/>
          <define VALUE="300" NAME="DDGAIN_Q"/>
          <define VALUE="300" NAME="DDGAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.0639" NAME="G1_P"/>
          <define VALUE="0.0361" NAME="G1_Q"/>
          <define VALUE="0.0022" NAME="G1_R"/>
          <define VALUE="0.1450" NAME="G2_R"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="50.0" NAME="FILT_OMEGA"/>
          <define VALUE="0.55" NAME="FILT_ZETA"/>
          <define VALUE="50.0" NAME="FILT_OMEGA_R"/>
          <define VALUE="0.55" NAME="FILT_ZETA_R"/>
          <define VALUE="0.1" NAME="ACT_DYN_P"/>
          <define VALUE="0.1" NAME="ACT_DYN_Q"/>
          <define VALUE="0.1" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="79" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="2.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_ATTITUDE_Z_HOLD" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_NAV" NAME="MODE_AUTO2"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.9" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="11.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="11.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting VAR="guidance_v_kp" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KP" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_kd" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KD" MODULE="guidance/guidance_v" MIN="0" MAX="600"/>
            <dl_setting VAR="guidance_v_ki" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_V_HOVER_KI" MODULE="guidance/guidance_v" MIN="0" MAX="300" HANDLER="SetKi"/>
            <dl_setting VAR="guidance_v_nominal_throttle" STEP="0.01" SHORTNAME="nominal_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_NOMINAL_HOVER_THROTTLE" MODULE="guidance/guidance_v" MIN="0.2" MAX="0.8"/>
            <dl_setting VAR="guidance_v_adapt_throttle_enabled" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="adapt_throttle" PERSISTENT="true" PARAM="GUIDANCE_V_ADAPT_THROTTLE_ENABLED" MODULE="guidance/guidance_v" MIN="0" MAX="1"/>
            <dl_setting VAR="guidance_v_z_sp" UNIT="2e-8m" STEP="0.5" SHORTNAME="sp" MODULE="guidance/guidance_v" MIN="-5" MAX="3" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="guidance_h.use_ref" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="use_ref" PERSISTENT="false" PARAM="GUIDANCE_H_USE_REF" MODULE="guidance/guidance_h" MIN="0" MAX="1" HANDLER="SetUseRef"/>
            <dl_setting VAR="gh_ref.max_speed" TYPE="float" STEP="0.1" SHORTNAME="max_speed" PERSISTENT="true" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed"/>
            <dl_setting VAR="guidance_h.approx_force_by_thrust" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="approx_force" PERSISTENT="true" PARAM="GUIDANCE_H_APPROX_FORCE_BY_THRUST" MODULE="guidance/guidance_h" MIN="0" MAX="1"/>
            <dl_setting VAR="gh_ref.tau" TYPE="float" STEP="0.1" SHORTNAME="tau" PERSISTENT="true" PARAM="GUIDANCE_H_REF_TAU" MODULE="guidance/guidance_h" MIN="0.1" MAX="1.0" HANDLER="SetTau"/>
            <dl_setting VAR="gh_ref.omega" TYPE="float" STEP="0.1" SHORTNAME="omega" PERSISTENT="true" PARAM="GUIDANCE_H_REF_OMEGA" MODULE="guidance/guidance_h" MIN="0.1" MAX="3.0" HANDLER="SetOmega"/>
            <dl_setting VAR="gh_ref.zeta" TYPE="float" STEP="0.05" SHORTNAME="zeta" PERSISTENT="true" PARAM="GUIDANCE_H_REF_ZETA" MODULE="guidance/guidance_h" MIN="0.7" MAX="1.0" HANDLER="SetZeta"/>
            <dl_setting VAR="guidance_h.gains.p" TYPE="int32" STEP="1" SHORTNAME="kp" PERSISTENT="true" PARAM="GUIDANCE_H_PGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="2000"/>
            <dl_setting VAR="guidance_h.gains.d" TYPE="int32" STEP="1" SHORTNAME="kd" PERSISTENT="true" PARAM="GUIDANCE_H_DGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.i" TYPE="int32" STEP="1" SHORTNAME="ki" PERSISTENT="true" PARAM="GUIDANCE_H_IGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400" HANDLER="set_igain"/>
            <dl_setting VAR="guidance_h.gains.v" TYPE="int32" STEP="1" SHORTNAME="kv" PERSISTENT="true" PARAM="GUIDANCE_H_VGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.gains.a" TYPE="int32" STEP="1" SHORTNAME="ka" PERSISTENT="true" PARAM="GUIDANCE_H_AGAIN" MODULE="guidance/guidance_h" MIN="0" MAX="400"/>
            <dl_setting VAR="guidance_h.sp.pos.x" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_x_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
            <dl_setting VAR="guidance_h.sp.pos.y" UNIT="1/2^8m" STEP="1" SHORTNAME="sp_y_ned" MODULE="guidance/guidance_h" MIN="-10" MAX="10" ALT_UNIT_COEF="0.00390625" ALT_UNIT="m"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting VAR="flight_altitude" UNIT="m" STEP="0.1" MODULE="navigation" MIN="0" MAX="400" HANDLER="SetFlightAltitude"/>
            <dl_setting VAR="nav_heading" UNIT="1/2^12r" STEP="1" MODULE="navigation" MIN="0" MAX="360" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"/>
            <dl_setting VAR="nav_radius" UNIT="m" STEP="0.1" MODULE="navigation" MIN="-50" MAX="50"/>
            <dl_setting VAR="nav_climb_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_CLIMB_VSPEED" MODULE="navigation" MIN="0" MAX="10.0"/>
            <dl_setting VAR="nav_descend_vspeed" UNIT="m/s" STEP="0.1" PARAM="NAV_DESCEND_VSPEED" MODULE="navigation" MIN="-10.0" MAX="0.0"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="indi">
            <dl_setting VAR="reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.p" STEP="1" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.q" STEP="1" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.r" STEP="0.01" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="use_adaptive_indi" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting VAR="gh_ref.max_speed" STEP="0.1" SHORTNAME="max_speed" PARAM="GUIDANCE_H_REF_MAX_SPEED" MODULE="guidance/guidance_h" MIN="0.1" MAX="15.0" HANDLER="SetMaxSpeed">
              <strip_button VALUE="1" NAME="V1" GROUP="speed"/>
              <strip_button VALUE="2" NAME="V2" GROUP="speed"/>
              <strip_button VALUE="5" NAME="V5" GROUP="speed"/>
              <strip_button VALUE="10" NAME="V10" GROUP="speed"/>
            </dl_setting>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="frog_flip" ac_id="4" airframe="airframes/BR/bebop_indi_frog_flip.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/dummy.xml" settings="settings/rotorcraft_basic.xml settings/control/stabilization_att_indi.xml" settings_modules="modules/geo_mag.xml modules/air_data.xml modules/video_thread.xml modules/cv_blob_locator.xml modules/video_rtp_stream.xml modules/nav_survey_rectangle_rotorcraft.xml modules/nav_survey_poly_rotorcraft.xml modules/digital_cam_video.xml" gui_color="blue">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="ROLL" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="PITCH" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="950" MAX="2050" FUNCTION="YAW" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1223" MIN="1223" MAX="2050" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="UNUSED" CTL="G" AVERAGE="1"/>
        <channel NEUTRAL="1496" MIN="2050" MAX="948" FUNCTION="GAIN1" CTL="E" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="948" FUNCTION="MODE" CTL="PHAUX2" AVERAGE="1"/>
      </radio>
      <dump>
        <flight_plan name="Dummy" lon0="1.27289" max_dist_from_home="1000" ground_alt="185" security_height="25" qfu="270" alt="250" lat0="43.46223">
          <waypoints>
            <waypoint name="HOME" x="0.0" y="120.0" alt="250."/>
          </waypoints>
          <blocks>
            <block name="HOME" no="0">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="0" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="geo_mag">
              <dl_setting VAR="geo_mag.calc_once" VALUES="OFF|CALC" STEP="1" SHORTNAME="calcNow" MODULE="geo_mag/geo_mag" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="air_data">
              <dl_setting VAR="air_data.qnh" STEP="1" SHORTNAME="QNH" MODULE="air_data/air_data" MIN="800" MAX="1200"/>
              <dl_setting VAR="air_data.tas_factor" TYPE="float" STEP="0.01" SHORTNAME="TASfactor" PERSISTENT="true" PARAM="AIR_DATA_TAS_FACTOR" MODULE="air_data/air_data" MIN="0.8" MAX="1.3"/>
              <dl_setting VAR="air_data.calc_qnh_once" STEP="1" SHORTNAME="calcQNH" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_airspeed" TYPE="uint8" STEP="1" SHORTNAME="calcAirspeed" PERSISTENT="true" PARAM="AIR_DATA_CALC_AIRSPEED" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_tas_factor" TYPE="uint8" STEP="1" SHORTNAME="calcTASfactor" PERSISTENT="true" PARAM="AIR_DATA_CALC_TAS_FACTOR" MODULE="air_data/air_data" MIN="0" MAX="1"/>
              <dl_setting VAR="air_data.calc_amsl_baro" TYPE="uint8" STEP="1" SHORTNAME="calcAMSL" PERSISTENT="true" PARAM="AIR_DATA_CALC_AMSL_BARO" MODULE="air_data/air_data" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="video_thread.take_shot" STEP="1" SHORTNAME="take_shot" MODULE="computer_vision/video_thread" MIN="0" MAX="1" HANDLER="take_shot">
                <strip_button VALUE="1" NAME="Videothread Save Jpeg" ICON="digital-camera.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="video_thread.fps" STEP="1" SHORTNAME="fps" PARAM="VIDEO_THREAD_FPS" MODULE="computer_vision/video_thread" MIN="1" MAX="25"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="ColorFilter">
              <dl_setting VAR="color_lum_min" STEP="1" SHORTNAME="y_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_lum_max" STEP="1" SHORTNAME="y_max" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cb_min" STEP="1" SHORTNAME="u_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cb_max" STEP="1" SHORTNAME="u_max" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cr_min" STEP="1" SHORTNAME="v_min" MIN="0" MAX="255"/>
              <dl_setting VAR="color_cr_max" STEP="1" SHORTNAME="v_max" MIN="0" MAX="255"/>
              <dl_setting VAR="marker_size" STEP="1" SHORTNAME="marker" MIN="1" MAX="20"/>
              <dl_setting VAR="geofilter_length" STEP="1" SHORTNAME="filter" MIN="1" MAX="100"/>
              <dl_setting VAR="record_video" VALUES="OFF|ON" STEP="1" SHORTNAME="record" MIN="0" MAX="1"/>
              <dl_setting VAR="cv_blob_locator_reset" STEP="1" MODULE="computer_vision/cv_blob_locator" MIN="0" MAX="1" HANDLER="GeoReset">
                <strip_button VALUE="1" NAME="Reset Geoprojection Filter" ICON="resurrect.png" GROUP="cv"/>
              </dl_setting>
              <dl_setting VAR="cv_blob_locator_type" VALUES="NONE|BLOB|IMAVMARKER|WINDOW" STEP="1" MODULE="computer_vision/cv_blob_locator" MIN="0" MAX="2">
                <strip_button VALUE="0" NAME="CV: None" ICON="off.png" GROUP="cv"/>
                <strip_button VALUE="1" NAME="CV: Colored Blob" ICON="cv_blob.png" GROUP="cv"/>
                <strip_button VALUE="2" NAME="CV: Marker" ICON="cv_marker.png" GROUP="cv"/>
                <strip_button VALUE="3" NAME="CV: Window Finder" ICON="cv_window.png" GROUP="cv"/>
              </dl_setting>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="video">
              <dl_setting VAR="viewvideo.use_rtp" VALUES="FALSE|TRUE" STEP="1" SHORTNAME="rtp" PARAM="VIEWVIDEO_USE_RTP" MODULE="computer_vision/viewvideo" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="Ret_Survey">
              <dl_setting VAR="sweep" TYPE="float" STEP="1" SHORTNAME="Distance" MODULE="modules/nav/nav_survey_rectangle_rotorcraft" MIN="10" MAX="500"/>
              <dl_setting VAR="interleave" VALUES="FALSE|TRUE" TYPE="bool" STEP="1" SHORTNAME="use_interleave" MODULE="modules/nav/nav_survey_rectangle_rotorcraft" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings>
            <dl_settings NAME="P_Survey">
              <dl_setting VAR="Poly_Size" TYPE="uint8_t" STEP="1" SHORTNAME="Size" MODULE="modules/nav/nav_survey_poly_rotorcraft" MIN="0" MAX="20"/>
              <dl_setting VAR="Poly_Distance" TYPE="float" STEP="1" SHORTNAME="Sweep" MODULE="modules/nav/nav_survey_poly_rotorcraft" MIN="0" MAX="500"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <settings>
        <settings>
          <dl_settings NAME="control">
            <dl_settings NAME="dc">
              <dl_setting VAR="0" STEP="1" SHORTNAME="Shutter" MODULE="digital_cam/dc" MIN="0" MAX="255" HANDLER="send_command">
                <strip_button VALUE="32" NAME="Photo" ICON="digital-camera.png" GROUP="dc"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot" VALUES="STOP|PERIODIC|DISTANCE|EXT_TRIG" STEP="1" MIN="0" MAX="3">
                <strip_button VALUE="1" NAME="Start Autoshoot" ICON="dcstart.png" GROUP="dc"/>
                <strip_button VALUE="0" NAME="Stop Autoshoot" ICON="dcstop.png" GROUP="dc"/>
              </dl_setting>
              <dl_setting VAR="dc_autoshoot_period" UNIT="sec" STEP="0.5" SHORTNAME="Periodic" PARAM="DC_AUTOSHOOT_PERIOD" MIN="0.1" MAX="60"/>
              <dl_setting VAR="dc_distance_interval" UNIT="meter" STEP="1" SHORTNAME="dist" PARAM="DC_AUTOSHOOT_DISTANCE_INTERVAL" MIN="0" MAX="255"/>
              <dl_setting VAR="dc_survey_interval" STEP="5" SHORTNAME="Survey-Interval" MODULE="digital_cam/dc" MIN="0" MAX="250" HANDLER="Survey"/>
              <dl_setting VAR="dc_circle_interval" STEP="5" SHORTNAME="Circle-Interval" MODULE="digital_cam/dc" MIN="5" MAX="90" HANDLER="Circle"/>
              <dl_setting VAR="dc_cam_tracing" STEP="1" SHORTNAME="Cam-Tracing" MIN="0" MAX="1"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe NAME="bebop_indi">
        <firmware NAME="rotorcraft">
          <target NAME="ap" BOARD="bebop"/>
          <target NAME="nps" BOARD="pc">
            <subsystem TYPE="jsbsim" NAME="fdm"/>
            <subsystem NAME="udp"/>
          </target>
          <subsystem TYPE="transparent_udp" NAME="telemetry"/>
          <subsystem TYPE="datalink" NAME="radio_control"/>
          <subsystem NAME="motor_mixing"/>
          <subsystem TYPE="bebop" NAME="actuators"/>
          <subsystem TYPE="bebop" NAME="imu"/>
          <subsystem TYPE="furuno" NAME="gps"/>
          <subsystem TYPE="indi" NAME="stabilization"/>
          <subsystem TYPE="float_mlkf" NAME="ahrs"/>
          <subsystem TYPE="int_cmpl_quat" NAME="ahrs">
            <configure VALUE="TRUE" NAME="USE_MAGNETOMETER"/>
            <define VALUE="FALSE" NAME="AHRS_USE_GPS_HEADING"/>
            <configure VALUE="int_cmpl_quat" NAME="SECONDARY_AHRS"/>
          </subsystem>
          <subsystem TYPE="extended" NAME="ins"/>
        </firmware>
        <modules MAIN_FREQ="512">
          <load NAME="geo_mag.xml"/>
          <load NAME="air_data.xml"/>
          <load NAME="send_imu_mag_current.xml"/>
          <load NAME="video_thread.xml">
            <define VALUE="4" NAME="VIDEO_THREAD_FPS"/>
            <define VALUE="bottom_camera" NAME="VIDEO_THREAD_CAMERA"/>
            <define VALUE="/data/ftp/internal_000/images" NAME="VIDEO_THREAD_SHOT_PATH"/>
          </load>
          <load NAME="cv_blob_locator.xml"/>
          <load NAME="video_rtp_stream.xml">
            <define VALUE="80" NAME="VIEWVIDEO_QUALITY_FACTOR"/>
            <define VALUE="1" NAME="VIEWVIDEO_DOWNSIZE_FACTOR"/>
          </load>
          <load NAME="nav_survey_rectangle_rotorcraft.xml">
            <define VALUE="10" NAME="RECTANGLE_SURVEY_DEFAULT_SWEEP"/>
          </load>
          <load NAME="nav_survey_poly_rotorcraft.xml">
            <define VALUE="10" NAME="POLYSURVEY_DEFAULT_DISTANCE"/>
          </load>
          <load NAME="digital_cam_video.xml">
            <define VALUE="5" NAME="DC_AUTOSHOOT_DISTANCE_INTERVAL"/>
          </load>
          <load NAME="video_exif.xml"/>
        </modules>
        <commands>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="THRUST" FAILSAFE_VALUE="6000"/>
        </commands>
        <section NAME="gyro_scaling">
          <define VALUE="MPU60X0_GYRO_RANGE_2000" NAME="BEBOP_GYRO_RANGE"/>
          <define VALUE="4.359" NAME="IMU_GYRO_P_SENS"/>
          <define VALUE="4.359" NAME="IMU_GYRO_Q_SENS"/>
          <define VALUE="4.359" NAME="IMU_GYRO_R_SENS"/>
          <define VALUE="4359" NAME="IMU_GYRO_P_SENS_NUM"/>
          <define VALUE="4359" NAME="IMU_GYRO_Q_SENS_NUM"/>
          <define VALUE="4359" NAME="IMU_GYRO_R_SENS_NUM"/>
          <define VALUE="1000" NAME="IMU_GYRO_P_SENS_DEN"/>
          <define VALUE="1000" NAME="IMU_GYRO_Q_SENS_DEN"/>
          <define VALUE="1000" NAME="IMU_GYRO_R_SENS_DEN"/>
        </section>
        <servos DRIVER="Default">
          <servo NO="0" NEUTRAL="3000" NAME="TOP_RIGHT" MIN="3000" MAX="12000"/>
          <servo NO="1" NEUTRAL="3000" NAME="TOP_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="2" NEUTRAL="3000" NAME="BOTTOM_LEFT" MIN="3000" MAX="12000"/>
          <servo NO="3" NEUTRAL="3000" NAME="BOTTOM_RIGHT" MIN="3000" MAX="12000"/>
        </servos>
        <section PREFIX="MOTOR_MIXING_" NAME="MIXING">
          <define VALUE="0" NAME="TRIM_ROLL"/>
          <define VALUE="0" NAME="TRIM_PITCH"/>
          <define VALUE="0" NAME="TRIM_YAW"/>
          <define VALUE="QUAD_X" NAME="TYPE"/>
        </section>
        <command_laws>
          <call FUN="motor_mixing_run(autopilot_motors_on,FALSE,values)"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_LEFT]" SERVO="TOP_LEFT"/>
          <set VALUE="motor_mixing.commands[MOTOR_FRONT_RIGHT]" SERVO="TOP_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_RIGHT]" SERVO="BOTTOM_RIGHT"/>
          <set VALUE="motor_mixing.commands[MOTOR_BACK_LEFT]" SERVO="BOTTOM_LEFT"/>
        </command_laws>
        <section PREFIX="AIR_DATA_" NAME="AIR_DATA">
          <define VALUE="FALSE" NAME="CALC_AIRSPEED"/>
          <define VALUE="FALSE" NAME="CALC_TAS_FACTOR"/>
          <define VALUE="TRUE" NAME="CALC_AMSL_BARO"/>
        </section>
        <include HREF="conf/airframes/TUDelft/calibrations/bebop8.xml"/>
        <section PREFIX="IMU_" NAME="IMU">
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PHI"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_THETA"/>
          <define VALUE="0." UNIT="deg" NAME="BODY_TO_IMU_PSI"/>
        </section>
        <section PREFIX="AHRS_" NAME="AHRS">
          <define VALUE="0.3892503" NAME="H_X"/>
          <define VALUE="0.0017972" NAME="H_Y"/>
          <define VALUE="0.9211303" NAME="H_Z"/>
        </section>
        <section PREFIX="INS_" NAME="INS">
          <define VALUE="2.2" NAME="SONAR_MAX_RANGE"/>
          <define VALUE="TRUE" NAME="SONAR_UPDATE_ON_AGL"/>
        </section>
        <section PREFIX="STABILIZATION_RATE_" NAME="STABILIZATION_RATE">
          <define VALUE="10000" NAME="SP_MAX_P"/>
          <define VALUE="10000" NAME="SP_MAX_Q"/>
          <define VALUE="10000" NAME="SP_MAX_R"/>
          <define VALUE="20" NAME="DEADBAND_P"/>
          <define VALUE="20" NAME="DEADBAND_Q"/>
          <define VALUE="200" NAME="DEADBAND_R"/>
          <define VALUE="4" NAME="REF_TAU"/>
          <define VALUE="400" NAME="GAIN_P"/>
          <define VALUE="400" NAME="GAIN_Q"/>
          <define VALUE="350" NAME="GAIN_R"/>
          <define VALUE="75" NAME="IGAIN_P"/>
          <define VALUE="75" NAME="IGAIN_Q"/>
          <define VALUE="50" NAME="IGAIN_R"/>
          <define VALUE="300" NAME="DDGAIN_P"/>
          <define VALUE="300" NAME="DDGAIN_Q"/>
          <define VALUE="300" NAME="DDGAIN_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="RC_SETPOINT">
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_PHI"/>
          <define VALUE="45" UNIT="deg" NAME="SP_MAX_THETA"/>
          <define VALUE="300" UNIT="deg/s" NAME="SP_MAX_R"/>
          <define VALUE="0" NAME="DEADBAND_A"/>
          <define VALUE="0" NAME="DEADBAND_E"/>
          <define VALUE="50" NAME="DEADBAND_R"/>
        </section>
        <section PREFIX="STABILIZATION_ATTITUDE_" NAME="ATTITUDE_REFERENCE">
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_P"/>
          <define VALUE="0.9" NAME="REF_ZETA_P"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_P"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_PDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_Q"/>
          <define VALUE="0.9" NAME="REF_ZETA_Q"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_Q"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_QDOT"/>
          <define VALUE="450" UNIT="deg/s" NAME="REF_OMEGA_R"/>
          <define VALUE="0.9" NAME="REF_ZETA_R"/>
          <define VALUE="600." UNIT="deg/s" NAME="REF_MAX_R"/>
          <define VALUE="RadOfDeg(8000.)" NAME="REF_MAX_RDOT"/>
        </section>
        <section PREFIX="STABILIZATION_INDI_" NAME="STABILIZATION_ATTITUDE_INDI">
          <define VALUE="0.0639" NAME="G1_P"/>
          <define VALUE="0.0361" NAME="G1_Q"/>
          <define VALUE="0.0022" NAME="G1_R"/>
          <define VALUE="0.1450" NAME="G2_R"/>
          <define VALUE="600.0" NAME="REF_ERR_P"/>
          <define VALUE="600.0" NAME="REF_ERR_Q"/>
          <define VALUE="600.0" NAME="REF_ERR_R"/>
          <define VALUE="28.0" NAME="REF_RATE_P"/>
          <define VALUE="28.0" NAME="REF_RATE_Q"/>
          <define VALUE="28.0" NAME="REF_RATE_R"/>
          <define VALUE="50.0" NAME="FILT_OMEGA"/>
          <define VALUE="0.55" NAME="FILT_ZETA"/>
          <define VALUE="50.0" NAME="FILT_OMEGA_R"/>
          <define VALUE="0.55" NAME="FILT_ZETA_R"/>
          <define VALUE="0.1" NAME="ACT_DYN_P"/>
          <define VALUE="0.1" NAME="ACT_DYN_Q"/>
          <define VALUE="0.1" NAME="ACT_DYN_R"/>
          <define VALUE="FALSE" NAME="USE_ADAPTIVE"/>
          <define VALUE="0.0001" NAME="ADAPTIVE_MU"/>
        </section>
        <section PREFIX="GUIDANCE_V_" NAME="GUIDANCE_V">
          <define VALUE="283" NAME="HOVER_KP"/>
          <define VALUE="82" NAME="HOVER_KD"/>
          <define VALUE="20" NAME="HOVER_KI"/>
          <define VALUE="0.655" NAME="NOMINAL_HOVER_THROTTLE"/>
          <define VALUE="TRUE" NAME="ADAPT_THROTTLE_ENABLED"/>
        </section>
        <section PREFIX="GUIDANCE_H_" NAME="GUIDANCE_H">
          <define VALUE="20" UNIT="deg" NAME="MAX_BANK"/>
          <define VALUE="2" UNIT="m/s" NAME="REF_MAX_SPEED"/>
          <define VALUE="15" NAME="PGAIN"/>
          <define VALUE="100" NAME="DGAIN"/>
          <define VALUE="30" NAME="IGAIN"/>
        </section>
        <section PREFIX="NAV_" NAME="NAVIGATION">
          <define VALUE="2.5" NAME="CLIMB_VSPEED"/>
          <define VALUE="-1.0" NAME="DESCEND_VSPEED"/>
        </section>
        <section PREFIX="NPS_" NAME="SIMULATOR">
          <define VALUE="nw_motor, ne_motor, se_motor, sw_motor" TYPE="string[]" NAME="ACTUATOR_NAMES"/>
          <define VALUE="simple_x_quad_ccw" TYPE="string" NAME="JSBSIM_MODEL"/>
          <define VALUE="nps_sensors_params_default.h" TYPE="string" NAME="SENSORS_PARAMS"/>
        </section>
        <section NAME="AUTOPILOT">
          <define VALUE="AP_MODE_NAV" NAME="MODE_STARTUP"/>
          <define VALUE="AP_MODE_ATTITUDE_DIRECT" NAME="MODE_MANUAL"/>
          <define VALUE="AP_MODE_FLIP" NAME="MODE_AUTO1"/>
          <define VALUE="AP_MODE_FLIP" NAME="MODE_AUTO2"/>
          <define VALUE="TRUE" NAME="NO_RC_THRUST_LIMIT"/>
        </section>
        <section NAME="BAT">
          <define VALUE="8700" NAME="MILLIAMP_AT_FULL_THROTTLE"/>
          <define VALUE="9.9" UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL"/>
          <define VALUE="11.0" UNIT="V" NAME="CRITIC_BAT_LEVEL"/>
          <define VALUE="11.1" UNIT="V" NAME="LOW_BAT_LEVEL"/>
          <define VALUE="12.4" UNIT="V" NAME="MAX_BAT_LEVEL"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="indi">
            <dl_setting VAR="reference_acceleration.err_p" STEP="1" SHORTNAME="kp_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_p" STEP="0.1" SHORTNAME="kd_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.p" STEP="1" SHORTNAME="ctl_eff_p" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_q" STEP="1" SHORTNAME="kp_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_q" STEP="0.1" SHORTNAME="kd_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.q" STEP="1" SHORTNAME="ctl_eff_q" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_Q" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="500"/>
            <dl_setting VAR="reference_acceleration.err_r" STEP="1" SHORTNAME="kp_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_ERR_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="2500"/>
            <dl_setting VAR="reference_acceleration.rate_r" STEP="0.1" SHORTNAME="kd_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_REF_RATE_P" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="100"/>
            <dl_setting VAR="g1.r" STEP="0.01" SHORTNAME="ctl_eff_r" PERSISTENT="true" PARAM="STABILIZATION_INDI_G1_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="g2" STEP="0.01" SHORTNAME="g2" PERSISTENT="true" PARAM="STABILIZATION_INDI_G2_R" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="10"/>
            <dl_setting VAR="use_adaptive_indi" VALUES="FALSE|TRUE" TYPE="uint8" STEP="1" SHORTNAME="use_adaptive" PERSISTENT="true" PARAM="STABILIZATION_INDI_USE_ADAPTIVE" MODULE="stabilization/stabilization_attitude_quat_indi" MIN="0" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="quadshot_pylons" ac_id="178" airframe="airframes/TUDelft/airframes/quadshot_pylons.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default_rotorcraft.xml" flight_plan="flight_plans/dummy.xml" settings="settings/rotorcraft_basic.xml settings/control/stabilization_att_int_quat.xml" settings_modules="modules/gps_ubx_ucenter.xml" gui_color="blue">
      <radio SYNC_MIN="5000" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" DATA_MAX="2100">
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="ROLL" CTL="D" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="PITCH" CTL="C" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="950" MAX="2050" FUNCTION="YAW" CTL="B" AVERAGE="0"/>
        <channel NEUTRAL="1223" MIN="1223" MAX="2050" FUNCTION="THROTTLE" CTL="A" AVERAGE="0"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="950" FUNCTION="UNUSED" CTL="G" AVERAGE="1"/>
        <channel NEUTRAL="1496" MIN="2050" MAX="948" FUNCTION="GAIN1" CTL="E" AVERAGE="1"/>
        <channel NEUTRAL="1500" MIN="2050" MAX="948" FUNCTION="MODE" CTL="PHAUX2" AVERAGE="1"/>
      </radio>
      <dump>
        <flight_plan name="Dummy" lon0="1.27289" max_dist_from_home="1000" ground_alt="185" security_height="25" qfu="270" alt="250" lat0="43.46223">
          <waypoints>
            <waypoint name="HOME" x="0.0" y="120.0" alt="250."/>
          </waypoints>
          <blocks>
            <block name="HOME" no="0">
              <home no="0"/>
            </block>
          </blocks>
        </flight_plan>
        <stages>
          <stage block="0" block_name="HOME" stage="0">
            <home no="0"/>
          </stage>
        </stages>
      </dump>
      <settings>
        <settings>
          <dl_settings NAME="ublox">
            <dl_settings NAME="ucenter">
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_h" STEP="1" SHORTNAME="sw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.sw_ver_l" STEP="1" SHORTNAME="sw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_h" STEP="1" SHORTNAME="hw_h" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.hw_ver_l" STEP="1" SHORTNAME="hw_l" MODULE="gps/gps_ubx_ucenter" MIN="0" MAX="255"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_init" STEP="100" SHORTNAME="inibaud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
              <dl_setting VAR="gps_ubx_ucenter.baud_run" STEP="100" SHORTNAME="baud" MODULE="gps/gps_ubx_ucenter" MIN="4800" MAX="115200"/>
            </dl_settings>
          </dl_settings>
        </settings>
      </settings>
      <airframe name="quadshot aspirin 2.1 spektrum">
        <servos driver="Pwm">
          <servo name="A1" no="0" min="1000" neutral="1100" max="2000"/>
          <servo name="A2" no="1" min="1000" neutral="1100" max="2000"/>
          <servo name="B1" no="2" min="1000" neutral="1100" max="2000"/>
          <servo name="B2" no="3" min="1000" neutral="1100" max="2000"/>
          <servo name="ELEVON_LEFT" no="4" min="1000" neutral="1500" max="2000"/>
          <servo name="ELEVON_RIGHT" no="5" min="1000" neutral="1500" max="2000"/>
        </servos>
        <commands>
          <axis name="PITCH" failsafe_value="0"/>
          <axis name="ROLL" failsafe_value="0"/>
          <axis name="YAW" failsafe_value="0"/>
          <axis name="THRUST" failsafe_value="0"/>
        </commands>
        <command_laws>
          <call fun="motor_mixing_run(autopilot_motors_on,FALSE,values)"/>
          <set servo="A1" value="motor_mixing.commands[0]"/>
          <set servo="A2" value="motor_mixing.commands[1]"/>
          <set servo="B1" value="motor_mixing.commands[2]"/>
          <set servo="B2" value="motor_mixing.commands[3]"/>
          <let var="aileron_feedback_left" value="-@YAW"/>
          <let var="aileron_feedback_right" value="-@YAW"/>
          <let var="elevator_feedback_left" value="+@PITCH"/>
          <let var="elevator_feedback_right" value="-@PITCH"/>
          <let var="hover_left" value="3*$aileron_feedback_left"/>
          <let var="hover_right" value="3*$aileron_feedback_right"/>
          <let var="forward_left" value="6*$aileron_feedback_left+4*$elevator_feedback_left"/>
          <let var="forward_right" value="6*$aileron_feedback_right+4*$elevator_feedback_right"/>
          <set servo="ELEVON_LEFT" value="AP_MODE == AP_MODE_ATTITUDE_DIRECT ? $hover_left  : $forward_left"/>
          <set servo="ELEVON_RIGHT" value="AP_MODE == AP_MODE_ATTITUDE_DIRECT ? $hover_right  : $forward_right"/>
        </command_laws>
        <section name="MIXING" prefix="MOTOR_MIXING_">
          <define name="TRIM_ROLL" value="0"/>
          <define name="TRIM_PITCH" value="0"/>
          <define name="TRIM_YAW" value="0"/>
          <define name="NB_MOTOR" value="4"/>
          <define name="SCALE" value="256"/>
          <define name="PITCH_COEF" value="{ -256, -256,  256,  256 }"/>
          <define name="ROLL_COEF" value="{  256, -256,  256, -256 }"/>
          <define name="YAW_COEF" value="{  256, -256, -128,  128 }"/>
          <define name="THRUST_COEF" value="{  256,  256,  256,  256 }"/>
        </section>
        <section name="IMU" prefix="IMU_">
          <define name="ACCEL_X_NEUTRAL" value="0"/>
          <define name="ACCEL_Y_NEUTRAL" value="0"/>
          <define name="ACCEL_Z_NEUTRAL" value="0"/>
          <define name="ACCEL_X_SENS" value="4.86487566223" integer="16"/>
          <define name="ACCEL_Y_SENS" value="4.89957269597" integer="16"/>
          <define name="ACCEL_Z_SENS" value="4.82616398266" integer="16"/>
          <define name="MAG_X_NEUTRAL" value="0"/>
          <define name="MAG_Y_NEUTRAL" value="0"/>
          <define name="MAG_Z_NEUTRAL" value="0"/>
          <define name="MAG_X_SENS" value="4.19385009207" integer="16"/>
          <define name="MAG_Y_SENS" value="4.32306399648" integer="16"/>
          <define name="MAG_Z_SENS" value="4.63243801309" integer="16"/>
        </section>
        <section name="IMU" prefix="IMU_">
          <define name="BODY_TO_IMU_PHI" value="0." unit="deg"/>
          <define name="BODY_TO_IMU_THETA" value="90." unit="deg"/>
          <define name="BODY_TO_IMU_PSI" value="0." unit="deg"/>
        </section>
        <section name="AUTOPILOT">
          <define name="MODE_MANUAL" value="AP_MODE_ATTITUDE_DIRECT"/>
          <define name="MODE_AUTO1" value="AP_MODE_FORWARD"/>
          <define name="MODE_AUTO2" value="AP_MODE_RATE_DIRECT"/>
        </section>
        <section name="BAT">
          <define name="MIN_BAT_LEVEL" value="10.4" units="V"/>
          <define name="CATASTROPHIC_BAT_LEVEL" value="9.3" unit="V"/>
        </section>
        <section name="STABILIZATION_RATE" prefix="STABILIZATION_RATE_">
          <define name="SP_MAX_P" value="10000"/>
          <define name="SP_MAX_Q" value="10000"/>
          <define name="SP_MAX_R" value="10000"/>
          <define name="GAIN_P" value="350"/>
          <define name="GAIN_Q" value="250"/>
          <define name="GAIN_R" value="350"/>
          <define name="IGAIN_P" value="200"/>
          <define name="IGAIN_Q" value="200"/>
          <define name="IGAIN_R" value="200"/>
        </section>
        <section name="GAIN_SETS">
          <define name="NUMBER_OF_GAINSETS" value="2"/>
          <define name="SCHEDULING_VARIABLE" value="(radio.values[COMMAND_THRUST]+ transition_status"/>
          <define name="SCHEDULING_POINTS" value="{1000, 6000}"/>
          <define name="SCHEDULING_VARIABLE_FRAC" value="0"/>
          <define name="PHI_P" value="{230, 230}"/>
          <define name="PHI_D" value="{170, 170}"/>
          <define name="PHI_I" value="{30, 30}"/>
          <define name="PHI_DD" value="{0, 0}"/>
          <define name="THETA_P" value="{200, 300}"/>
          <define name="THETA_D" value="{100, 50}"/>
          <define name="THETA_I" value="{40, 40}"/>
          <define name="THETA_DD" value="{0, 0}"/>
          <define name="PSI_P" value="{300, 300}"/>
          <define name="PSI_D" value="{150, 150}"/>
          <define name="PSI_I" value="{0, 0}"/>
          <define name="PSI_DD" value="{0, 0}"/>
        </section>
        <section name="STABILIZATION_ATTITUDE" prefix="STABILIZATION_ATTITUDE_">
          <define name="SP_MAX_PHI" value="60." unit="deg"/>
          <define name="SP_MAX_THETA" value="60." unit="deg"/>
          <define name="SP_MAX_R" value="90." unit="deg/s"/>
          <define name="DEADBAND_R" value="250"/>
          <define name="DEADBAND_A" value="250"/>
          <define name="SP_PSI_DELTA_LIMIT" value="90" unit="deg"/>
          <define name="REF_OMEGA_P" value="1500" unit="deg/s"/>
          <define name="REF_ZETA_P" value="0.85"/>
          <define name="REF_MAX_P" value="300." unit="deg/s"/>
          <define name="REF_MAX_PDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_Q" value="1500" unit="deg/s"/>
          <define name="REF_ZETA_Q" value="0.85"/>
          <define name="REF_MAX_Q" value="300." unit="deg/s"/>
          <define name="REF_MAX_QDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_R" value="1500" unit="deg/s"/>
          <define name="REF_ZETA_R" value="0.9"/>
          <define name="REF_MAX_R" value="90." unit="deg/s"/>
          <define name="REF_MAX_RDOT" value="RadOfDeg(900.)"/>
          <define name="PHI_PGAIN" value="170"/>
          <define name="PHI_DGAIN" value="120"/>
          <define name="PHI_IGAIN" value="30"/>
          <define name="THETA_PGAIN" value="150"/>
          <define name="THETA_DGAIN" value="70"/>
          <define name="THETA_IGAIN" value="40"/>
          <define name="PSI_PGAIN" value="300"/>
          <define name="PSI_DGAIN" value="150"/>
          <define name="PSI_IGAIN" value="0"/>
          <define name="PHI_DDGAIN" value=" 0"/>
          <define name="THETA_DDGAIN" value=" 0"/>
          <define name="PSI_DDGAIN" value=" 0"/>
        </section>
        <section name="GUIDANCE_V" prefix="GUIDANCE_V_">
          <define name="HOVER_KP" value="200"/>
          <define name="HOVER_KD" value="175"/>
          <define name="HOVER_KI" value="72"/>
          <define name="NOMINAL_HOVER_THROTTLE" value="0.4"/>
          <define name="ADAPT_THROTTLE_ENABLED" value="FALSE"/>
        </section>
        <section name="AHRS" prefix="AHRS_">
          <define name="H_X" value=" 0.47577"/>
          <define name="H_Y" value=" 0.11811"/>
          <define name="H_Z" value=" 0.87161"/>
        </section>
        <section name="GUIDANCE_H" prefix="GUIDANCE_H_">
          <define name="PGAIN" value="100"/>
          <define name="DGAIN" value="100"/>
          <define name="IGAIN" value="0"/>
        </section>
        <section name="MISC">
          <define name="USE_EARTH_BOUND_RC_SETPOINT" value="TRUE"/>
          <define name="TRANSITION_MAX_OFFSET" value="-82.0" unit="deg"/>
          <define name="NO_RC_THRUST_LIMIT" value="TRUE"/>
        </section>
        <modules main_freq="512">
          <load name="gps_ubx_ucenter.xml"/>
          <load name="led_safety_status.xml">
            <define name="USE_LED_BODY" value="1"/>
            <define name="SAFETY_WARNING_LED" value="BODY"/>
          </load>
          <load name="airspeed_ets.xml">
            <define name="AIRSPEED_ETS_I2C_DEV" value="i2c2"/>
            <define name="AIRSPEED_ETS_SYNC_SEND"/>
          </load>
        </modules>
        <firmware name="rotorcraft">
          <target name="ap" board="lisa_m_2.0">
            <subsystem name="radio_control" type="spektrum">
              <define name="RADIO_KILL_SWITCH" value="6"/>
            </subsystem>
            <define name="USE_I2C2"/>
            <define name="USE_AIRSPEED" value="TRUE"/>
            <configure name="LISA_M_BARO" value="BARO_BOARD_BMP085"/>
          </target>
          <subsystem name="motor_mixing"/>
          <subsystem name="actuators" type="pwm">
            <define name="SERVO_HZ" value="400"/>
            <define name="USE_SERVOS_7AND8"/>
          </subsystem>
          <subsystem name="telemetry" type="xbee_api"/>
          <subsystem name="imu" type="aspirin_v2.1"/>
          <subsystem name="gps" type="ublox"/>
          <subsystem name="stabilization" type="int_quat"/>
          <subsystem name="ahrs" type="int_cmpl_quat">
            <configure name="USE_MAGNETOMETER" value="TRUE"/>
          </subsystem>
          <subsystem name="ins"/>
        </firmware>
      </airframe>
      <telemetry>
        <process NAME="Main">
          <mode NAME="default" KEY_PRESS="d">
            <message PERIOD="11.1" NAME="AUTOPILOT_VERSION"/>
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.25" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="1.3" NAME="WP_MOVED"/>
            <message PERIOD="1." NAME="ROTORCRAFT_CAM"/>
            <message PERIOD=".25" NAME="GPS_INT"/>
            <message PERIOD=".25" NAME="INS"/>
            <message PERIOD="4.1" NAME="I2C_ERRORS"/>
            <message PERIOD="3.1" NAME="UART_ERRORS"/>
            <message PERIOD="3" NAME="SUPERBITRF"/>
            <message PERIOD="2.5" NAME="ENERGY"/>
            <message PERIOD="5.1" NAME="DATALINK_REPORT"/>
            <message PERIOD="3.2" NAME="STATE_FILTER_STATUS"/>
            <message PERIOD="1.3" NAME="AIR_DATA"/>
            <message PERIOD="2.5" NAME="SURVEY"/>
            <message PERIOD="0.25" NAME="OPTIC_FLOW_EST"/>
            <message PERIOD="0.5" NAME="VECTORNAV_INFO"/>
          </mode>
          <mode NAME="ppm">
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="ROTORCRAFT_CMD"/>
            <message PERIOD="0.5" NAME="PPM"/>
            <message PERIOD="0.5" NAME="RC"/>
            <message PERIOD="0.5" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="1" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.2" NAME="ACTUATORS_BEBOP"/>
          </mode>
          <mode NAME="raw_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="IMU_ACCEL_RAW"/>
            <message PERIOD=".05" NAME="IMU_GYRO_RAW"/>
            <message PERIOD=".05" NAME="IMU_MAG_RAW"/>
            <message PERIOD=".1" NAME="BARO_RAW"/>
            <message PERIOD=".05" NAME="ARDRONE_NAVDATA"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".075" NAME="IMU_GYRO_SCALED"/>
            <message PERIOD=".075" NAME="IMU_ACCEL_SCALED"/>
            <message PERIOD=".1" NAME="IMU_MAG_SCALED"/>
          </mode>
          <mode NAME="ahrs">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="2.2" NAME="FILTER_ALIGNER"/>
            <message PERIOD=".5" NAME="FILTER"/>
            <message PERIOD="5." NAME="GEO_MAG"/>
            <message PERIOD="0.08" NAME="AHRS_GYRO_BIAS_INT"/>
            <message PERIOD=".25" NAME="AHRS_QUAT_INT"/>
            <message PERIOD=".1" NAME="AHRS_EULER_INT"/>
          </mode>
          <mode NAME="rate_loop">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD=".02" NAME="RATE_LOOP"/>
          </mode>
          <mode NAME="attitude_setpoint_viz" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.1" NAME="ROTORCRAFT_RADIO_CONTROL"/>
            <message PERIOD="0.05" NAME="AHRS_REF_QUAT"/>
          </mode>
          <mode NAME="attitude_loop" KEY_PRESS="a">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE"/>
            <message PERIOD=".03" NAME="STAB_ATTITUDE_REF"/>
            <message PERIOD=".25" NAME="STAB_ATTITUDE_INDI"/>
          </mode>
          <mode NAME="vert_loop" KEY_PRESS="v">
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="0.5" NAME="DL_VALUE"/>
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD=".05" NAME="VFF"/>
            <message PERIOD=".05" NAME="VFF_EXTENDED"/>
            <message PERIOD=".05" NAME="VERT_LOOP"/>
            <message PERIOD=".05" NAME="INS_Z"/>
            <message PERIOD=".11" NAME="INS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
          <mode NAME="h_loop" KEY_PRESS="h">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.062" NAME="HOVER_LOOP"/>
            <message PERIOD="0.062" NAME="GUIDANCE_H_REF"/>
            <message PERIOD="0.4" NAME="STAB_ATTITUDE"/>
            <message PERIOD="0.8" NAME="ROTORCRAFT_FP"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="1.6" NAME="ROTORCRAFT_NAV_STATUS"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
            <message PERIOD=".05" NAME="HFF"/>
            <message PERIOD=".03" NAME="HFF_GPS"/>
            <message PERIOD=".2" NAME="HFF_DBG"/>
          </mode>
          <mode NAME="aligner">
            <message PERIOD="0.9" NAME="ALIVE"/>
            <message PERIOD="0.02" NAME="FILTER_ALIGNER"/>
          </mode>
          <mode NAME="tune_hover">
            <message PERIOD="1.1" NAME="DL_VALUE"/>
            <message PERIOD="1.2" NAME="ROTORCRAFT_STATUS"/>
            <message PERIOD="2.1" NAME="ALIVE"/>
            <message PERIOD="0.05" NAME="GUIDANCE_H_INT"/>
            <message PERIOD=".1" NAME="ROTORCRAFT_TUNE_HOVER"/>
            <message PERIOD="5.1" NAME="INS_REF"/>
          </mode>
        </process>
      </telemetry>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="System">
            <dl_setting VAR="autopilot_mode_auto2" VALUES="KILL|Fail|HOME|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav|RC_D|CareFree|Forward|Module|Flip" STEP="1" SHORTNAME="auto2" MODULE="autopilot" MIN="0" MAX="15"/>
            <dl_setting VAR="kill_throttle" VALUES="Resurrect|Kill" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="KillThrottle"/>
            <dl_setting VAR="autopilot_power_switch" VALUES="OFF|ON" STEP="1" MODULE="autopilot" MIN="0" MAX="1" HANDLER="SetPowerSwitch">
              <strip_button VALUE="1" NAME="POWER ON" ICON="on.png" GROUP="power_switch"/>
              <strip_button VALUE="0" NAME="POWER OFF" ICON="off.png" GROUP="power_switch"/>
            </dl_setting>
            <dl_setting VAR="autopilot_mode" VALUES="KILL|Fail|HOME" STEP="1" SHORTNAME="mode" MODULE="autopilot" MIN="0" MAX="2" HANDLER="set_mode"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings TARGET="ap|nps">
        <dl_settings>
          <dl_settings NAME="Att Loop">
            <dl_setting VAR="stabilization_gains.p.x" TYPE="int32" STEP="1" SHORTNAME="pgain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.x" TYPE="int32" STEP="1" SHORTNAME="dgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.x" TYPE="int32" STEP="1" SHORTNAME="igain phi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.x" TYPE="int32" STEP="1" SHORTNAME="ddgain p" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PHI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.y" TYPE="int32" STEP="1" SHORTNAME="pgain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="8000"/>
            <dl_setting VAR="stabilization_gains.d.y" TYPE="int32" STEP="1" SHORTNAME="dgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.y" TYPE="int32" STEP="1" SHORTNAME="igain theta" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="800"/>
            <dl_setting VAR="stabilization_gains.dd.y" TYPE="int32" STEP="1" SHORTNAME="ddgain q" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_THETA_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stabilization_gains.p.z" TYPE="int32" STEP="1" SHORTNAME="pgain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_PGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.d.z" TYPE="int32" STEP="1" SHORTNAME="dgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="1" MAX="4000"/>
            <dl_setting VAR="stabilization_gains.i.z" TYPE="int32" STEP="1" SHORTNAME="igain psi" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_IGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="400"/>
            <dl_setting VAR="stabilization_gains.dd.z" TYPE="int32" STEP="1" SHORTNAME="ddgain r" PERSISTENT="true" PARAM="STABILIZATION_ATTITUDE_PSI_DDGAIN" MODULE="stabilization/stabilization_attitude_common_int" MIN="0" MAX="1000"/>
            <dl_setting VAR="stab_att_ref_model.omega.p" UNIT="rad/s" STEP="1" SHORTNAME="omega p" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_P" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaP" ALT_UNIT="deg/s"/>
            <dl_setting VAR="stab_att_ref_model.zeta.p" STEP="0.05" SHORTNAME="zeta p" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_P" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaP"/>
            <dl_setting VAR="stab_att_ref_model.omega.q" UNIT="rad/s" STEP="1" SHORTNAME="omega q" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_Q" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaQ" ALT_UNIT="deg/s"/>
            <dl_setting VAR="stab_att_ref_model.zeta.q" STEP="0.05" SHORTNAME="zeta q" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_Q" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaQ"/>
            <dl_setting VAR="stab_att_ref_model.omega.r" UNIT="rad/s" STEP="1" SHORTNAME="omega r" PARAM="STABILIZATION_ATTITUDE_REF_OMEGA_R" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="1" MAX="1000" HANDLER="SetOmegaR" ALT_UNIT="deg/s"/>
            <dl_setting VAR="stab_att_ref_model.zeta.r" STEP="0.05" SHORTNAME="zeta r" PARAM="STABILIZATION_ATTITUDE_REF_ZETA_R" MODULE="stabilization/stabilization_attitude_ref_quat_int" MIN="0.5" MAX="1.2" HANDLER="SetZetaR"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
  </conf>
  <protocol>
    <msg_class NAME="telemetry">
      <message NAME="AUTOPILOT_VERSION" ID="1">
        <field TYPE="uint32" NAME="version">version encoded as: MAJOR * 10000 + MINOR * 100 + PATCH</field>
        <field TYPE="char[]" NAME="desc">version description as string from paparazzi_version</field>
      </message>
      <message NAME="ALIVE" ID="2">
        <description>alive/heartbeat message containing the MD5sum of the aircraft configuration</description>
        <field TYPE="uint8[]" NAME="md5sum"></field>
      </message>
      <message NAME="PONG" ID="3">
        <description>Answer to PING datalink message, to measure latencies</description>
      </message>
      <message NAME="TAKEOFF" ID="4">
        <field UNIT="s" TYPE="uint16" NAME="cpu_time"></field>
      </message>
      <message NAME="ARDRONE_NAVDATA" ID="5">
        <field TYPE="uint16" NAME="taille"></field>
        <field TYPE="uint16" NAME="nu_trame"></field>
        <field TYPE="uint16" NAME="ax"></field>
        <field TYPE="uint16" NAME="ay"></field>
        <field TYPE="uint16" NAME="az"></field>
        <field TYPE="int16" NAME="vx"></field>
        <field TYPE="int16" NAME="vy"></field>
        <field TYPE="int16" NAME="vz"></field>
        <field TYPE="uint16" NAME="temperature_acc"></field>
        <field TYPE="uint16" NAME="temperature_gyro"></field>
        <field TYPE="uint16" NAME="ultrasound"></field>
        <field TYPE="uint16" NAME="us_debut_echo"></field>
        <field TYPE="uint16" NAME="us_fin_echo"></field>
        <field TYPE="uint16" NAME="us_association_echo"></field>
        <field TYPE="uint16" NAME="us_distance_echo"></field>
        <field TYPE="uint16" NAME="us_curve_time"></field>
        <field TYPE="uint16" NAME="us_curve_value"></field>
        <field TYPE="uint16" NAME="us_curve_ref"></field>
        <field TYPE="uint16" NAME="nb_echo"></field>
        <field TYPE="uint32" NAME="sum_echo"></field>
        <field TYPE="int16" NAME="gradient"></field>
        <field TYPE="uint16" NAME="flag_echo_ini"></field>
        <field TYPE="int32" NAME="pressure"></field>
        <field TYPE="uint16" NAME="temperature_pressure"></field>
        <field TYPE="int16" NAME="mx"></field>
        <field TYPE="int16" NAME="my"></field>
        <field TYPE="int16" NAME="mz"></field>
        <field TYPE="uint16" NAME="chksum"></field>
        <field TYPE="uint32" NAME="checksum_errors"></field>
      </message>
      <message NAME="ATTITUDE" ID="6">
        <field UNIT="rad" TYPE="float" NAME="phi" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="psi" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="theta" ALT_UNIT="deg"></field>
      </message>
      <message NAME="IR_SENSORS" ID="7">
        <field TYPE="int16" NAME="ir1"></field>
        <field TYPE="int16" NAME="ir2"></field>
        <field TYPE="int16" NAME="longitudinal"></field>
        <field TYPE="int16" NAME="lateral"></field>
        <field TYPE="int16" NAME="vertical"></field>
      </message>
      <message NAME="GPS" ID="8">
        <field UNIT="byte_mask" TYPE="uint8" NAME="mode"></field>
        <field UNIT="cm" TYPE="int32" NAME="utm_east" ALT_UNIT="m"></field>
        <field UNIT="cm" TYPE="int32" NAME="utm_north" ALT_UNIT="m"></field>
        <field UNIT="decideg" TYPE="int16" NAME="course" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m">Altitude above geoid (MSL)</field>
        <field UNIT="cm/s" TYPE="uint16" NAME="speed" ALT_UNIT="m/s">norm of 2d ground speed in cm/s</field>
        <field UNIT="cm/s" TYPE="int16" NAME="climb" ALT_UNIT="m/s"></field>
        <field UNIT="weeks" TYPE="uint16" NAME="week"></field>
        <field UNIT="ms" TYPE="uint32" NAME="itow"></field>
        <field TYPE="uint8" NAME="utm_zone"></field>
        <field TYPE="uint8" NAME="gps_nb_err"></field>
      </message>
      <message NAME="NAVIGATION_REF" ID="9">
        <field UNIT="m" TYPE="int32" NAME="utm_east"></field>
        <field UNIT="m" TYPE="int32" NAME="utm_north"></field>
        <field TYPE="uint8" NAME="utm_zone"></field>
        <field UNIT="m" TYPE="float" NAME="ground_alt"></field>
      </message>
      <message NAME="NAVIGATION" ID="10">
        <field TYPE="uint8" NAME="cur_block"></field>
        <field TYPE="uint8" NAME="cur_stage"></field>
        <field UNIT="m" TYPE="float" NAME="pos_x" FORMAT="%.1f"></field>
        <field UNIT="m" TYPE="float" NAME="pos_y" FORMAT="%.1f"></field>
        <field UNIT="m" TYPE="float" NAME="dist_wp" FORMAT="%.1f"></field>
        <field UNIT="m" TYPE="float" NAME="dist_home" FORMAT="%.1f"></field>
        <field TYPE="uint8" NAME="circle_count"></field>
        <field TYPE="uint8" NAME="oval_count"></field>
      </message>
      <message NAME="PPRZ_MODE" ID="11">
        <field VALUES="MANUAL|AUTO1|AUTO2|HOME|NOGPS|FAILSAFE" TYPE="uint8" NAME="ap_mode"></field>
        <field VALUES="MANUAL|AUTO_THROTTLE|AUTO_CLIMB|AUTO_ALT" TYPE="uint8" NAME="ap_gaz"></field>
        <field VALUES="MANUAL|ROLL_RATE|ROLL|COURSE" TYPE="uint8" NAME="ap_lateral"></field>
        <field VALUES="WAYPOINT|ROUTE|CIRCLE" TYPE="uint8" NAME="ap_horizontal"></field>
        <field VALUES="NONE|DOWN|UP" TYPE="uint8" NAME="if_calib_mode"></field>
        <field VALUES="LOST|OK|REALLY_LOST" TYPE="uint8" NAME="mcu1_status"></field>
      </message>
      <message NAME="BAT" ID="12">
        <field UNIT="pprz" TYPE="int16" NAME="throttle"></field>
        <field UNIT="1e-1V" TYPE="uint16" NAME="voltage" ALT_UNIT_COEF="0.1" ALT_UNIT="V"></field>
        <field UNIT="1e-2A" TYPE="int16" NAME="amps" ALT_UNIT_COEF="0.01" ALT_UNIT="A"></field>
        <field UNIT="s" TYPE="uint16" NAME="flight_time"></field>
        <field UNIT="bool" TYPE="uint8" NAME="kill_auto_throttle"></field>
        <field UNIT="s" TYPE="uint16" NAME="block_time"></field>
        <field UNIT="s" TYPE="uint16" NAME="stage_time"></field>
        <field UNIT="mAh" TYPE="int16" NAME="energy"></field>
      </message>
      <message NAME="DEBUG_MCU_LINK" ID="13">
        <field TYPE="uint8" NAME="i2c_nb_err"></field>
        <field TYPE="uint8" NAME="i2c_mcu1_nb_err"></field>
        <field TYPE="uint8" NAME="ppm_rate"></field>
      </message>
      <message NAME="CALIBRATION" ID="14">
        <field TYPE="float" NAME="climb_sum_err" FORMAT="%.1f"></field>
        <field TYPE="uint8" NAME="climb_gaz_submode"></field>
      </message>
      <message NAME="SETTINGS" ID="15">
        <field TYPE="float" NAME="slider_1_val"></field>
        <field TYPE="float" NAME="slider_2_val"></field>
      </message>
      <message NAME="DESIRED" ID="16">
        <field UNIT="rad" TYPE="float" NAME="roll" FORMAT="%.2f" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="pitch" FORMAT="%.2f" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="course" FORMAT="%.1f" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="m" TYPE="float" NAME="x" FORMAT="%.0f"></field>
        <field UNIT="m" TYPE="float" NAME="y" FORMAT="%.0f"></field>
        <field UNIT="m" TYPE="float" NAME="altitude" FORMAT="%.0f"></field>
        <field UNIT="m/s" TYPE="float" NAME="climb" FORMAT="%.1f"></field>
        <field UNIT="m/s" TYPE="float" NAME="airspeed" FORMAT="%.1f"></field>
      </message>
      <message NAME="GPS_SOL" ID="17">
        <field UNIT="cm" TYPE="uint32" NAME="Pacc"></field>
        <field UNIT="cm/s" TYPE="uint32" NAME="Sacc"></field>
        <field TYPE="uint16" NAME="PDOP"></field>
        <field TYPE="uint8" NAME="numSV"></field>
      </message>
      <message NAME="ADC_GENERIC" ID="18">
        <field TYPE="uint16" NAME="val1"></field>
        <field TYPE="uint16" NAME="val2"></field>
      </message>
      <message NAME="TEST_FORMAT" ID="19">
        <field TYPE="double" NAME="val1"></field>
        <field TYPE="float" NAME="val2"></field>
      </message>
      <message NAME="CAM" ID="20">
        <field UNIT="deg" TYPE="int16" NAME="phi"></field>
        <field UNIT="deg" TYPE="int16" NAME="theta"></field>
        <field UNIT="m" TYPE="int16" NAME="target_x"></field>
        <field UNIT="m" TYPE="int16" NAME="target_y"></field>
      </message>
      <message NAME="CIRCLE" ID="21">
        <field UNIT="m" TYPE="float" NAME="center_east"></field>
        <field UNIT="m" TYPE="float" NAME="center_north"></field>
        <field UNIT="m" TYPE="float" NAME="radius"></field>
      </message>
      <message NAME="SEGMENT" ID="22">
        <field UNIT="m" TYPE="float" NAME="segment_east_1"></field>
        <field UNIT="m" TYPE="float" NAME="segment_north_1"></field>
        <field UNIT="m" TYPE="float" NAME="segment_east_2"></field>
        <field UNIT="m" TYPE="float" NAME="segment_north_2"></field>
      </message>
      <message NAME="VECTORNAV_INFO" ID="23">
        <field UNIT="s" TYPE="float" NAME="timestamp"></field>
        <field TYPE="uint32" NAME="chksm_error"></field>
        <field TYPE="uint32" NAME="hdr_error"></field>
        <field TYPE="uint16" NAME="counter"></field>
        <field VALUES="NoTracking|OutOfSpecs|OK" TYPE="uint8" NAME="ins_status"></field>
        <field TYPE="uint8" NAME="ins_err"></field>
        <field UNIT="deg" TYPE="float" NAME="YprU1"></field>
        <field UNIT="deg" TYPE="float" NAME="YprU2"></field>
        <field UNIT="deg" TYPE="float" NAME="YprU3"></field>
      </message>
      <message NAME="SVINFO" ID="25">
        <field TYPE="uint8" NAME="chn"></field>
        <field TYPE="uint8" NAME="SVID"></field>
        <field TYPE="uint8" NAME="Flags"></field>
        <field TYPE="uint8" NAME="QI"></field>
        <field UNIT="dbHz" TYPE="uint8" NAME="CNO"></field>
        <field UNIT="deg" TYPE="int8" NAME="Elev"></field>
        <field UNIT="deg" TYPE="int16" NAME="Azim"></field>
      </message>
      <message NAME="DEBUG" ID="26">
        <field TYPE="uint8[]" NAME="msg"></field>
      </message>
      <message NAME="SURVEY" ID="27">
        <field UNIT="m" TYPE="float" NAME="east"></field>
        <field UNIT="m" TYPE="float" NAME="north"></field>
        <field UNIT="m" TYPE="float" NAME="west"></field>
        <field UNIT="m" TYPE="float" NAME="south"></field>
      </message>
      <message NAME="WC_RSSI" ID="28">
        <field TYPE="uint8" NAME="raw_level"></field>
      </message>
      <message NAME="RANGEFINDER" ID="29">
        <field UNIT="cm" TYPE="uint16" NAME="range"></field>
        <field UNIT="m/s" TYPE="float" NAME="z_dot"></field>
        <field UNIT="m/s" TYPE="float" NAME="z_dot_sum_err"></field>
        <field UNIT="m/s" TYPE="float" NAME="z_dot_setpoint"></field>
        <field UNIT="m/s" TYPE="float" NAME="z_sum_err"></field>
        <field UNIT="m" TYPE="float" NAME="z_setpoint"></field>
        <field UNIT="bool" TYPE="uint8" NAME="flying"></field>
      </message>
      <message NAME="DATALINK_REPORT" ID="30">
        <description>Datalink status reported by an aircraft for the ground</description>
        <field UNIT="s" TYPE="uint16" NAME="uplink_lost_time"></field>
        <field TYPE="uint16" NAME="uplink_nb_msgs"></field>
        <field TYPE="uint16" NAME="downlink_nb_msgs"></field>
        <field UNIT="bytes/s" TYPE="uint16" NAME="downlink_rate"></field>
        <field TYPE="uint8" NAME="downlink_ovrn"></field>
      </message>
      <message NAME="DL_VALUE" ID="31">
        <field TYPE="uint8" NAME="index"></field>
        <field TYPE="float" NAME="value"></field>
      </message>
      <message NAME="MARK" ID="32">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field UNIT="deg" TYPE="float" NAME="lat"></field>
        <field UNIT="deg" TYPE="float" NAME="long"></field>
      </message>
      <message NAME="SYS_MON" ID="33">
        <field UNIT="usec" TYPE="uint16" NAME="periodic_time" ALT_UNIT_COEF="0.001" ALT_UNIT="msec"></field>
        <field UNIT="usec" TYPE="uint16" NAME="periodic_time_min" ALT_UNIT_COEF="0.001" ALT_UNIT="msec"></field>
        <field UNIT="usec" TYPE="uint16" NAME="periodic_time_max" ALT_UNIT_COEF="0.001" ALT_UNIT="msec"></field>
        <field UNIT="usec" TYPE="uint16" NAME="periodic_cycle" ALT_UNIT_COEF="0.001" ALT_UNIT="msec"></field>
        <field UNIT="usec" TYPE="uint16" NAME="periodic_cycle_min" ALT_UNIT_COEF="0.001" ALT_UNIT="msec"></field>
        <field UNIT="usec" TYPE="uint16" NAME="periodic_cycle_max" ALT_UNIT_COEF="0.001" ALT_UNIT="msec"></field>
        <field TYPE="uint16" NAME="event_number"></field>
        <field UNIT="%" TYPE="uint8" NAME="cpu_load"></field>
      </message>
      <message NAME="MOTOR" ID="34">
        <field UNIT="Hz" TYPE="uint16" NAME="rpm"></field>
        <field UNIT="mA" TYPE="int32" NAME="current"></field>
      </message>
      <message NAME="WP_MOVED" ID="35">
        <description>      Waypoint with id wp_id has been updated/moved to the specified UTM coordinates.</description>
        <field TYPE="uint8" NAME="wp_id"></field>
        <field UNIT="m" TYPE="float" NAME="utm_east"></field>
        <field UNIT="m" TYPE="float" NAME="utm_north"></field>
        <field UNIT="m" TYPE="float" NAME="alt">Height above Mean Sea Level (geoid)</field>
        <field TYPE="uint8" NAME="utm_zone"></field>
      </message>
      <message NAME="MKK" ID="36">
        <field TYPE="uint8" NAME="nr"></field>
        <field UNIT="Poles/s" TYPE="uint8" NAME="rpm"></field>
        <field UNIT="mA" TYPE="uint8" NAME="current"></field>
        <field UNIT="deg" TYPE="int8" NAME="temp"></field>
      </message>
      <message NAME="ENERGY" ID="37">
        <field UNIT="V" TYPE="float" NAME="bat"></field>
        <field UNIT="A" TYPE="float" NAME="amp"></field>
        <field UNIT="mAh" TYPE="uint16" NAME="energy"></field>
        <field UNIT="W" TYPE="float" NAME="power"></field>
      </message>
      <message NAME="BARO_BMP85_CALIB" ID="38">
        <field TYPE="int16" NAME="a1"></field>
        <field TYPE="int16" NAME="a2"></field>
        <field TYPE="int16" NAME="a3"></field>
        <field TYPE="uint16" NAME="a4"></field>
        <field TYPE="uint16" NAME="a5"></field>
        <field TYPE="uint16" NAME="a6"></field>
        <field TYPE="int16" NAME="b1"></field>
        <field TYPE="int16" NAME="b2"></field>
        <field TYPE="int16" NAME="mb"></field>
        <field TYPE="int16" NAME="mc"></field>
        <field TYPE="int16" NAME="md"></field>
      </message>
      <message NAME="BARO_BMP85" ID="39">
        <field TYPE="int32" NAME="UT"></field>
        <field TYPE="int32" NAME="UP"></field>
        <field TYPE="uint32" NAME="P"></field>
        <field TYPE="float" NAME="T"></field>
        <field TYPE="float" NAME="MSL"></field>
      </message>
      <message NAME="SPEED_LOOP" ID="40">
        <field UNIT="m/s" TYPE="float" NAME="ve_set_point"></field>
        <field UNIT="m/s" TYPE="float" NAME="ve"></field>
        <field UNIT="m/s" TYPE="float" NAME="vn_set_point"></field>
        <field UNIT="m/s" TYPE="float" NAME="vn"></field>
        <field UNIT="rad" TYPE="float" NAME="north_sp"></field>
        <field UNIT="rad" TYPE="float" NAME="east_sp"></field>
      </message>
      <message NAME="ALT_KALMAN" ID="41">
        <field TYPE="float" NAME="p00"></field>
        <field TYPE="float" NAME="p01"></field>
        <field TYPE="float" NAME="p10"></field>
        <field TYPE="float" NAME="p11"></field>
      </message>
      <message NAME="ESTIMATOR" ID="42">
        <field UNIT="m" TYPE="float" NAME="z"></field>
        <field UNIT="m/s" TYPE="float" NAME="z_dot"></field>
      </message>
      <message NAME="TUNE_ROLL" ID="43">
        <field TYPE="float" NAME="p"></field>
        <field TYPE="float" NAME="phi"></field>
        <field TYPE="float" NAME="phi_sp"></field>
      </message>
      <message NAME="BARO_MS5534A" ID="44">
        <field UNIT="P" TYPE="uint32" NAME="pressure"></field>
        <field UNIT="dC" TYPE="uint16" NAME="temp"></field>
        <field UNIT="m" TYPE="float" NAME="alt"></field>
      </message>
      <message NAME="PRESSURE" ID="45">
        <field TYPE="float" NAME="airspeed_adc"></field>
        <field UNIT="m/s" TYPE="float" NAME="airspeed"></field>
        <field TYPE="float" NAME="altitude_adc"></field>
        <field UNIT="m" TYPE="float" NAME="altitude"></field>
      </message>
      <message NAME="BARO_WORDS" ID="46">
        <field TYPE="uint16" NAME="w1"></field>
        <field TYPE="uint16" NAME="w2"></field>
        <field TYPE="uint16" NAME="w3"></field>
        <field TYPE="uint16" NAME="w4"></field>
      </message>
      <message NAME="WP_MOVED_LLA" ID="47">
        <field TYPE="uint8" NAME="wp_id"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m">Height above Mean Sea Level (geoid)</field>
      </message>
      <message NAME="CHRONO" ID="48">
        <field TYPE="uint8" NAME="tag"></field>
        <field UNIT="us" TYPE="uint32" NAME="time"></field>
      </message>
      <message NAME="WP_MOVED_ENU" ID="49">
        <field TYPE="uint8" NAME="wp_id"></field>
        <field UNIT="2^8m" TYPE="int32" NAME="east" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field UNIT="2^8m" TYPE="int32" NAME="north" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field UNIT="2^8m" TYPE="int32" NAME="up" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
      </message>
      <message NAME="WINDTURBINE_STATUS_" ID="50">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="tb_id"></field>
        <field UNIT="ms" TYPE="uint32" NAME="sync_itow"></field>
        <field UNIT="ms" TYPE="uint32" NAME="cycle_time"></field>
      </message>
      <message NAME="RC_3CH_" ID="51">
        <field UNIT="byte_mask" TYPE="uint8" NAME="throttle_mode"></field>
        <field TYPE="int8" NAME="roll"></field>
        <field TYPE="int8" NAME="pitch"></field>
      </message>
      <message NAME="MPPT" ID="52">
        <field TYPE="int16[]" NAME="values" ALT_UNIT_COEF="1e-3"></field>
      </message>
      <message NAME="DEBUG_IR_I2C" ID="53">
        <field UNIT="adc" TYPE="int16" NAME="ir1"></field>
        <field UNIT="adc" TYPE="int16" NAME="ir2"></field>
        <field UNIT="adc" TYPE="int16" NAME="top"></field>
      </message>
      <message NAME="AIRSPEED" ID="54">
        <field UNIT="m/s" TYPE="float" NAME="airspeed"></field>
        <field UNIT="m/s" TYPE="float" NAME="airspeed_sp"></field>
        <field UNIT="m/s" TYPE="float" NAME="airspeed_cnt"></field>
        <field UNIT="m/s" TYPE="float" NAME="groundspeed_sp"></field>
      </message>
      <message NAME="XSENS" ID="55">
        <field UNIT="" TYPE="int16" NAME="counter"></field>
        <field UNIT="deg/s" TYPE="float" NAME="p"></field>
        <field UNIT="deg/s" TYPE="float" NAME="q"></field>
        <field UNIT="deg/s" TYPE="float" NAME="r"></field>
        <field UNIT="deg" TYPE="float" NAME="phi"></field>
        <field UNIT="deg" TYPE="float" NAME="theta"></field>
        <field UNIT="deg" TYPE="float" NAME="psi"></field>
        <field UNIT="m/s2" TYPE="float" NAME="ax"></field>
        <field UNIT="m/s2" TYPE="float" NAME="ay"></field>
        <field UNIT="m/s2" TYPE="float" NAME="az"></field>
        <field UNIT="m/s" TYPE="float" NAME="vx"></field>
        <field UNIT="m/s" TYPE="float" NAME="vy"></field>
        <field UNIT="m/s" TYPE="float" NAME="vz"></field>
        <field UNIT="deg" TYPE="float" NAME="lat"></field>
        <field UNIT="deg" TYPE="float" NAME="lon"></field>
        <field UNIT="m" TYPE="float" NAME="alt"></field>
        <field UNIT="" TYPE="uint8" NAME="status"></field>
        <field UNIT="" TYPE="uint8" NAME="hour"></field>
        <field UNIT="" TYPE="uint8" NAME="min"></field>
        <field UNIT="" TYPE="uint8" NAME="sec"></field>
        <field UNIT="" TYPE="uint32" NAME="nanosec"></field>
        <field UNIT="" TYPE="uint16" NAME="year"></field>
        <field UNIT="" TYPE="uint8" NAME="month"></field>
        <field UNIT="" TYPE="uint8" NAME="day"></field>
      </message>
      <message NAME="BARO_ETS" ID="56">
        <field TYPE="uint16" NAME="adc"></field>
        <field TYPE="uint16" NAME="offset"></field>
        <field TYPE="float" NAME="scaled"></field>
      </message>
      <message NAME="AIRSPEED_ETS" ID="57">
        <field TYPE="uint16" NAME="adc"></field>
        <field TYPE="uint16" NAME="offset"></field>
        <field TYPE="float" NAME="scaled"></field>
      </message>
      <message NAME="PBN" ID="58">
        <field TYPE="uint16" NAME="airspeed_adc"></field>
        <field TYPE="uint16" NAME="altitude_adc"></field>
        <field TYPE="float" NAME="airspeed"></field>
        <field TYPE="float" NAME="altitude"></field>
        <field TYPE="uint16" NAME="airspeed_offset"></field>
        <field TYPE="uint16" NAME="altitude_offset"></field>
      </message>
      <message NAME="GPS_LLA" ID="59">
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m">altitude above WGS84 reference ellipsoid</field>
        <field UNIT="mm" TYPE="int32" NAME="hmsl" ALT_UNIT="m">Height above Mean Sea Level (geoid)</field>
        <field UNIT="decideg" TYPE="int16" NAME="course" ALT_UNIT="deg"></field>
        <field UNIT="cm/s" TYPE="uint16" NAME="speed" ALT_UNIT="m/s"></field>
        <field UNIT="cm/s" TYPE="int16" NAME="climb" ALT_UNIT="m/s"></field>
        <field UNIT="weeks" TYPE="uint16" NAME="week"></field>
        <field UNIT="ms" TYPE="uint32" NAME="itow"></field>
        <field UNIT="byte_mask" TYPE="uint8" NAME="mode"></field>
        <field TYPE="uint8" NAME="gps_nb_err"></field>
      </message>
      <message NAME="H_CTL_A" ID="60">
        <field TYPE="float" NAME="roll_sum_err"></field>
        <field UNIT="rad" TYPE="float" NAME="roll_sp" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="roll_ref" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="phi" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="pprz" TYPE="int16" NAME="aileron_sp"></field>
        <field TYPE="float" NAME="pitch_sum_err"></field>
        <field UNIT="rad" TYPE="float" NAME="pitch_sp" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="pitch_ref" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="theta" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="pprz" TYPE="int16" NAME="elevator_sp"></field>
      </message>
      <message NAME="TURB_PRESSURE_RAW" ID="61">
        <field UNIT="adc" TYPE="int32" NAME="ch_0"></field>
        <field UNIT="adc" TYPE="int32" NAME="ch_1"></field>
        <field UNIT="adc" TYPE="int32" NAME="ch_2"></field>
        <field UNIT="adc" TYPE="int32" NAME="ch_3"></field>
        <field UNIT="adc" TYPE="int32" NAME="ch_4"></field>
        <field UNIT="adc" TYPE="int32" NAME="ch_5"></field>
        <field UNIT="adc" TYPE="int32" NAME="ch_6"></field>
        <field UNIT="adc" TYPE="int32" NAME="ch_7"></field>
        <field UNIT="adc" TYPE="int32" NAME="ch_8"></field>
        <field UNIT="adc" TYPE="int32" NAME="ch_9"></field>
        <field UNIT="adc" TYPE="int32" NAME="ch_10"></field>
        <field UNIT="adc" TYPE="int32" NAME="ch_11"></field>
        <field UNIT="adc" TYPE="int32" NAME="ch_12"></field>
        <field UNIT="adc" TYPE="int32" NAME="ch_13"></field>
        <field UNIT="adc" TYPE="int32" NAME="ch_14"></field>
        <field UNIT="adc" TYPE="int32" NAME="ch_15"></field>
      </message>
      <message NAME="TURB_PRESSURE_VOLTAGE" ID="62">
        <field TYPE="float" NAME="ch_1_p"></field>
        <field TYPE="float" NAME="ch_1_t"></field>
        <field TYPE="float" NAME="ch_2_p"></field>
        <field TYPE="float" NAME="ch_2_t"></field>
        <field TYPE="float" NAME="ch_3_p"></field>
        <field TYPE="float" NAME="ch_3_t"></field>
        <field TYPE="float" NAME="ch_4_p"></field>
        <field TYPE="float" NAME="ch_4_t"></field>
        <field TYPE="float" NAME="ch_5_p"></field>
        <field TYPE="float" NAME="ch_5_t"></field>
        <field TYPE="float" NAME="ch_6_p"></field>
        <field TYPE="float" NAME="ch_6_t"></field>
        <field TYPE="float" NAME="ch_7_p"></field>
        <field TYPE="float" NAME="ch_7_t"></field>
        <field TYPE="float" NAME="gnd1"></field>
        <field TYPE="float" NAME="gnd2"></field>
      </message>
      <message NAME="CAM_POINT" ID="63">
        <field UNIT="m" TYPE="uint16" NAME="cam_point_distance_from_home"></field>
        <field UNIT="deg" TYPE="float" NAME="cam_point_lat"></field>
        <field UNIT="deg" TYPE="float" NAME="cam_point_lon"></field>
      </message>
      <message NAME="DC_INFO" ID="64">
        <field UNIT="" TYPE="int16" NAME="mode"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m">altitude above WGS84 reference ellipsoid</field>
        <field UNIT="deg" TYPE="float" NAME="course"></field>
        <field TYPE="uint16" NAME="photo_nr"></field>
        <field UNIT="m" TYPE="float" NAME="dist"></field>
        <field UNIT="m" TYPE="float" NAME="next_dist"></field>
        <field UNIT="m" TYPE="float" NAME="start_x"></field>
        <field UNIT="m" TYPE="float" NAME="start_y"></field>
        <field UNIT="deg" TYPE="float" NAME="start_angle"></field>
        <field UNIT="deg" TYPE="float" NAME="angle"></field>
        <field TYPE="float" NAME="last_block"></field>
        <field UNIT="" TYPE="uint16" NAME="count"></field>
        <field UNIT="decisec" TYPE="uint8" NAME="shutter" ALT_UNIT_COEF="0.1" ALT_UNIT="sec"></field>
      </message>
      <message NAME="AMSYS_BARO" ID="65">
        <field TYPE="uint16" NAME="pBaroRaw"></field>
        <field UNIT="Pa" TYPE="float" NAME="pBaro"></field>
        <field UNIT="Pa" TYPE="float" NAME="pHomePressure"></field>
        <field UNIT="m" TYPE="float" NAME="AltOffset"></field>
        <field UNIT="m" TYPE="float" NAME="aktuell"></field>
        <field UNIT="m" TYPE="float" NAME="Over_Ground"></field>
        <field UNIT="C" TYPE="float" NAME="tempBaro"></field>
      </message>
      <message NAME="AMSYS_AIRSPEED" ID="66">
        <field TYPE="uint16" NAME="asRaw"></field>
        <field UNIT="Pa" TYPE="float" NAME="asPresure"></field>
        <field UNIT="m/s" TYPE="float" NAME="asAirspeed"></field>
        <field UNIT="m/s" TYPE="float" NAME="asAirsFilt"></field>
        <field UNIT="C" TYPE="float" NAME="asTemp"></field>
      </message>
      <message NAME="FLIGHT_BENCHMARK" ID="67">
        <field TYPE="float" NAME="SE_As"></field>
        <field TYPE="float" NAME="SE_Alt"></field>
        <field TYPE="float" NAME="SE_Pos"></field>
        <field TYPE="float" NAME="Err_As"></field>
        <field TYPE="float" NAME="Err_Alt"></field>
        <field TYPE="float" NAME="Err_Pos"></field>
      </message>
      <message NAME="MPL3115_BARO" ID="68">
        <field TYPE="uint32" NAME="pressure" ALT_UNIT_COEF="0.25" ALT_UNIT="Pa"></field>
        <field TYPE="int16" NAME="temp" ALT_UNIT_COEF="0.0625" ALT_UNIT="degC"></field>
        <field UNIT="m" TYPE="float" NAME="alt"></field>
      </message>
      <message NAME="AOA_ADC" ID="69">
        <field TYPE="uint16" NAME="adcVal"></field>
        <field UNIT="rad" TYPE="float" NAME="AOA"></field>
      </message>
      <message NAME="XTEND_RSSI" ID="70">
        <field UNIT="s" TYPE="uint16" NAME="datalink_time"></field>
        <field UNIT="dB" TYPE="uint8" NAME="rssi_fade_margin"></field>
        <field UNIT="%" TYPE="uint8" NAME="duty"></field>
      </message>
      <message NAME="SUPERBITRF" ID="72">
        <field VALUES="UNINIT|INIT_BINDING|INIT_TRANSFER|BINDING|SYNCING_A|SYNCING_B|TRANSFER" TYPE="uint8" NAME="status"></field>
        <field VALUES="UNINIT|IDLE|GET_MFG_ID|MULTIWRITE|DATA_CODE|CHAN_SOP_DATA_CRC|RX_IRQ_STATUS_PACKET|SEND" TYPE="uint8" NAME="cyrf_status"></field>
        <field TYPE="uint32" NAME="irq_count"></field>
        <field TYPE="uint32" NAME="rx_packet_count"></field>
        <field TYPE="uint32" NAME="tx_packet_count"></field>
        <field TYPE="uint32" NAME="transfer_timeouts"></field>
        <field TYPE="uint32" NAME="resync_count"></field>
        <field TYPE="uint32" NAME="uplink_count"></field>
        <field TYPE="uint32" NAME="rc_count"></field>
        <field TYPE="uint32" NAME="timing1"></field>
        <field TYPE="uint32" NAME="timing2"></field>
        <field TYPE="uint32" NAME="bind_mfg_id"></field>
        <field TYPE="uint8[]" NAME="mfg_id"></field>
      </message>
      <message NAME="GX3_INFO" ID="73">
        <field UNIT="hz" TYPE="float" NAME="GX3_freq"></field>
        <field TYPE="uint32" NAME="chksm_error"></field>
        <field TYPE="uint32" NAME="hdr_error"></field>
        <field TYPE="uint16" NAME="GX3_chksm"></field>
      </message>
      <message NAME="EXPLAIN" ID="74">
        <field VALUES="NAME|SETTING|WAYPOINT|BLOCK|IMAV2013" TYPE="uint8" NAME="type"></field>
        <field TYPE="uint8" NAME="id"></field>
        <field TYPE="uint8[]" NAME="string"></field>
      </message>
      <message NAME="VIDEO_TELEMETRY" ID="75">
        <field UNIT="pixels" TYPE="int32" NAME="blob_x1"></field>
        <field UNIT="pixels" TYPE="int32" NAME="blob_y1"></field>
        <field UNIT="pixels" TYPE="int32" NAME="blob_x2"></field>
        <field UNIT="pixels" TYPE="int32" NAME="blob_y2"></field>
        <field UNIT="pixels" TYPE="int32" NAME="blob_x3"></field>
        <field UNIT="pixels" TYPE="int32" NAME="blob_y3"></field>
        <field UNIT="pixels" TYPE="int32" NAME="blob_x4"></field>
        <field UNIT="pixels" TYPE="int32" NAME="blob_y4"></field>
      </message>
      <message NAME="VF_UPDATE" ID="76">
        <field UNIT="m" TYPE="float" NAME="baro"></field>
        <field UNIT="m" TYPE="float" NAME="range_meter"></field>
      </message>
      <message NAME="VF_PREDICT" ID="77">
        <field UNIT="m/s/s" TYPE="float" NAME="accel"></field>
      </message>
      <message NAME="INV_FILTER" ID="78">
        <field TYPE="float" NAME="quat"></field>
        <field UNIT="rad" TYPE="float" NAME="phi_inv" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="theta_inv" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="psi_inv" ALT_UNIT="deg"></field>
        <field UNIT="m/s" TYPE="float" NAME="Vx_inv"></field>
        <field UNIT="m/s" TYPE="float" NAME="Vy_inv"></field>
        <field UNIT="m/s" TYPE="float" NAME="Vz_inv"></field>
        <field UNIT="m" TYPE="float" NAME="Px_inv"></field>
        <field UNIT="m" TYPE="float" NAME="Py_inv"></field>
        <field UNIT="m" TYPE="float" NAME="Pz_inv"></field>
        <field UNIT="rad/s" TYPE="float" NAME="bias_phi" ALT_UNIT="deg/s"></field>
        <field UNIT="rad/s" TYPE="float" NAME="bias_theta" ALT_UNIT="deg/s"></field>
        <field UNIT="rad/s" TYPE="float" NAME="bias_psi" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="bias_as"></field>
        <field TYPE="float" NAME="bias_hb"></field>
        <field UNIT="m" TYPE="float" NAME="meas_baro"></field>
        <field UNIT="m" TYPE="float" NAME="meas_gps"></field>
      </message>
      <message NAME="MISSION_STATUS" ID="79">
        <field TYPE="float" NAME="remaining_time"></field>
        <field TYPE="uint8[]" NAME="task_list"></field>
      </message>
      <message NAME="CROSS_TRACK_ERROR" ID="80">
        <field UNIT="m" TYPE="float" NAME="cross_track_error"></field>
        <field TYPE="float" NAME="cte_int"></field>
      </message>
      <message NAME="GENERIC_COM" ID="81">
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="m" TYPE="int16" NAME="alt"></field>
        <field UNIT="cm/s" TYPE="uint16" NAME="gspeed" ALT_UNIT="m/s"></field>
        <field UNIT="decideg" TYPE="int16" NAME="course" ALT_UNIT="deg"></field>
        <field UNIT="cm/s" TYPE="uint16" NAME="airspeed" ALT_UNIT="m/s"></field>
        <field UNIT="decivolt" TYPE="uint8" NAME="vsupply"></field>
        <field UNIT="deciAh" TYPE="uint8" NAME="energy"></field>
        <field UNIT="%" TYPE="uint8" NAME="throttle"></field>
        <field TYPE="uint8" NAME="ap_mode"></field>
        <field TYPE="uint8" NAME="nav_block"></field>
        <field UNIT="s" TYPE="uint16" NAME="flight_time"></field>
      </message>
      <message NAME="FORMATION_SLOT_TM" ID="82">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="mode"></field>
        <field UNIT="m" TYPE="float" NAME="slot_east" FORMAT="%.1f"></field>
        <field UNIT="m" TYPE="float" NAME="slot_north" FORMAT="%.1f"></field>
        <field UNIT="m" TYPE="float" NAME="slot_alt" FORMAT="%.1f"></field>
      </message>
      <message NAME="FORMATION_STATUS_TM" ID="83">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="leader_id"></field>
        <field TYPE="uint8" NAME="status"></field>
      </message>
      <message NAME="BMP_STATUS" ID="84">
        <field TYPE="int32" NAME="UP"></field>
        <field TYPE="int32" NAME="UT"></field>
        <field UNIT="Pa" TYPE="int32" NAME="press"></field>
        <field UNIT="10x_deg_celsius" TYPE="int32" NAME="temp"></field>
      </message>
      <message NAME="MLX_STATUS" ID="85">
        <field TYPE="uint16" NAME="itemp_case"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp_case" FORMAT="%.2f"></field>
        <field TYPE="uint16" NAME="itemp_obj"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp_obj" FORMAT="%.2f"></field>
      </message>
      <message NAME="TMP_STATUS" ID="86">
        <field TYPE="uint16" NAME="itemp"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp" FORMAT="%.2f"></field>
      </message>
      <message NAME="WIND_INFO_RET" ID="87">
        <field UNIT="m/s" TYPE="float" NAME="east"></field>
        <field UNIT="m/s" TYPE="float" NAME="north"></field>
        <field UNIT="m/s" TYPE="float" NAME="airspeed"></field>
      </message>
      <message NAME="SCP_STATUS" ID="88">
        <field UNIT="Pa" TYPE="uint32" NAME="press"></field>
        <field UNIT="100x_deg_celsius" TYPE="int16" NAME="temp"></field>
      </message>
      <message NAME="SHT_STATUS" ID="89">
        <field TYPE="uint16" NAME="ihumid"></field>
        <field TYPE="uint16" NAME="itemp"></field>
        <field UNIT="rel_hum" TYPE="float" NAME="humid" FORMAT="%.2f"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp" FORMAT="%.2f"></field>
      </message>
      <message NAME="ENOSE_STATUS" ID="90">
        <field TYPE="uint16" NAME="val1"></field>
        <field TYPE="uint16" NAME="val2"></field>
        <field TYPE="uint16" NAME="val3"></field>
        <field TYPE="uint16" NAME="PID"></field>
        <field TYPE="uint8[]" NAME="heat"></field>
      </message>
      <message NAME="DPICCO_STATUS" ID="91">
        <field TYPE="uint16" NAME="humid"></field>
        <field TYPE="uint16" NAME="temp"></field>
        <field UNIT="rel_hum" TYPE="float" NAME="fhumid" FORMAT="%.2f"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="ftemp" FORMAT="%.2f"></field>
      </message>
      <message NAME="ANTENNA_DEBUG" ID="92">
        <field TYPE="int32" NAME="mag_xraw"></field>
        <field TYPE="int32" NAME="mag_yraw"></field>
        <field TYPE="float" NAME="mag_xcal"></field>
        <field TYPE="float" NAME="mag_ycal"></field>
        <field TYPE="float" NAME="mag_heading"></field>
        <field TYPE="float" NAME="mag_magnitude"></field>
        <field TYPE="float" NAME="mag_temp"></field>
        <field TYPE="uint8" NAME="mag_distor"></field>
        <field TYPE="uint8" NAME="mag_cal_status"></field>
      </message>
      <message NAME="ANTENNA_STATUS" ID="93">
        <field TYPE="float" NAME="azim_sp"></field>
        <field TYPE="float" NAME="elev_sp"></field>
        <field TYPE="uint8" NAME="id_sp"></field>
        <field TYPE="uint8" NAME="mode"></field>
      </message>
      <message NAME="MOTOR_BENCH_STATUS" ID="94">
        <field TYPE="uint32" NAME="time_ticks"></field>
        <field TYPE="float" NAME="throttle" FORMAT="%.3f"></field>
        <field TYPE="float" NAME="rpm"></field>
        <field TYPE="float" NAME="current"></field>
        <field TYPE="float" NAME="thrust"></field>
        <field TYPE="float" NAME="torque"></field>
        <field TYPE="uint16" NAME="time_s"></field>
        <field TYPE="uint8" NAME="mode"></field>
      </message>
      <message NAME="MOTOR_BENCH_STATIC" ID="95">
        <field TYPE="float" NAME="av_rpm"></field>
        <field TYPE="float" NAME="av_thrust"></field>
        <field TYPE="float" NAME="av_current"></field>
        <field TYPE="uint16" NAME="throttle"></field>
      </message>
      <message NAME="HIH_STATUS" ID="96">
        <field TYPE="uint16" NAME="humid"></field>
        <field UNIT="rel_hum" TYPE="float" NAME="fhumid" FORMAT="%.2f"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="ftemp" FORMAT="%.2f"></field>
      </message>
      <message NAME="TEMT_STATUS" ID="97">
        <field TYPE="uint16" NAME="light"></field>
        <field UNIT="percent" TYPE="float" NAME="f_light" FORMAT="%.2f"></field>
      </message>
      <message NAME="GP2Y_STATUS" ID="98">
        <field TYPE="uint16" NAME="idensity"></field>
        <field UNIT="mg/m3" TYPE="float" NAME="density" FORMAT="%.2f"></field>
      </message>
      <message NAME="SHT_I2C_SERIAL" ID="99">
        <field TYPE="uint32" NAME="serial0"></field>
        <field TYPE="uint32" NAME="serial1"></field>
      </message>
      <message NAME="PPM" ID="100">
        <field TYPE="uint8" NAME="ppm_rate"></field>
        <field UNIT="usec" TYPE="uint16[]" NAME="values"></field>
      </message>
      <message NAME="RC" ID="101">
        <field UNIT="pprz" TYPE="int16[]" NAME="values" FORMAT="%d"></field>
      </message>
      <message NAME="COMMANDS" ID="102">
        <field UNIT="ticks" TYPE="int16[]" NAME="values"></field>
      </message>
      <message NAME="FBW_STATUS" ID="103">
        <field VALUES="OK|LOST|REALLY_LOST" TYPE="uint8" NAME="rc_status"></field>
        <field UNIT="Hz" TYPE="uint8" NAME="frame_rate"></field>
        <field VALUES="MANUAL|AUTO|FAILSAFE" TYPE="uint8" NAME="mode"></field>
        <field UNIT="decivolt" TYPE="uint16" NAME="vsupply"></field>
        <field UNIT="mA" TYPE="int32" NAME="current"></field>
      </message>
      <message NAME="ADC" ID="104">
        <field VALUES="FBW|AP" TYPE="uint8" NAME="mcu"></field>
        <field UNIT="none" TYPE="uint16[]" NAME="values"></field>
      </message>
      <message NAME="ACTUATORS" ID="105">
        <field UNIT="none" TYPE="int16[]" NAME="values"></field>
      </message>
      <message NAME="DC_SHOT" ID="110">
        <field TYPE="int16" NAME="photo_nr"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg">Gedetic latitude</field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg">Longitude</field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m">altitude above WGS84 reference ellipsoid</field>
        <field UNIT="mm" TYPE="int32" NAME="hmsl" ALT_UNIT="m">Height above Mean Sea Level (geoid)</field>
        <field UNIT="decideg" TYPE="int16" NAME="phi">Euler angle around x-axis (roll)</field>
        <field UNIT="decideg" TYPE="int16" NAME="theta">Euler angle around y-axis (pitch)</field>
        <field UNIT="decideg" TYPE="int16" NAME="psi">Euler angle around z-axis (yaw)</field>
        <field UNIT="decideg" TYPE="int16" NAME="course">Course over ground (CW/north)</field>
        <field UNIT="cm/s" TYPE="uint16" NAME="speed">horizontal ground speed</field>
        <field UNIT="ms" TYPE="uint32" NAME="itow">GPS time of week</field>
      </message>
      <message NAME="TEST_BOARD_RESULTS" ID="111">
        <field TYPE="uint8" NAME="uart"></field>
        <field TYPE="uint8" NAME="ppm"></field>
        <field TYPE="uint16[]" NAME="servo"></field>
      </message>
      <message NAME="MLX_SERIAL" ID="113">
        <field TYPE="uint32" NAME="serial0"></field>
        <field TYPE="uint32" NAME="serial1"></field>
      </message>
      <message NAME="PAYLOAD" ID="114">
        <field UNIT="none" TYPE="uint8[]" NAME="values"></field>
      </message>
      <message NAME="HTM_STATUS" ID="115">
        <field TYPE="uint16" NAME="ihumid"></field>
        <field TYPE="uint16" NAME="itemp"></field>
        <field UNIT="rel_hum" TYPE="float" NAME="humid" FORMAT="%.2f"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp" FORMAT="%.2f"></field>
      </message>
      <message NAME="BARO_MS5611" ID="116">
        <field TYPE="uint32" NAME="d1"></field>
        <field TYPE="uint32" NAME="d2"></field>
        <field UNIT="hPa" TYPE="float" NAME="pressure" FORMAT="%.2f"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp" FORMAT="%.2f"></field>
      </message>
      <message NAME="MS5611_COEFF" ID="117">
        <field TYPE="uint16" NAME="c0"></field>
        <field TYPE="uint16" NAME="c1"></field>
        <field TYPE="uint16" NAME="c2"></field>
        <field TYPE="uint16" NAME="c3"></field>
        <field TYPE="uint16" NAME="c4"></field>
        <field TYPE="uint16" NAME="c5"></field>
        <field TYPE="uint16" NAME="c6"></field>
        <field TYPE="uint16" NAME="c7"></field>
      </message>
      <message NAME="ATMOSPHERE_CHARGE" ID="118">
        <field TYPE="uint16" NAME="t0"></field>
        <field TYPE="uint16" NAME="t1"></field>
        <field TYPE="uint16" NAME="t2"></field>
        <field TYPE="uint16" NAME="t3"></field>
        <field TYPE="uint16" NAME="t4"></field>
        <field TYPE="uint16" NAME="t5"></field>
        <field TYPE="uint16" NAME="t6"></field>
        <field TYPE="uint16" NAME="t7"></field>
        <field TYPE="uint16" NAME="t8"></field>
        <field TYPE="uint16" NAME="t9"></field>
      </message>
      <message NAME="SOLAR_RADIATION" ID="119">
        <field TYPE="uint16" NAME="up_t0"></field>
        <field TYPE="uint16" NAME="dn_t0"></field>
        <field TYPE="uint16" NAME="up_t1"></field>
        <field TYPE="uint16" NAME="dn_t1"></field>
        <field TYPE="uint16" NAME="up_t2"></field>
        <field TYPE="uint16" NAME="dn_t2"></field>
        <field TYPE="uint16" NAME="up_t3"></field>
        <field TYPE="uint16" NAME="dn_t3"></field>
        <field TYPE="uint16" NAME="up_t4"></field>
        <field TYPE="uint16" NAME="dn_t4"></field>
        <field TYPE="uint16" NAME="up_t5"></field>
        <field TYPE="uint16" NAME="dn_t5"></field>
        <field TYPE="uint16" NAME="up_t6"></field>
        <field TYPE="uint16" NAME="dn_t6"></field>
        <field TYPE="uint16" NAME="up_t7"></field>
        <field TYPE="uint16" NAME="dn_t7"></field>
        <field TYPE="uint16" NAME="up_t8"></field>
        <field TYPE="uint16" NAME="dn_t8"></field>
        <field TYPE="uint16" NAME="up_t9"></field>
        <field TYPE="uint16" NAME="dn_t9"></field>
      </message>
      <message NAME="TCAS_TA" ID="120">
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="TCAS_RA" ID="121">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="NONE|LEVEL|CLIMB|DESCEND" TYPE="uint8" NAME="resolve"></field>
      </message>
      <message NAME="TCAS_RESOLVED" ID="122">
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="TCAS_DEBUG" ID="123">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="float" NAME="tau"></field>
      </message>
      <message NAME="POTENTIAL" ID="124">
        <field TYPE="float" NAME="east"></field>
        <field TYPE="float" NAME="north"></field>
        <field TYPE="float" NAME="alt"></field>
        <field TYPE="float" NAME="speed"></field>
        <field TYPE="float" NAME="climb"></field>
      </message>
      <message NAME="VERTICAL_ENERGY" ID="125">
        <field TYPE="float" NAME="Epot_err"></field>
        <field TYPE="float" NAME="Ekin_err"></field>
        <field TYPE="float" NAME="Etot_err"></field>
        <field TYPE="float" NAME="Edis_err"></field>
        <field TYPE="float" NAME="throttle"></field>
        <field TYPE="float" NAME="nav_pitch"></field>
        <field TYPE="float" NAME="speed_sp"></field>
      </message>
      <message NAME="TEMP_TCOUPLE" ID="126">
        <field TYPE="float" NAME="fval0"></field>
        <field TYPE="float" NAME="fval1"></field>
        <field TYPE="float" NAME="fval2"></field>
        <field TYPE="float" NAME="fval3"></field>
        <field TYPE="float" NAME="fref0"></field>
        <field TYPE="float" NAME="fref1"></field>
        <field TYPE="float" NAME="fref2"></field>
        <field TYPE="float" NAME="fref3"></field>
        <field TYPE="uint16" NAME="val0"></field>
        <field TYPE="uint16" NAME="val1"></field>
        <field TYPE="uint16" NAME="val2"></field>
        <field TYPE="uint16" NAME="val3"></field>
        <field TYPE="uint16" NAME="ref0"></field>
        <field TYPE="uint16" NAME="ref1"></field>
        <field TYPE="uint16" NAME="ref2"></field>
        <field TYPE="uint16" NAME="ref3"></field>
      </message>
      <message NAME="SHT_I2C_STATUS" ID="127">
        <field TYPE="uint16" NAME="ihumid"></field>
        <field TYPE="uint16" NAME="itemp"></field>
        <field UNIT="rel_hum" TYPE="float" NAME="humid" FORMAT="%.2f"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp" FORMAT="%.2f"></field>
      </message>
      <message NAME="CAMERA_SNAPSHOT" ID="128">
        <field TYPE="uint16" NAME="snapshot_image_number"></field>
      </message>
      <message NAME="TIMESTAMP" ID="129">
        <field TYPE="uint32" NAME="timestamp"></field>
      </message>
      <message NAME="STAB_ATTITUDE_FLOAT" ID="130">
        <field TYPE="float" NAME="est_p" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="est_q" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="est_r" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="est_phi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="est_theta" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="est_psi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="ref_phi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="ref_theta" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="ref_psi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="sum_err_phi"></field>
        <field TYPE="float" NAME="sum_err_theta"></field>
        <field TYPE="float" NAME="sum_err_psi"></field>
        <field TYPE="float" NAME="delta_a_fb" ALT_UNIT_COEF="0.0000153" ALT_UNIT="motor"></field>
        <field TYPE="float" NAME="delta_e_fb" ALT_UNIT_COEF="0.0000153" ALT_UNIT="motor"></field>
        <field TYPE="float" NAME="delta_r_fb" ALT_UNIT_COEF="0.0000153" ALT_UNIT="motor"></field>
        <field TYPE="float" NAME="delta_a_ff" ALT_UNIT_COEF="0.0000153" ALT_UNIT="motor"></field>
        <field TYPE="float" NAME="delta_e_ff" ALT_UNIT_COEF="0.0000153" ALT_UNIT="motor"></field>
        <field TYPE="float" NAME="delta_r_ff" ALT_UNIT_COEF="0.0000153" ALT_UNIT="motor"></field>
        <field TYPE="int32" NAME="delta_a"></field>
        <field TYPE="int32" NAME="delta_e"></field>
        <field TYPE="int32" NAME="delta_r"></field>
        <field TYPE="float" NAME="est_p_d" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s^2"></field>
        <field TYPE="float" NAME="est_q_d" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s^2"></field>
        <field TYPE="float" NAME="est_r_d" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s^2"></field>
      </message>
      <message NAME="IMU_GYRO_SCALED" ID="131">
        <field TYPE="int32" NAME="gp" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="gq" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="gr" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
      </message>
      <message NAME="IMU_ACCEL_SCALED" ID="132">
        <field TYPE="int32" NAME="ax" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
        <field TYPE="int32" NAME="ay" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
        <field TYPE="int32" NAME="az" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
      </message>
      <message NAME="IMU_MAG_SCALED" ID="133">
        <field TYPE="int32" NAME="mx" ALT_UNIT_COEF="0.0004883" ALT_UNIT="1"></field>
        <field TYPE="int32" NAME="my" ALT_UNIT_COEF="0.0004883" ALT_UNIT="1"></field>
        <field TYPE="int32" NAME="mz" ALT_UNIT_COEF="0.0004883" ALT_UNIT="1"></field>
      </message>
      <message NAME="FILTER" ID="134">
        <field TYPE="int32" NAME="phi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="theta" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="measure_phi" ALT_UNIT_COEF="0.0000273" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="measure_theta" ALT_UNIT_COEF="0.0000273" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="measure_psi" ALT_UNIT_COEF="0.0000273" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="corrected_phi" ALT_UNIT_COEF="0.0000273" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="corrected_theta" ALT_UNIT_COEF="0.0000273" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="corrected_psi" ALT_UNIT_COEF="0.0000273" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="correction_phi"></field>
        <field TYPE="int32" NAME="correction_theta"></field>
        <field TYPE="int32" NAME="correction_psi"></field>
        <field TYPE="int32" NAME="bp"></field>
        <field TYPE="int32" NAME="bq"></field>
        <field TYPE="int32" NAME="br"></field>
      </message>
      <message NAME="FILTER2" ID="135">
        <field TYPE="int32" NAME="px"></field>
        <field TYPE="int32" NAME="py"></field>
        <field TYPE="int32" NAME="pz"></field>
        <field TYPE="int32" NAME="gsx"></field>
        <field TYPE="int32" NAME="gsy"></field>
        <field TYPE="int32" NAME="gsz"></field>
      </message>
      <message NAME="RATE_LOOP" ID="136">
        <field TYPE="int32" NAME="sp_p"></field>
        <field TYPE="int32" NAME="sp_q"></field>
        <field TYPE="int32" NAME="sp_r"></field>
        <field TYPE="int32" NAME="ref_p"></field>
        <field TYPE="int32" NAME="ref_q"></field>
        <field TYPE="int32" NAME="ref_r"></field>
        <field TYPE="int32" NAME="refdot_p"></field>
        <field TYPE="int32" NAME="refdot_q"></field>
        <field TYPE="int32" NAME="refdot_r"></field>
        <field TYPE="int32" NAME="sumerr_p"></field>
        <field TYPE="int32" NAME="sumerr_q"></field>
        <field TYPE="int32" NAME="sumerr_r"></field>
        <field TYPE="int32" NAME="ff_p"></field>
        <field TYPE="int32" NAME="ff_q"></field>
        <field TYPE="int32" NAME="ff_r"></field>
        <field TYPE="int32" NAME="fb_p"></field>
        <field TYPE="int32" NAME="fb_q"></field>
        <field TYPE="int32" NAME="fb_r"></field>
        <field TYPE="int32" NAME="delta_t"></field>
      </message>
      <message NAME="FILTER_ALIGNER" ID="137">
        <field TYPE="int32" NAME="lp_gp" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="lp_gq" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="lp_gr" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="gp" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="gq" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="gr" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="noise"></field>
        <field TYPE="int32" NAME="cnt"></field>
        <field VALUES="UNINIT|RUNNING|LOCKED" TYPE="uint8" NAME="status"></field>
      </message>
      <message NAME="AIRSPEED_MS45XX" ID="138">
        <field UNIT="Pa" TYPE="float" NAME="diffPress"></field>
        <field UNIT="0.1 deg_celcius" TYPE="int16" NAME="temperature" ALT_UNIT_COEF="0.1" ALT_UNIT="deg_celcius"></field>
        <field UNIT="m/s" TYPE="float" NAME="airspeed"></field>
      </message>
      <message NAME="FILTER_COR" ID="139">
        <field TYPE="int32" NAME="mphi"></field>
        <field TYPE="int32" NAME="mtheta"></field>
        <field TYPE="int32" NAME="mpsi"></field>
        <field TYPE="int32" NAME="qi"></field>
        <field TYPE="int32" NAME="qx"></field>
        <field TYPE="int32" NAME="qy"></field>
        <field TYPE="int32" NAME="qz"></field>
      </message>
      <message NAME="STAB_ATTITUDE_INT" ID="140">
        <field TYPE="int32" NAME="est_p" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="est_q" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="est_r" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="est_phi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="est_theta" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="est_psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="sp_phi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="sp_theta" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="sp_psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="sum_err_phi"></field>
        <field TYPE="int32" NAME="sum_err_theta"></field>
        <field TYPE="int32" NAME="sum_err_psi"></field>
        <field TYPE="int32" NAME="delta_a_fb" ALT_UNIT_COEF="0.0000153"></field>
        <field TYPE="int32" NAME="delta_e_fb" ALT_UNIT_COEF="0.0000153"></field>
        <field TYPE="int32" NAME="delta_r_fb" ALT_UNIT_COEF="0.0000153"></field>
        <field TYPE="int32" NAME="delta_a_ff" ALT_UNIT_COEF="0.0000153"></field>
        <field TYPE="int32" NAME="delta_e_ff" ALT_UNIT_COEF="0.0000153"></field>
        <field TYPE="int32" NAME="delta_r_ff" ALT_UNIT_COEF="0.0000153"></field>
        <field TYPE="int32" NAME="delta_a"></field>
        <field TYPE="int32" NAME="delta_e"></field>
        <field TYPE="int32" NAME="delta_r"></field>
      </message>
      <message NAME="STAB_ATTITUDE_REF_INT" ID="141">
        <field TYPE="int32" NAME="sp_phi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="sp_theta" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="sp_psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="ref_phi" ALT_UNIT_COEF="0.0000546" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="ref_theta" ALT_UNIT_COEF="0.0000546" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="ref_psi" ALT_UNIT_COEF="0.0000546" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="ref_p" ALT_UNIT_COEF="0.0008743" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="ref_q" ALT_UNIT_COEF="0.0008743" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="ref_r" ALT_UNIT_COEF="0.0008743" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="ref_pd" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s2"></field>
        <field TYPE="int32" NAME="ref_qd" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s2"></field>
        <field TYPE="int32" NAME="ref_rd" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s2"></field>
      </message>
      <message NAME="STAB_ATTITUDE_REF_FLOAT" ID="142">
        <field TYPE="float" NAME="sp_phi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="sp_theta" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="sp_psi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="ref_phi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="ref_theta" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="ref_psi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="ref_p" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="ref_q" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="ref_r" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="ref_pd" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s2"></field>
        <field TYPE="float" NAME="ref_qd" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s2"></field>
        <field TYPE="float" NAME="ref_rd" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s2"></field>
      </message>
      <message NAME="ROTORCRAFT_CMD" ID="143">
        <field TYPE="int32" NAME="cmd_roll"></field>
        <field TYPE="int32" NAME="cmd_pitch"></field>
        <field TYPE="int32" NAME="cmd_yaw"></field>
        <field TYPE="int32" NAME="cmd_thrust"></field>
      </message>
      <message NAME="GUIDANCE_H_INT" ID="144">
        <field TYPE="int32" NAME="sp_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="sp_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ref_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ref_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="est_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="est_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
      </message>
      <message NAME="VERT_LOOP" ID="145">
        <field TYPE="int32" NAME="z_sp" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="zd_sp" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="est_z" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="est_zd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="est_zdd" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
        <field TYPE="int32" NAME="ref_z" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ref_zd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="ref_zdd" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
        <field TYPE="int32" NAME="adp_inv_m" ALT_UNIT_COEF="0.0000000596" ALT_UNIT="foo"></field>
        <field TYPE="int32" NAME="adp_cov" ALT_UNIT_COEF="0.0000000596" ALT_UNIT="foo"></field>
        <field TYPE="int32" NAME="adp_meas" ALT_UNIT_COEF="0.0000000596" ALT_UNIT="foo"></field>
        <field TYPE="int32" NAME="sum_err"></field>
        <field TYPE="int32" NAME="ff_cmd"></field>
        <field TYPE="int32" NAME="fb_cmd"></field>
        <field TYPE="int32" NAME="delta_t"></field>
      </message>
      <message NAME="HOVER_LOOP" ID="146">
        <field TYPE="int32" NAME="sp_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="sp_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="est_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="est_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="est_xd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="est_yd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="est_xdd" ALT_UNIT_COEF="0.0009765" ALT_UNIT="m/s2"></field>
        <field TYPE="int32" NAME="est_ydd" ALT_UNIT_COEF="0.0009765" ALT_UNIT="m/s2"></field>
        <field TYPE="int32" NAME="err_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="err_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="err_xd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="err_yd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="err_sum_x"></field>
        <field TYPE="int32" NAME="err_sum_y"></field>
        <field TYPE="int32" NAME="cmd_x"></field>
        <field TYPE="int32" NAME="cmd_y"></field>
        <field TYPE="int32" NAME="cmd_heading"></field>
      </message>
      <message NAME="ROTORCRAFT_FP" ID="147">
        <field TYPE="int32" NAME="east" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="north" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="up" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="veast" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="vnorth" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="vup" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="phi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="theta" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="carrot_east" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="carrot_north" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="carrot_up" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="carrot_psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="thrust"></field>
        <field UNIT="s" TYPE="uint16" NAME="flight_time"></field>
      </message>
      <message NAME="TEMP_ADC" ID="148">
        <field UNIT="deg_celsius" TYPE="float" NAME="temp1" FORMAT="%.2f"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp2" FORMAT="%.2f"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp3" FORMAT="%.2f"></field>
      </message>
      <message NAME="GUIDANCE_H_REF_INT" ID="149">
        <field TYPE="int32" NAME="sp_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ref_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="sp_xd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="ref_xd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="ref_xdd" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
        <field TYPE="int32" NAME="sp_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ref_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="sp_yd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="ref_yd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="ref_ydd" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
      </message>
      <message NAME="ROTORCRAFT_TUNE_HOVER" ID="150">
        <field TYPE="int16" NAME="rc_roll"></field>
        <field TYPE="int16" NAME="rc_pitch"></field>
        <field TYPE="int16" NAME="rc_yaw"></field>
        <field TYPE="int32" NAME="cmd_roll"></field>
        <field TYPE="int32" NAME="cmd_pitch"></field>
        <field TYPE="int32" NAME="cmd_yaw"></field>
        <field TYPE="int32" NAME="cmd_thrust"></field>
        <field TYPE="int32" NAME="body_phi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="body_theta" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="body_psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
      </message>
      <message NAME="INS_Z" ID="151">
        <field UNIT="m" TYPE="float" NAME="baro_z"></field>
        <field TYPE="int32" NAME="ins_z" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ins_zd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="ins_zdd" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
      </message>
      <message NAME="PCAP01_STATUS" ID="152">
        <field TYPE="uint32" NAME="ihumid"></field>
        <field TYPE="uint32" NAME="itemp"></field>
        <field UNIT="rel_hum" TYPE="float" NAME="humid" FORMAT="%.2f"></field>
        <field UNIT="deg_celsius" TYPE="float" NAME="temp" FORMAT="%.2f"></field>
      </message>
      <message NAME="GEIGER_COUNTER" ID="153">
        <field UNIT="events" TYPE="uint32" NAME="tube1"></field>
        <field UNIT="events" TYPE="uint32" NAME="tube2"></field>
        <field UNIT="volts" TYPE="uint16" NAME="vsupply"></field>
      </message>
      <message NAME="INS_REF" ID="154">
        <field TYPE="int32" NAME="ecef_x0" ALT_UNIT_COEF="0.01" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ecef_y0" ALT_UNIT_COEF="0.01" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ecef_z0" ALT_UNIT_COEF="0.01" ALT_UNIT="m"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lat0" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon0" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="alt0" ALT_UNIT_COEF="0.001" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="hmsl0" ALT_UNIT_COEF="0.001" ALT_UNIT="m"></field>
        <field UNIT="pascal" TYPE="float" NAME="baro_qfe"></field>
      </message>
      <message NAME="GPS_INT" ID="155">
        <field UNIT="cm" TYPE="int32" NAME="ecef_x" ALT_UNIT="m"></field>
        <field UNIT="cm" TYPE="int32" NAME="ecef_y" ALT_UNIT="m"></field>
        <field UNIT="cm" TYPE="int32" NAME="ecef_z" ALT_UNIT="m"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m">altitude above WGS84 reference ellipsoid</field>
        <field UNIT="mm" TYPE="int32" NAME="hmsl" ALT_UNIT="m">height above mean sea level (geoid)</field>
        <field UNIT="cm/s" TYPE="int32" NAME="ecef_xd" ALT_UNIT="m/s"></field>
        <field UNIT="cm/s" TYPE="int32" NAME="ecef_yd" ALT_UNIT="m/s"></field>
        <field UNIT="cm/s" TYPE="int32" NAME="ecef_zd" ALT_UNIT="m/s"></field>
        <field UNIT="cm" TYPE="uint32" NAME="pacc" ALT_UNIT="m"></field>
        <field UNIT="cm/s" TYPE="uint32" NAME="sacc" ALT_UNIT="m/s"></field>
        <field TYPE="uint32" NAME="tow"></field>
        <field TYPE="uint16" NAME="pdop"></field>
        <field TYPE="uint8" NAME="numsv"></field>
        <field VALUES="NONE|NA|2D|3D|DGPS|RTK" TYPE="uint8" NAME="fix"></field>
      </message>
      <message NAME="AHRS_EULER_INT" ID="156">
        <field TYPE="int32" NAME="imu_phi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="imu_theta" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="imu_psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="body_phi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="body_theta" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field TYPE="int32" NAME="body_psi" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
      </message>
      <message NAME="AHRS_QUAT_INT" ID="157">
        <field TYPE="float" NAME="weight"></field>
        <field TYPE="int32" NAME="imu_qi" ALT_UNIT_COEF="0.0000305" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="imu_qx" ALT_UNIT_COEF="0.0000305" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="imu_qy" ALT_UNIT_COEF="0.0000305" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="imu_qz" ALT_UNIT_COEF="0.0000305" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="body_qi" ALT_UNIT_COEF="0.0000305" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="body_qx" ALT_UNIT_COEF="0.0000305" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="body_qy" ALT_UNIT_COEF="0.0000305" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="body_qz" ALT_UNIT_COEF="0.0000305" ALT_UNIT=""></field>
      </message>
      <message NAME="AHRS_RMAT_INT" ID="158">
        <field TYPE="int32" NAME="imu_m00" ALT_UNIT_COEF="0.0000610" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="imu_m01" ALT_UNIT_COEF="0.0000610" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="imu_m02" ALT_UNIT_COEF="0.0000610" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="imu_m10" ALT_UNIT_COEF="0.0000610" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="imu_m11" ALT_UNIT_COEF="0.0000610" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="imu_m12" ALT_UNIT_COEF="0.0000610" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="imu_m20" ALT_UNIT_COEF="0.0000610" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="imu_m21" ALT_UNIT_COEF="0.0000610" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="imu_m22" ALT_UNIT_COEF="0.0000610" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="body_m00" ALT_UNIT_COEF="0.0000610" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="body_m01" ALT_UNIT_COEF="0.0000610" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="body_m02" ALT_UNIT_COEF="0.0000610" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="body_m10" ALT_UNIT_COEF="0.0000610" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="body_m11" ALT_UNIT_COEF="0.0000610" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="body_m12" ALT_UNIT_COEF="0.0000610" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="body_m20" ALT_UNIT_COEF="0.0000610" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="body_m21" ALT_UNIT_COEF="0.0000610" ALT_UNIT=""></field>
        <field TYPE="int32" NAME="body_m22" ALT_UNIT_COEF="0.0000610" ALT_UNIT=""></field>
      </message>
      <message NAME="ROTORCRAFT_NAV_STATUS" ID="159">
        <field UNIT="s" TYPE="uint16" NAME="block_time"></field>
        <field UNIT="s" TYPE="uint16" NAME="stage_time"></field>
        <field UNIT="m" TYPE="float" NAME="dist_home" FORMAT="%.1f"></field>
        <field UNIT="m" TYPE="float" NAME="dist_wp" FORMAT="%.1f"></field>
        <field TYPE="uint8" NAME="cur_block"></field>
        <field TYPE="uint8" NAME="cur_stage"></field>
        <field TYPE="uint8" NAME="horizontal_mode"></field>
      </message>
      <message NAME="ROTORCRAFT_RADIO_CONTROL" ID="160">
        <field UNIT="pprz" TYPE="int16" NAME="roll"></field>
        <field UNIT="pprz" TYPE="int16" NAME="pitch"></field>
        <field UNIT="pprz" TYPE="int16" NAME="yaw"></field>
        <field UNIT="pprz" TYPE="int16" NAME="throttle"></field>
        <field UNIT="pprz" TYPE="int16" NAME="mode"></field>
        <field UNIT="pprz" TYPE="int16" NAME="kill"></field>
        <field VALUES="OK|LOST|REALLY_LOST" TYPE="uint8" NAME="status"></field>
      </message>
      <message NAME="VFF_EXTENDED" ID="161">
        <field TYPE="float" NAME="meas_baro"></field>
        <field TYPE="float" NAME="meas_alt"></field>
        <field TYPE="float" NAME="z"></field>
        <field TYPE="float" NAME="zd"></field>
        <field TYPE="float" NAME="zdd"></field>
        <field TYPE="float" NAME="bias"></field>
        <field TYPE="float" NAME="offset"></field>
      </message>
      <message NAME="VFF" ID="162">
        <field TYPE="float" NAME="measure"></field>
        <field TYPE="float" NAME="z"></field>
        <field TYPE="float" NAME="zd"></field>
        <field TYPE="float" NAME="bias"></field>
        <field TYPE="float" NAME="Pzz"></field>
        <field TYPE="float" NAME="Pzdzd"></field>
        <field TYPE="float" NAME="Pbb"></field>
      </message>
      <message NAME="GEO_MAG" ID="163">
        <field TYPE="float" NAME="Hx"></field>
        <field TYPE="float" NAME="Hy"></field>
        <field TYPE="float" NAME="Hz"></field>
      </message>
      <message NAME="HFF" ID="164">
        <field TYPE="float" NAME="x"></field>
        <field TYPE="float" NAME="y"></field>
        <field TYPE="float" NAME="xd"></field>
        <field TYPE="float" NAME="yd"></field>
        <field TYPE="float" NAME="xdd"></field>
        <field TYPE="float" NAME="ydd"></field>
      </message>
      <message NAME="HFF_DBG" ID="165">
        <field TYPE="float" NAME="x_measure"></field>
        <field TYPE="float" NAME="y_measure"></field>
        <field TYPE="float" NAME="xd_measure"></field>
        <field TYPE="float" NAME="yd_measure"></field>
        <field TYPE="float" NAME="Pxx"></field>
        <field TYPE="float" NAME="Pyy"></field>
        <field TYPE="float" NAME="Pxdxd"></field>
        <field TYPE="float" NAME="Pydyd"></field>
      </message>
      <message NAME="HFF_GPS" ID="166">
        <field TYPE="uint16" NAME="lag_cnt"></field>
        <field TYPE="int16" NAME="lag_cnt_err"></field>
        <field TYPE="int16" NAME="save_cnt"></field>
      </message>
      <message NAME="INS_SONAR" ID="167">
        <field UNIT="m" TYPE="float" NAME="distance"></field>
        <field TYPE="float" NAME="var"></field>
      </message>
      <message NAME="ROTORCRAFT_CAM" ID="168">
        <field UNIT="2^12rad" TYPE="int16" NAME="tilt" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
        <field UNIT="2^12rad" TYPE="int16" NAME="pan" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg"></field>
      </message>
      <message NAME="AHRS_REF_QUAT" ID="169">
        <field TYPE="int32" NAME="ref_qi"></field>
        <field TYPE="int32" NAME="ref_qx"></field>
        <field TYPE="int32" NAME="ref_qy"></field>
        <field TYPE="int32" NAME="ref_qz"></field>
        <field TYPE="int32" NAME="body_qi"></field>
        <field TYPE="int32" NAME="body_qx"></field>
        <field TYPE="int32" NAME="body_qy"></field>
        <field TYPE="int32" NAME="body_qz"></field>
      </message>
      <message NAME="EKF7_XHAT" ID="170">
        <field TYPE="float" NAME="c"></field>
        <field TYPE="float" NAME="s1"></field>
        <field TYPE="float" NAME="s2"></field>
        <field TYPE="float" NAME="s3"></field>
        <field TYPE="float" NAME="p" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="q" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="r" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="bp"></field>
        <field TYPE="float" NAME="bq"></field>
        <field TYPE="float" NAME="br"></field>
      </message>
      <message NAME="EKF7_Y" ID="171">
        <field TYPE="uint16" NAME="timecount"></field>
        <field TYPE="float" NAME="g1"></field>
        <field TYPE="float" NAME="g2"></field>
        <field TYPE="float" NAME="g3"></field>
        <field TYPE="float" NAME="m1"></field>
        <field TYPE="float" NAME="m2"></field>
        <field TYPE="float" NAME="m3"></field>
        <field TYPE="float" NAME="p" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="q" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="r" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
      </message>
      <message NAME="EKF7_P_DIAG" ID="172">
        <field TYPE="float" NAME="c"></field>
        <field TYPE="float" NAME="s1"></field>
        <field TYPE="float" NAME="s2"></field>
        <field TYPE="float" NAME="s3"></field>
        <field TYPE="float" NAME="p" ALT_UNIT_COEF="3283" ALT_UNIT="deg^2/s^2"></field>
        <field TYPE="float" NAME="q" ALT_UNIT_COEF="3283" ALT_UNIT="deg^2/s^2"></field>
        <field TYPE="float" NAME="r" ALT_UNIT_COEF="3283" ALT_UNIT="deg^2/s^2"></field>
        <field TYPE="float" NAME="bp" ALT_UNIT_COEF="3283" ALT_UNIT="deg^2/s^2"></field>
        <field TYPE="float" NAME="bq" ALT_UNIT_COEF="3283" ALT_UNIT="deg^2/s^2"></field>
        <field TYPE="float" NAME="br" ALT_UNIT_COEF="3283" ALT_UNIT="deg^2/s^2"></field>
      </message>
      <message NAME="AHRS_EULER" ID="173">
        <field UNIT="rad" TYPE="float" NAME="phi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="theta" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="psi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
      </message>
      <message NAME="AHRS_MEASUREMENT_EULER" ID="174">
        <field UNIT="rad" TYPE="float" NAME="phi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="theta" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="psi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
      </message>
      <message NAME="WT" ID="175">
        <field TYPE="float" NAME="rpm"></field>
      </message>
      <message NAME="CSC_CAN_DEBUG" ID="176">
        <field TYPE="uint32" NAME="err_nb"></field>
        <field TYPE="uint32" NAME="err_code"></field>
      </message>
      <message NAME="CSC_CAN_MSG" ID="177">
        <field TYPE="uint32" NAME="frame"></field>
        <field TYPE="uint32" NAME="id"></field>
        <field TYPE="uint32" NAME="data_a"></field>
        <field TYPE="uint32" NAME="data_b"></field>
      </message>
      <message NAME="AHRS_GYRO_BIAS_INT" ID="178">
        <field TYPE="int32" NAME="bp" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="bq" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
        <field TYPE="int32" NAME="br" ALT_UNIT_COEF="0.0139882" ALT_UNIT="deg/s"></field>
      </message>
      <message NAME="FLOW_AP_OTF" ID="179">
        <field TYPE="uint32" NAME="counter"></field>
        <field UNIT="cm/s" TYPE="int16" NAME="velocity" ALT_UNIT="m/s"></field>
        <field UNIT="centideg" TYPE="int16" NAME="a_attack" ALT_UNIT="deg"></field>
        <field UNIT="centideg" TYPE="int16" NAME="a_sidesl" ALT_UNIT="deg"></field>
        <field UNIT="cm" TYPE="int32" NAME="altitude" ALT_UNIT="m"></field>
        <field TYPE="uint8" NAME="checksum"></field>
      </message>
      <message NAME="FMS_TIME" ID="180">
        <field TYPE="uint32" NAME="tv_sec"></field>
        <field TYPE="uint32" NAME="tv_nsec"></field>
        <field TYPE="uint32" NAME="delay_ns"></field>
      </message>
      <message NAME="LOADCELL" ID="181">
        <field TYPE="int32" NAME="load"></field>
      </message>
      <message NAME="FLA_DEBUG" ID="182">
        <field TYPE="float" NAME="past_input"></field>
        <field TYPE="float" NAME="imu_rate"></field>
        <field TYPE="float" NAME="desired_accel"></field>
        <field TYPE="float" NAME="motor_command"></field>
      </message>
      <message NAME="BLMC_FAULT_STATUS" ID="183">
        <field TYPE="uint16[]" NAME="raw_fault"></field>
      </message>
      <message NAME="BLMC_SPEEDS" ID="184">
        <field TYPE="int16[]" NAME="speeds"></field>
      </message>
      <message NAME="AHRS_DEBUG_QUAT" ID="185">
        <field TYPE="float" NAME="jqi"></field>
        <field TYPE="float" NAME="jqx"></field>
        <field TYPE="float" NAME="jqy"></field>
        <field TYPE="float" NAME="jqz"></field>
        <field TYPE="float" NAME="xqi"></field>
        <field TYPE="float" NAME="xqx"></field>
        <field TYPE="float" NAME="xqy"></field>
        <field TYPE="float" NAME="xqz"></field>
        <field TYPE="float" NAME="mqi"></field>
        <field TYPE="float" NAME="mqx"></field>
        <field TYPE="float" NAME="mqy"></field>
        <field TYPE="float" NAME="mqz"></field>
      </message>
      <message NAME="BLMC_BUSVOLTS" ID="186">
        <field TYPE="uint16[]" NAME="busvolts"></field>
      </message>
      <message NAME="SYSTEM_STATUS" ID="187">
        <field TYPE="uint32" NAME="csc1_loop_count"></field>
        <field TYPE="uint32" NAME="csc1_msg_count"></field>
        <field TYPE="uint32" NAME="csc2_loop_count"></field>
        <field TYPE="uint32" NAME="csc2_msg_count"></field>
        <field TYPE="uint32" NAME="can_rx_err"></field>
        <field TYPE="uint32" NAME="can_tx_err"></field>
        <field TYPE="uint32" NAME="rc_parser_err"></field>
        <field TYPE="uint8" NAME="system_fault"></field>
      </message>
      <message NAME="DYNAMIXEL" ID="188">
        <field TYPE="uint16" NAME="left_wing"></field>
        <field TYPE="uint16" NAME="right_wing"></field>
        <field TYPE="uint8" NAME="left_wing_flag"></field>
        <field TYPE="uint8" NAME="right_wing_flag"></field>
        <field TYPE="uint32" NAME="invalid_position"></field>
        <field TYPE="uint32" NAME="timeout_events"></field>
        <field TYPE="uint32" NAME="checksum_errors"></field>
        <field TYPE="float" NAME="fuse_rotation_angle"></field>
        <field TYPE="float" NAME="fuse_rotation_rate"></field>
      </message>
      <message NAME="RMAT_DEBUG" ID="189">
        <field TYPE="float" NAME="a"></field>
        <field TYPE="float" NAME="b"></field>
        <field TYPE="float" NAME="c"></field>
        <field TYPE="float" NAME="d"></field>
        <field TYPE="float" NAME="e"></field>
        <field TYPE="float" NAME="f"></field>
        <field TYPE="float" NAME="g"></field>
        <field TYPE="float" NAME="h"></field>
        <field TYPE="float" NAME="i"></field>
      </message>
      <message NAME="SIMPLE_COMMANDS" ID="190">
        <field TYPE="int16" NAME="roll"></field>
        <field TYPE="int16" NAME="pitch"></field>
        <field TYPE="int16" NAME="yaw"></field>
      </message>
      <message NAME="VANE_SENSOR" ID="191">
        <field UNIT="rad" TYPE="float" NAME="alpha" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="alpha_filtered" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="alpha_target" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="alpha_vane_error" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="alpha2" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="beta" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="beta_filtered" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="beta_target" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="beta_vane_error" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="beta2" ALT_UNIT_COEF="57.3" ALT_UNIT="deg"></field>
      </message>
      <message NAME="CONTROLLER_GAINS" ID="192">
        <field TYPE="float" NAME="roll_gamma_p"></field>
        <field TYPE="float" NAME="roll_gamma_d"></field>
        <field TYPE="float" NAME="roll_gamma_i"></field>
        <field TYPE="float" NAME="pitch_gamma_p"></field>
        <field TYPE="float" NAME="pitch_gamma_d"></field>
        <field TYPE="float" NAME="pitch_gamma_i"></field>
        <field TYPE="float" NAME="yaw_gamma_p"></field>
        <field TYPE="float" NAME="yaw_gamma_d"></field>
        <field TYPE="float" NAME="yaw_gamma_i"></field>
      </message>
      <message NAME="AHRS_LKF" ID="193">
        <field UNIT="rad" TYPE="float" NAME="phi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="theta" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="psi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="qi"></field>
        <field TYPE="float" NAME="qx"></field>
        <field TYPE="float" NAME="qy"></field>
        <field TYPE="float" NAME="qz"></field>
        <field UNIT="rad/s" TYPE="float" NAME="p" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field UNIT="rad/s" TYPE="float" NAME="q" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field UNIT="rad/s" TYPE="float" NAME="r" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="ax"></field>
        <field TYPE="float" NAME="ay"></field>
        <field TYPE="float" NAME="az"></field>
        <field TYPE="float" NAME="mx"></field>
        <field TYPE="float" NAME="my"></field>
        <field TYPE="float" NAME="mz"></field>
      </message>
      <message NAME="AHRS_LKF_DEBUG" ID="194">
        <field UNIT="rad" TYPE="float" NAME="phi_err" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="theta_err" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="psi_err" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad/s" TYPE="float" NAME="bp" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field UNIT="rad/s" TYPE="float" NAME="bq" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field UNIT="rad/s" TYPE="float" NAME="br" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="float" NAME="quat_norm"></field>
        <field UNIT="rad" TYPE="float" NAME="phi_accel" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="theta_accel" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="float" NAME="phi_cov"></field>
        <field TYPE="float" NAME="theta_cov"></field>
        <field TYPE="float" NAME="psi_cov"></field>
        <field TYPE="float" NAME="bp_cov"></field>
        <field TYPE="float" NAME="bq_cov"></field>
        <field TYPE="float" NAME="br_cov"></field>
      </message>
      <message NAME="AHRS_LKF_ACC_DBG" ID="195">
        <field TYPE="float" NAME="qi_err"></field>
        <field TYPE="float" NAME="qx_err"></field>
        <field TYPE="float" NAME="qy_err"></field>
        <field TYPE="float" NAME="qz_err"></field>
        <field UNIT="rad/s" TYPE="float" NAME="bp_err" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field UNIT="rad/s" TYPE="float" NAME="bq_err" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field UNIT="rad/s" TYPE="float" NAME="br_err" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
      </message>
      <message NAME="AHRS_LKF_MAG_DBG" ID="196">
        <field TYPE="float" NAME="qi_err"></field>
        <field TYPE="float" NAME="qx_err"></field>
        <field TYPE="float" NAME="qy_err"></field>
        <field TYPE="float" NAME="qz_err"></field>
        <field UNIT="rad/s" TYPE="float" NAME="bp_err" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field UNIT="rad/s" TYPE="float" NAME="bq_err" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field UNIT="rad/s" TYPE="float" NAME="br_err" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
      </message>
      <message NAME="NPS_SENSORS_SCALED" ID="197">
        <field TYPE="float" NAME="acc_x"></field>
        <field TYPE="float" NAME="acc_y"></field>
        <field TYPE="float" NAME="acc_z"></field>
        <field TYPE="float" NAME="mag_x"></field>
        <field TYPE="float" NAME="mag_y"></field>
        <field TYPE="float" NAME="mag_z"></field>
      </message>
      <message NAME="INS" ID="198">
        <field TYPE="int32" NAME="ins_x" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ins_y" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ins_z" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ins_xd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="ins_yd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="ins_zd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
        <field TYPE="int32" NAME="ins_xdd" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
        <field TYPE="int32" NAME="ins_ydd" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
        <field TYPE="int32" NAME="ins_zdd" ALT_UNIT_COEF="0.0009766" ALT_UNIT="m/s2"></field>
      </message>
      <message NAME="GPS_ERROR" ID="199">
        <field UNIT="m" TYPE="float" NAME="x_position"></field>
        <field UNIT="m" TYPE="float" NAME="y_position"></field>
        <field UNIT="m" TYPE="float" NAME="z_position"></field>
        <field UNIT="m" TYPE="float" NAME="x_velocity"></field>
        <field UNIT="m" TYPE="float" NAME="y_velocity"></field>
        <field UNIT="m" TYPE="float" NAME="z_velocity"></field>
      </message>
      <message NAME="IMU_GYRO" ID="200">
        <field UNIT="rad/s" TYPE="float" NAME="gp" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field UNIT="rad/s" TYPE="float" NAME="gq" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field UNIT="rad/s" TYPE="float" NAME="gr" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
      </message>
      <message NAME="IMU_MAG" ID="201">
        <field TYPE="float" NAME="mx"></field>
        <field TYPE="float" NAME="my"></field>
        <field TYPE="float" NAME="mz"></field>
      </message>
      <message NAME="IMU_ACCEL" ID="202">
        <field UNIT="m/s-2" TYPE="float" NAME="ax"></field>
        <field UNIT="m/s-2" TYPE="float" NAME="ay"></field>
        <field UNIT="m/s-2" TYPE="float" NAME="az"></field>
      </message>
      <message NAME="IMU_GYRO_RAW" ID="203">
        <field UNIT="adc" TYPE="int32" NAME="gp"></field>
        <field UNIT="adc" TYPE="int32" NAME="gq"></field>
        <field UNIT="adc" TYPE="int32" NAME="gr"></field>
      </message>
      <message NAME="IMU_ACCEL_RAW" ID="204">
        <field UNIT="adc" TYPE="int32" NAME="ax"></field>
        <field UNIT="adc" TYPE="int32" NAME="ay"></field>
        <field UNIT="adc" TYPE="int32" NAME="az"></field>
      </message>
      <message NAME="IMU_MAG_RAW" ID="205">
        <field UNIT="adc" TYPE="int32" NAME="mx"></field>
        <field UNIT="adc" TYPE="int32" NAME="my"></field>
        <field UNIT="adc" TYPE="int32" NAME="mz"></field>
      </message>
      <message NAME="IMU_MAG_SETTINGS" ID="206">
        <field TYPE="float" NAME="inclination"></field>
        <field TYPE="float" NAME="declination"></field>
        <field TYPE="float" NAME="hardiron_x"></field>
        <field TYPE="float" NAME="hardiron_y"></field>
        <field TYPE="float" NAME="hardiron_z"></field>
      </message>
      <message NAME="IMU_MAG_CURRENT_CALIBRATION" ID="207">
        <field UNIT="adc" TYPE="int32" NAME="mx"></field>
        <field UNIT="adc" TYPE="int32" NAME="my"></field>
        <field UNIT="adc" TYPE="int32" NAME="mz"></field>
        <field UNIT="mA" TYPE="int32" NAME="electrical_current"></field>
      </message>
      <message NAME="UART_ERRORS" ID="208">
        <field TYPE="uint16" NAME="overrun_cnt"></field>
        <field TYPE="uint16" NAME="noise_err_cnt"></field>
        <field TYPE="uint16" NAME="framing_err_cnt"></field>
        <field TYPE="uint8" NAME="bus_number"></field>
      </message>
      <message NAME="IMU_GYRO_LP" ID="209">
        <field UNIT="rad/s" TYPE="float" NAME="gp"></field>
        <field UNIT="rad/s" TYPE="float" NAME="gq"></field>
        <field UNIT="rad/s" TYPE="float" NAME="gr"></field>
      </message>
      <message NAME="IMU_PRESSURE" ID="210">
        <field UNIT="pascal" TYPE="float" NAME="p"></field>
      </message>
      <message NAME="IMU_HS_GYRO" ID="211">
        <field TYPE="uint8" NAME="axis"></field>
        <field TYPE="uint32[]" NAME="samples"></field>
      </message>
      <message NAME="TEST_PASSTHROUGH_STATUS" ID="212">
        <field TYPE="uint32" NAME="io_proc_msg_cnt"></field>
        <field TYPE="uint32" NAME="io_proc_err_cnt"></field>
        <field TYPE="uint32" NAME="io_link_msg_cnt"></field>
        <field TYPE="uint32" NAME="io_link_err_cnt"></field>
        <field VALUES="OK|LOST|REALLY_LOST" TYPE="uint8" NAME="rc_status"></field>
      </message>
      <message NAME="TUNE_VERT" ID="213">
        <field TYPE="int32" NAME="z_sp" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="est_z" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ref_z" ALT_UNIT_COEF="0.0039063" ALT_UNIT="m"></field>
        <field TYPE="int32" NAME="ref_zd" ALT_UNIT_COEF="0.0000019" ALT_UNIT="m/s"></field>
      </message>
      <message NAME="MF_DAQ_STATE" ID="214">
        <field UNIT="s" TYPE="uint16" NAME="flight_time"></field>
        <field TYPE="float" NAME="p"></field>
        <field TYPE="float" NAME="q"></field>
        <field TYPE="float" NAME="r"></field>
        <field TYPE="float" NAME="phi"></field>
        <field TYPE="float" NAME="theta"></field>
        <field TYPE="float" NAME="psi"></field>
        <field TYPE="float" NAME="ax"></field>
        <field TYPE="float" NAME="ay"></field>
        <field TYPE="float" NAME="az"></field>
        <field TYPE="float" NAME="ve"></field>
        <field TYPE="float" NAME="vn"></field>
        <field TYPE="float" NAME="vu"></field>
        <field TYPE="float" NAME="lat"></field>
        <field TYPE="float" NAME="lon"></field>
        <field TYPE="float" NAME="alt"></field>
        <field TYPE="float" NAME="we"></field>
        <field TYPE="float" NAME="wn"></field>
      </message>
      <message NAME="INFO_MSG" ID="215">
        <field TYPE="char[]" NAME="msg"></field>
      </message>
      <message NAME="STAB_ATTITUDE_INDI" ID="216">
        <field TYPE="float" NAME="angular_accel_p"></field>
        <field TYPE="float" NAME="angular_accel_q"></field>
        <field TYPE="float" NAME="angular_accel_r"></field>
        <field TYPE="float" NAME="angular_accel_ref_p"></field>
        <field TYPE="float" NAME="angular_accel_ref_q"></field>
        <field TYPE="float" NAME="angular_accel_ref_r"></field>
        <field TYPE="float" NAME="g1_p"></field>
        <field TYPE="float" NAME="g1_q"></field>
        <field TYPE="float" NAME="g1_r"></field>
        <field TYPE="float" NAME="g2_r"></field>
      </message>
      <message NAME="GPS_DIAGNOSTICS" ID="217">
        <field TYPE="uint16" NAME="msg_count"></field>
        <field TYPE="uint16" NAME="dl_pkg_count"></field>
        <field UNIT="Hz" TYPE="double" NAME="gps_freq"></field>
        <field UNIT="s" TYPE="double" NAME="gps_period"></field>
        <field UNIT="Hz" TYPE="double" NAME="dl_freq"></field>
        <field UNIT="s" TYPE="double" NAME="dl_period"></field>
        <field UNIT="usec" TYPE="uint32" NAME="last_msgtimediff"></field>
        <field UNIT="usec" TYPE="double" NAME="avrg_msgtimediff"></field>
        <field UNIT="usec" TYPE="uint32" NAME="dl_pkgtimediff"></field>
        <field TYPE="uint8" NAME="count"></field>
      </message>
      <message NAME="BEBOP_ACTUATORS" ID="218">
        <field TYPE="int32" NAME="cmd_thrust"></field>
        <field TYPE="int32" NAME="cmd_roll"></field>
        <field TYPE="int32" NAME="cmd_pitch"></field>
        <field TYPE="int32" NAME="cmd_yaw"></field>
        <field UNIT="rpm" TYPE="uint16" NAME="rpm_ref_lf"></field>
        <field UNIT="rpm" TYPE="uint16" NAME="rpm_ref_rf"></field>
        <field UNIT="rpm" TYPE="uint16" NAME="rpm_ref_rb"></field>
        <field UNIT="rpm" TYPE="uint16" NAME="rpm_ref_lb"></field>
        <field UNIT="rpm" TYPE="uint16" NAME="rpm_obs_lf"></field>
        <field UNIT="rpm" TYPE="uint16" NAME="rpm_obs_rf"></field>
        <field UNIT="rpm" TYPE="uint16" NAME="rpm_obs_rb"></field>
        <field UNIT="rpm" TYPE="uint16" NAME="rpm_obs_lb"></field>
      </message>
      <message NAME="WEATHER" ID="219">
        <field UNIT="Pa" TYPE="float" NAME="p_amb" ALT_UNIT_COEF="0.01" ALT_UNIT="mBar"></field>
        <field UNIT="deg C" TYPE="float" NAME="t_amb"></field>
        <field UNIT="m/s" TYPE="float" NAME="windspeed"></field>
        <field UNIT="deg" TYPE="float" NAME="wind_from"></field>
        <field UNIT="%" TYPE="float" NAME="humidity"></field>
      </message>
      <message NAME="IMU_TURNTABLE" ID="220">
        <field UNIT="rad/s" TYPE="float" NAME="omega" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
      </message>
      <message NAME="BARO_RAW" ID="221">
        <field TYPE="float" NAME="abs"></field>
        <field TYPE="float" NAME="diff"></field>
      </message>
      <message NAME="AIR_DATA" ID="222">
        <field UNIT="Pa" TYPE="float" NAME="pressure">static pressure</field>
        <field UNIT="Pa" TYPE="float" NAME="diff_p">differential pressure</field>
        <field UNIT="deg celcius" TYPE="float" NAME="temp">air temperature</field>
        <field UNIT="hPa" TYPE="float" NAME="qnh">barometric pressure adjusted to sea level</field>
        <field UNIT="m" TYPE="float" NAME="amsl_baro">barometric altitude above mean sea level</field>
        <field UNIT="m/s" TYPE="float" NAME="airspeed">Equivalent Air Speed (or Calibrated Air Speed at low speed/altitude)</field>
        <field TYPE="float" NAME="tas">True Air Speed (when P, T and P_diff are available)</field>
      </message>
      <message NAME="AMSL" ID="223">
        <field UNIT="ft" TYPE="float" NAME="AMSL_BARO" ALT_UNIT="m"></field>
        <field UNIT="ft" TYPE="float" NAME="AMSL_GPS" ALT_UNIT="m"></field>
      </message>
      <message NAME="VIDEO_SYNC" ID="225">
        <field TYPE="uint8" NAME="id"></field>
      </message>
      <message NAME="PERIODIC_TELEMETRY_ERR" ID="226">
        <field TYPE="uint8" NAME="process"></field>
        <field TYPE="uint8" NAME="mode"></field>
        <field TYPE="uint8" NAME="id"></field>
      </message>
      <message NAME="TIME" ID="227">
        <field TYPE="uint32" NAME="t"></field>
      </message>
      <message NAME="OPTIC_FLOW_EST" ID="228">
        <field TYPE="float" NAME="fps"></field>
        <field TYPE="uint16" NAME="corner_cnt"></field>
        <field TYPE="uint16" NAME="tracked_cnt"></field>
        <field UNIT="subpixels" TYPE="int16" NAME="flow_x"></field>
        <field UNIT="subpixels" TYPE="int16" NAME="flow_y"></field>
        <field UNIT="subpixels" TYPE="int16" NAME="flow_der_x"></field>
        <field UNIT="subpixels" TYPE="int16" NAME="flow_der_y"></field>
        <field UNIT="cm/s" TYPE="float" NAME="vel_x"></field>
        <field UNIT="cm/s" TYPE="float" NAME="vel_y"></field>
        <field UNIT="1/s" TYPE="float" NAME="div_size"></field>
        <field UNIT="1/s" TYPE="float" NAME="surface_roughness"></field>
        <field UNIT="1/s" TYPE="float" NAME="divergence"></field>
      </message>
      <message NAME="STEREO_IMG" ID="229">
        <field TYPE="uint8" NAME="frequency"></field>
        <field TYPE="uint8" NAME="data_size"></field>
        <field TYPE="uint8[]" NAME="imageBuffer"></field>
      </message>
      <message NAME="ROTORCRAFT_STATUS" ID="231">
        <field TYPE="uint32" NAME="link_imu_nb_err"></field>
        <field TYPE="uint8" NAME="motor_nb_err"></field>
        <field VALUES="OK|LOST|REALLY_LOST" TYPE="uint8" NAME="rc_status"></field>
        <field UNIT="Hz" TYPE="uint8" NAME="frame_rate"></field>
        <field VALUES="NO_FIX|NA|2D|3D|DGPS|RTK" TYPE="uint8" NAME="gps_status"></field>
        <field VALUES="KILL|FAILSAFE|HOME|RATE_DIRECT|ATTITUDE_DIRECT|RATE_RC_CLIMB|ATTITUDE_RC_CLIMB|ATTITUDE_CLIMB|RATE_Z_HOLD|ATTITUDE_Z_HOLD|HOVER_DIRECT|HOVER_CLIMB|HOVER_Z_HOLD|NAV|RC_DIRECT|CARE_FREE|FORWARD|MODULE|FLIP" TYPE="uint8" NAME="ap_mode"></field>
        <field VALUES="ON_GROUND|IN_FLIGHT" TYPE="uint8" NAME="ap_in_flight"></field>
        <field VALUES="MOTORS_OFF|MOTORS_ON" TYPE="uint8" NAME="ap_motors_on"></field>
        <field VALUES="KILL|RATE|ATTITUDE|HOVER|NAV|CF" TYPE="uint8" NAME="ap_h_mode"></field>
        <field VALUES="KILL|RC_DIRECT|RC_CLIMB|CLIMB|HOVER|NAV" TYPE="uint8" NAME="ap_v_mode"></field>
        <field UNIT="decivolt" TYPE="uint16" NAME="vsupply"></field>
        <field UNIT="s" TYPE="uint16" NAME="cpu_time"></field>
      </message>
      <message NAME="STATE_FILTER_STATUS" ID="232">
        <field TYPE="uint8" NAME="id"></field>
        <field VALUES="UNKNOWN|INIT|ALIGN|OK|GPS_LOST|IMU_LOST|COV_ERR|IR_CONTRAST|ERROR" TYPE="uint8" NAME="state_filter_mode"></field>
        <field TYPE="uint16" NAME="value"></field>
      </message>
      <message NAME="PX4FLOW" ID="233">
        <field TYPE="uint8" NAME="sensor_id"></field>
        <field TYPE="int16" NAME="flow_x"></field>
        <field TYPE="int16" NAME="flow_y"></field>
        <field UNIT="m" TYPE="float" NAME="flow_comp_m_x"></field>
        <field UNIT="m" TYPE="float" NAME="flow_comp_m_y"></field>
        <field TYPE="uint8" NAME="quality"></field>
        <field UNIT="m" TYPE="float" NAME="ground_distance"></field>
      </message>
      <message NAME="OPTICFLOW" ID="234">
        <field TYPE="uint16" NAME="flow"></field>
        <field TYPE="float" NAME="ref_alt"></field>
      </message>
      <message NAME="VISUALTARGET" ID="235">
        <field TYPE="uint16" NAME="x"></field>
        <field TYPE="uint16" NAME="y"></field>
      </message>
      <message NAME="SONAR" ID="236">
        <field TYPE="uint16" NAME="sonar_meas"></field>
        <field UNIT="m" TYPE="float" NAME="sonar_distance"></field>
      </message>
      <message NAME="PAYLOAD_FLOAT" ID="237">
        <field TYPE="float[]" NAME="values"></field>
      </message>
      <message NAME="NPS_POS_LLH" ID="238">
        <field UNIT="rad" TYPE="float" NAME="pprz_lat" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="lat_geod" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="lat_geoc" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="pprz_lon" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="lon" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="m" TYPE="float" NAME="pprz_alt"></field>
        <field UNIT="m" TYPE="float" NAME="alt_geod"></field>
        <field UNIT="m" TYPE="float" NAME="agl"></field>
        <field UNIT="m" TYPE="float" NAME="asl"></field>
      </message>
      <message NAME="NPS_RPMS" ID="239">
        <field UNIT="RPM" TYPE="float" NAME="front"></field>
        <field UNIT="RPM" TYPE="float" NAME="back"></field>
        <field UNIT="RPM" TYPE="float" NAME="right"></field>
        <field UNIT="RPM" TYPE="float" NAME="left"></field>
      </message>
      <message NAME="NPS_SPEED_POS" ID="240">
        <field UNIT="m/s2" TYPE="float" NAME="ltpp_xdd"></field>
        <field UNIT="m/s2" TYPE="float" NAME="ltpp_ydd"></field>
        <field UNIT="m/s2" TYPE="float" NAME="ltpp_zdd"></field>
        <field UNIT="m/s" TYPE="float" NAME="ltpp_xd"></field>
        <field UNIT="m/s" TYPE="float" NAME="ltpp_yd"></field>
        <field UNIT="m/s" TYPE="float" NAME="ltpp_zd"></field>
        <field UNIT="m" TYPE="float" NAME="ltpp_x"></field>
        <field UNIT="m" TYPE="float" NAME="ltpp_y"></field>
        <field UNIT="m" TYPE="float" NAME="ltpp_z"></field>
      </message>
      <message NAME="NPS_RATE_ATTITUDE" ID="241">
        <field UNIT="deg/s" TYPE="float" NAME="p"></field>
        <field UNIT="deg/s" TYPE="float" NAME="q"></field>
        <field UNIT="deg/s" TYPE="float" NAME="r"></field>
        <field UNIT="deg" TYPE="float" NAME="phi"></field>
        <field UNIT="deg" TYPE="float" NAME="theta"></field>
        <field UNIT="deg" TYPE="float" NAME="psi"></field>
      </message>
      <message NAME="NPS_GYRO_BIAS" ID="242">
        <field UNIT="deg/s" TYPE="float" NAME="bp"></field>
        <field UNIT="deg/s" TYPE="float" NAME="bq"></field>
        <field UNIT="deg/s" TYPE="float" NAME="br"></field>
      </message>
      <message NAME="NPS_RANGE_METER" ID="243">
        <field UNIT="adc" TYPE="float" NAME="dist"></field>
      </message>
      <message NAME="NPS_WIND" ID="244">
        <field UNIT="m/s" TYPE="float" NAME="vx"></field>
        <field UNIT="m/s" TYPE="float" NAME="vy"></field>
        <field UNIT="m/s" TYPE="float" NAME="vz"></field>
      </message>
      <message NAME="PPRZ_DEBUG" ID="247">
        <field TYPE="uint8" NAME="module"></field>
        <field TYPE="uint8" NAME="errno"></field>
      </message>
      <message NAME="NPS_ACCEL_LTP" ID="248">
        <field UNIT="m/s2" TYPE="float" NAME="xdd"></field>
        <field UNIT="m/s2" TYPE="float" NAME="ydd"></field>
        <field UNIT="m/s2" TYPE="float" NAME="zdd"></field>
      </message>
      <message NAME="LOOSE_INS_GPS" ID="249">
        <field VALUES="UNINITIALIZED|STARTUP_TRANSIENTS|LOWPASSING|GPS_LOST|NOMINAL" TYPE="uint8" NAME="status"></field>
        <field TYPE="double" NAME="time_running" ALT_UNIT_COEF="0.016666666666667" ALT_UNIT="minutes"></field>
        <field TYPE="double" NAME="q0"></field>
        <field TYPE="double" NAME="q1"></field>
        <field TYPE="double" NAME="q2"></field>
        <field TYPE="double" NAME="q3"></field>
        <field TYPE="double" NAME="phi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="double" NAME="theta" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="double" NAME="psi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="m" TYPE="double" NAME="north"></field>
        <field UNIT="m" TYPE="double" NAME="east"></field>
        <field UNIT="m" TYPE="double" NAME="down"></field>
        <field UNIT="m/s" TYPE="double" NAME="v_north"></field>
        <field UNIT="m/s" TYPE="double" NAME="v_east"></field>
        <field UNIT="m/s" TYPE="double" NAME="v_down"></field>
        <field TYPE="double" NAME="est_p" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="double" NAME="est_q" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="double" NAME="est_r" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="double" NAME="gyroBias_x" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="double" NAME="gyroBias_y" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="double" NAME="gyroBias_z" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg/s"></field>
        <field TYPE="uint32" NAME="imuCallbacks"></field>
        <field TYPE="uint32" NAME="gpsCallbacks"></field>
        <field TYPE="uint32" NAME="baroCallbacks"></field>
      </message>
      <message NAME="AFL_COEFFS" ID="250">
        <field TYPE="float" NAME="roll_a"></field>
        <field TYPE="float" NAME="roll_b"></field>
        <field TYPE="float" NAME="roll_c"></field>
        <field TYPE="float" NAME="pitch_a"></field>
        <field TYPE="float" NAME="pitch_b"></field>
        <field TYPE="float" NAME="pitch_c"></field>
        <field TYPE="float" NAME="yaw_a"></field>
        <field TYPE="float" NAME="yaw_b"></field>
        <field TYPE="float" NAME="yaw_c"></field>
      </message>
      <message NAME="I2C_ERRORS" ID="253">
        <field TYPE="uint16" NAME="wd_reset_cnt"></field>
        <field TYPE="uint16" NAME="queue_full_cnt"></field>
        <field TYPE="uint16" NAME="acknowledge_failure_cnt"></field>
        <field TYPE="uint16" NAME="misplaced_start_or_stop_cnt"></field>
        <field TYPE="uint16" NAME="arbitration_lost_cnt"></field>
        <field TYPE="uint16" NAME="overrun_or_underrun_cnt"></field>
        <field TYPE="uint16" NAME="pec_error_in_reception_cnt"></field>
        <field TYPE="uint16" NAME="timeout_or_tlow_error_cnt"></field>
        <field TYPE="uint16" NAME="smbus_alert_cnt"></field>
        <field TYPE="uint16" NAME="unexpected_event_cnt"></field>
        <field TYPE="uint32" NAME="last_unexpected_event"></field>
        <field TYPE="uint8" NAME="bus_number"></field>
      </message>
      <message NAME="RDYB_TRAJECTORY" ID="254">
        <field UNIT="rad" TYPE="float" NAME="commanded_phi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="commanded_theta" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="float" NAME="commanded_psi" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="m N" TYPE="float" NAME="setpoint_x"></field>
        <field UNIT="m E" TYPE="float" NAME="setpoint_y"></field>
        <field UNIT="m D" TYPE="float" NAME="setpoint_z"></field>
      </message>
      <message NAME="HENRY_GNSS" ID="255">
        <field TYPE="uint32" NAME="last_imu_update"></field>
        <field TYPE="double" NAME="GPS_time"></field>
        <field TYPE="uint8" NAME="GPS_solution_valid"></field>
        <field UNIT="rad" TYPE="double" NAME="latitude" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field UNIT="rad" TYPE="double" NAME="longitude" ALT_UNIT_COEF="57.29578" ALT_UNIT="deg"></field>
        <field TYPE="double" NAME="altitude"></field>
        <field TYPE="double" NAME="North"></field>
        <field TYPE="double" NAME="East"></field>
        <field TYPE="double" NAME="Down"></field>
        <field TYPE="uint8" NAME="SVs_Tracked"></field>
        <field TYPE="uint8" NAME="SVs_PVT"></field>
        <field TYPE="double" NAME="V_North"></field>
        <field TYPE="double" NAME="V_East"></field>
        <field TYPE="double" NAME="V_Down"></field>
      </message>
    </msg_class>
    <msg_class NAME="datalink">
      <message NAME="ACINFO" LINK="broadcasted" ID="1">
        <field UNIT="decideg" TYPE="int16" NAME="course"></field>
        <field UNIT="cm" TYPE="int32" NAME="utm_east"></field>
        <field UNIT="cm" TYPE="int32" NAME="utm_north"></field>
        <field UNIT="cm" TYPE="int32" NAME="alt"></field>
        <field UNIT="ms" TYPE="uint32" NAME="itow"></field>
        <field UNIT="cm/s" TYPE="uint16" NAME="speed"></field>
        <field UNIT="cm/s" TYPE="int16" NAME="climb"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="MOVE_WP" LINK="forwarded" ID="2">
        <field TYPE="uint8" NAME="wp_id"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m">Height above Mean Sea Level (geoid)</field>
      </message>
      <message NAME="WIND_INFO" LINK="forwarded" ID="3">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="pad0"></field>
        <field UNIT="m/s" TYPE="float" NAME="east"></field>
        <field UNIT="m/s" TYPE="float" NAME="north"></field>
        <field UNIT="m/s" TYPE="float" NAME="airspeed"></field>
      </message>
      <message NAME="SETTING" LINK="forwarded" ID="4">
        <field TYPE="uint8" NAME="index"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="float" NAME="value"></field>
      </message>
      <message NAME="BLOCK" LINK="forwarded" ID="5">
        <field TYPE="uint8" NAME="block_id"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="HITL_UBX" LINK="forwarded" ID="6">
        <field TYPE="uint8" NAME="class"></field>
        <field TYPE="uint8" NAME="id"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8[]" NAME="ubx_payload"></field>
      </message>
      <message NAME="HITL_INFRARED" LINK="forwarded" ID="7">
        <field TYPE="int16" NAME="roll"></field>
        <field TYPE="int16" NAME="pitch"></field>
        <field TYPE="int16" NAME="top"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="PING" ID="8"/>
      <message NAME="FORMATION_SLOT" LINK="broadcasted" ID="9">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="mode"></field>
        <field UNIT="m" TYPE="float" NAME="slot_east" FORMAT="%.1f"></field>
        <field UNIT="m" TYPE="float" NAME="slot_north" FORMAT="%.1f"></field>
        <field UNIT="m" TYPE="float" NAME="slot_alt" FORMAT="%.1f"></field>
      </message>
      <message NAME="FORMATION_STATUS" LINK="broadcasted" ID="10">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="leader_id"></field>
        <field TYPE="uint8" NAME="status"></field>
      </message>
      <message NAME="JOYSTICK_RAW" LINK="forwarded" ID="11">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="int8" NAME="roll"></field>
        <field TYPE="int8" NAME="pitch"></field>
        <field TYPE="int8" NAME="throttle"></field>
      </message>
      <message NAME="COMMANDS_RAW" LINK="forwarded" ID="12">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="int8[]" NAME="commands"></field>
      </message>
      <message NAME="DGPS_RAW" LINK="forwarded" ID="13">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="length"></field>
        <field TYPE="uint8[]" NAME="rtcm"></field>
      </message>
      <message NAME="GET_SETTING" LINK="forwarded" ID="16">
        <field TYPE="uint8" NAME="index"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="TCAS_RESOLVE" LINK="forwarded" ID="17">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="ac_id_conflict"></field>
        <field VALUES="NONE|LEVEL|CLIMB|DESCEND" TYPE="uint8" NAME="resolve"></field>
      </message>
      <message NAME="MISSION_GOTO_WP" LINK="forwarded" ID="20">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL" TYPE="uint8" NAME="insert"></field>
        <field UNIT="m" TYPE="float" NAME="wp_east"></field>
        <field UNIT="m" TYPE="float" NAME="wp_north"></field>
        <field UNIT="m" TYPE="float" NAME="wp_alt">altitude above geoid (MSL)</field>
        <field UNIT="s" TYPE="float" NAME="duration"></field>
      </message>
      <message NAME="MISSION_GOTO_WP_LLA" LINK="forwarded" ID="21">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL" TYPE="uint8" NAME="insert"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="wp_lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="wp_lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="wp_alt" ALT_UNIT="m">altitude above geoid (MSL)</field>
        <field UNIT="s" TYPE="float" NAME="duration"></field>
      </message>
      <message NAME="MISSION_CIRCLE" LINK="forwarded" ID="22">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL" TYPE="uint8" NAME="insert"></field>
        <field UNIT="m" TYPE="float" NAME="center_east"></field>
        <field UNIT="m" TYPE="float" NAME="center_north"></field>
        <field UNIT="m" TYPE="float" NAME="center_alt">altitude above geoid (MSL)</field>
        <field UNIT="m" TYPE="float" NAME="radius"></field>
        <field UNIT="s" TYPE="float" NAME="duration"></field>
      </message>
      <message NAME="MISSION_CIRCLE_LLA" LINK="forwarded" ID="23">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL" TYPE="uint8" NAME="insert"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="center_lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="center_lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="center_alt" ALT_UNIT="m">altitude above geoid (MSL)</field>
        <field UNIT="m" TYPE="float" NAME="radius"></field>
        <field UNIT="s" TYPE="float" NAME="duration"></field>
      </message>
      <message NAME="MISSION_SEGMENT" LINK="forwarded" ID="24">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL" TYPE="uint8" NAME="insert"></field>
        <field UNIT="m" TYPE="float" NAME="segment_east_1"></field>
        <field UNIT="m" TYPE="float" NAME="segment_north_1"></field>
        <field UNIT="m" TYPE="float" NAME="segment_east_2"></field>
        <field UNIT="m" TYPE="float" NAME="segment_north_2"></field>
        <field UNIT="m" TYPE="float" NAME="segment_alt">altitude above geoid (MSL)</field>
        <field UNIT="s" TYPE="float" NAME="duration"></field>
      </message>
      <message NAME="MISSION_SEGMENT_LLA" LINK="forwarded" ID="25">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL" TYPE="uint8" NAME="insert"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="segment_lat_1" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="segment_lon_1" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="segment_lat_2" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="segment_lon_2" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="segment_alt" ALT_UNIT="m">altitude above geoid (MSL)</field>
        <field UNIT="s" TYPE="float" NAME="duration"></field>
      </message>
      <message NAME="MISSION_PATH" LINK="forwarded" ID="26">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL" TYPE="uint8" NAME="insert"></field>
        <field UNIT="m" TYPE="float" NAME="point_east_1"></field>
        <field UNIT="m" TYPE="float" NAME="point_north_1"></field>
        <field UNIT="m" TYPE="float" NAME="point_east_2"></field>
        <field UNIT="m" TYPE="float" NAME="point_north_2"></field>
        <field UNIT="m" TYPE="float" NAME="point_east_3"></field>
        <field UNIT="m" TYPE="float" NAME="point_north_3"></field>
        <field UNIT="m" TYPE="float" NAME="point_east_4"></field>
        <field UNIT="m" TYPE="float" NAME="point_north_4"></field>
        <field UNIT="m" TYPE="float" NAME="point_east_5"></field>
        <field UNIT="m" TYPE="float" NAME="point_north_5"></field>
        <field UNIT="m" TYPE="float" NAME="path_alt">altitude above geoid (MSL)</field>
        <field UNIT="s" TYPE="float" NAME="duration"></field>
        <field TYPE="uint8" NAME="nb"></field>
      </message>
      <message NAME="MISSION_PATH_LLA" LINK="forwarded" ID="27">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL" TYPE="uint8" NAME="insert"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lat_1" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lon_1" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lat_2" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lon_2" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lat_3" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lon_3" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lat_4" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lon_4" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lat_5" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="point_lon_5" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="path_alt" ALT_UNIT="m">altitude above geoid (MSL)</field>
        <field UNIT="s" TYPE="float" NAME="duration"></field>
        <field TYPE="uint8" NAME="nb"></field>
      </message>
      <message NAME="MISSION_SURVEY" LINK="forwarded" ID="28">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL" TYPE="uint8" NAME="insert"></field>
        <field UNIT="m" TYPE="float" NAME="survey_east_1"></field>
        <field UNIT="m" TYPE="float" NAME="survey_north_1"></field>
        <field UNIT="m" TYPE="float" NAME="survey_east_2"></field>
        <field UNIT="m" TYPE="float" NAME="survey_north_2"></field>
        <field UNIT="m" TYPE="float" NAME="survey_alt">altitude above geoid (MSL)</field>
        <field UNIT="s" TYPE="float" NAME="duration"></field>
      </message>
      <message NAME="MISSION_SURVEY_LLA" LINK="forwarded" ID="29">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field VALUES="APPEND|PREPEND|REPLACE_CURRENT|REPLACE_ALL" TYPE="uint8" NAME="insert"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="survey_lat_1" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="survey_lon_1" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="survey_lat_2" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="survey_lon_2" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="survey_alt" ALT_UNIT="m">altitude above geoid (MSL)</field>
        <field UNIT="s" TYPE="float" NAME="duration"></field>
      </message>
      <message NAME="GOTO_MISSION" LINK="forwarded" ID="30">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="mission_id"></field>
      </message>
      <message NAME="NEXT_MISSION" LINK="forwarded" ID="31">
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="END_MISSION" LINK="forwarded" ID="32">
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="WINDTURBINE_STATUS" LINK="broadcasted" ID="50">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="tb_id"></field>
        <field UNIT="ms" TYPE="uint32" NAME="sync_itow"></field>
        <field UNIT="ms" TYPE="uint32" NAME="cycle_time"></field>
      </message>
      <message NAME="RC_3CH" LINK="broadcasted" ID="51">
        <field UNIT="byte_mask" TYPE="uint8" NAME="throttle_mode"></field>
        <field TYPE="int8" NAME="roll"></field>
        <field TYPE="int8" NAME="pitch"></field>
      </message>
      <message NAME="RC_4CH" LINK="broadcasted" ID="52">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="mode"></field>
        <field TYPE="uint8" NAME="throttle"></field>
        <field TYPE="int8" NAME="roll"></field>
        <field TYPE="int8" NAME="pitch"></field>
        <field TYPE="int8" NAME="yaw"></field>
      </message>
      <message NAME="REMOTE_GPS_SMALL" LINK="broadcasted" ID="54">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="numsv"></field>
        <field UNIT="cm" TYPE="uint32" NAME="pos_xyz">bits 31-22 x position in cm : bits 21-12 y position in cm : bits 11-2 z position in cm : bits 1 and 0 are free</field>
        <field UNIT="cm/s" TYPE="uint32" NAME="speed_xy">bits 31-22 speed x in cm/s : bits 21-12 speed y in cm/s : bits 11-2 heading in rad*1e2 : bits 1 and 0 are free</field>
      </message>
      <message NAME="REMOTE_GPS" LINK="broadcasted" ID="55">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="numsv"></field>
        <field UNIT="cm" TYPE="int32" NAME="ecef_x" ALT_UNIT="m"></field>
        <field UNIT="cm" TYPE="int32" NAME="ecef_y" ALT_UNIT="m"></field>
        <field UNIT="cm" TYPE="int32" NAME="ecef_z" ALT_UNIT="m"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lat" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="1e7deg" TYPE="int32" NAME="lon" ALT_UNIT_COEF="0.0000001" ALT_UNIT="deg"></field>
        <field UNIT="mm" TYPE="int32" NAME="alt" ALT_UNIT="m"></field>
        <field UNIT="mm" TYPE="int32" NAME="hmsl" ALT_UNIT="m"></field>
        <field UNIT="cm/s" TYPE="int32" NAME="ecef_xd" ALT_UNIT="m/s"></field>
        <field UNIT="cm/s" TYPE="int32" NAME="ecef_yd" ALT_UNIT="m/s"></field>
        <field UNIT="cm/s" TYPE="int32" NAME="ecef_zd" ALT_UNIT="m/s"></field>
        <field TYPE="uint32" NAME="tow"></field>
        <field TYPE="int32" NAME="course" ALT_UNIT_COEF="0.0000057296" ALT_UNIT="deg"></field>
      </message>
      <message NAME="KITE_COMMAND" ID="96">
        <field TYPE="uint16" NAME="POWER"></field>
        <field TYPE="uint16" NAME="TURN"></field>
      </message>
      <message NAME="PAYLOAD_COMMAND" LINK="forwarded" ID="97">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8[]" NAME="command"></field>
      </message>
      <message NAME="SET_ACTUATOR" LINK="forwarded" ID="100">
        <field TYPE="uint16" NAME="value"></field>
        <field TYPE="uint8" NAME="no"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="CSC_SERVO_CMD" ID="101">
        <field TYPE="uint16" NAME="servo_1"></field>
        <field TYPE="uint16" NAME="servo_2"></field>
        <field TYPE="uint16" NAME="servo_3"></field>
        <field TYPE="uint16" NAME="servo_4"></field>
      </message>
      <message NAME="BOOZ2_FMS_COMMAND" LINK="forwarded" ID="149">
        <field VALUES="KILL|RATE|ATTITUDE|HOVER|NAV" TYPE="uint8" NAME="h_mode"></field>
        <field VALUES="KILL|DIRECT|CLIMB_RC|CLIMB|ALT|NAV" TYPE="uint8" NAME="v_mode"></field>
        <field TYPE="int32" NAME="v_sp"></field>
        <field TYPE="int32" NAME="h_sp_1"></field>
        <field TYPE="int32" NAME="h_sp_2"></field>
        <field TYPE="int32" NAME="h_sp_3"></field>
        <field TYPE="uint8" NAME="ac_id"></field>
      </message>
      <message NAME="BOOZ_NAV_STICK" LINK="forwarded" ID="150">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="int8" NAME="vx_sp"></field>
        <field TYPE="int8" NAME="vy_sp"></field>
        <field TYPE="int8" NAME="vz_sp"></field>
        <field TYPE="int8" NAME="r_sp"></field>
      </message>
      <message NAME="EXTERNAL_FILTER_SOLUTION" LINK="forwarded" ID="151">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="status"></field>
        <field UNIT="m" TYPE="float" NAME="x"></field>
        <field UNIT="m" TYPE="float" NAME="xd"></field>
        <field UNIT="m" TYPE="float" NAME="y"></field>
        <field UNIT="m" TYPE="float" NAME="yd"></field>
      </message>
      <message NAME="ROTORCRAFT_CAM_STICK" LINK="forwarded" ID="152">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="int8" NAME="tilt"></field>
        <field TYPE="int8" NAME="pan"></field>
      </message>
      <message NAME="GPS_INJECT" LINK="forwarded" ID="153">
        <field TYPE="uint8" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="packet_id"></field>
        <field TYPE="uint8[]" NAME="data"></field>
      </message>
    </msg_class>
    <msg_class NAME="ground">
      <message NAME="NEW_AIRCRAFT" ID="1">
        <field TYPE="string" NAME="ac_id"></field>
      </message>
      <message NAME="AIRCRAFT_DIE" ID="2">
        <field TYPE="string" NAME="ac_id"></field>
      </message>
      <message NAME="AIRCRAFTS" ID="3">
        <field TYPE="string" NAME="ac_list" FORMAT="csv"></field>
      </message>
      <message NAME="AIRCRAFTS_REQ" ID="4"/>
      <message NAME="SELECTED" ID="5">
        <field TYPE="string" NAME="aircraft_id"></field>
      </message>
      <message NAME="SELECTED_REQ" ID="6"/>
      <message NAME="WIND_CLEAR" ID="7">
        <field TYPE="string" NAME="ac_id"></field>
      </message>
      <message NAME="WIND" ID="8">
        <field TYPE="string" NAME="ac_id"></field>
        <field UNIT="deg_wind" TYPE="float" NAME="dir"></field>
        <field UNIT="m/s" TYPE="float" NAME="wspeed"></field>
        <field UNIT="m/s" TYPE="float" NAME="mean_aspeed"></field>
        <field UNIT="m/s" TYPE="float" NAME="stddev"></field>
      </message>
      <message NAME="CONFIG_REQ" ID="9">
        <field TYPE="string" NAME="ac_id"></field>
      </message>
      <message NAME="CONFIG" ID="10">
        <field TYPE="string" NAME="ac_id"></field>
        <field UNIT="url" TYPE="string" NAME="flight_plan"></field>
        <field UNIT="url" TYPE="string" NAME="airframe"></field>
        <field UNIT="url" TYPE="string" NAME="radio"></field>
        <field UNIT="url" TYPE="string" NAME="settings"></field>
        <field TYPE="string" NAME="default_gui_color"></field>
        <field TYPE="string" NAME="ac_name"></field>
      </message>
      <message NAME="FLIGHT_PARAM" ID="11">
        <field TYPE="string" NAME="ac_id"></field>
        <field UNIT="deg" TYPE="float" NAME="roll"></field>
        <field UNIT="deg" TYPE="float" NAME="pitch"></field>
        <field UNIT="deg" TYPE="float" NAME="heading"></field>
        <field UNIT="deg" TYPE="float" NAME="lat"></field>
        <field UNIT="deg" TYPE="float" NAME="long"></field>
        <field UNIT="m/s" TYPE="float" NAME="speed"></field>
        <field UNIT="deg" TYPE="float" NAME="course" FORMAT="%.1f"></field>
        <field UNIT="m" TYPE="float" NAME="alt"></field>
        <field UNIT="m/s" TYPE="float" NAME="climb"></field>
        <field UNIT="m" TYPE="float" NAME="agl"></field>
        <field UNIT="s (Unix time)" TYPE="float" NAME="unix_time"></field>
        <field UNIT="ms" TYPE="uint32" NAME="itow"></field>
        <field UNIT="m/s" TYPE="float" NAME="airspeed"></field>
      </message>
      <message NAME="AP_STATUS" ID="12">
        <field TYPE="string" NAME="ac_id"></field>
        <field VALUES="MANUAL|AUTO1|AUTO2|HOME|FAILSAFE" TYPE="string" NAME="ap_mode"></field>
        <field VALUES="MANUAL|ROLL_RATE|ROLL|COURSE" TYPE="string" NAME="lat_mode"></field>
        <field VALUES="WAYPOINT|ROUTE|CIRCLE" TYPE="string" NAME="horiz_mode"></field>
        <field VALUES="MANUAL|THROTTLE|CLIMB|ALT" TYPE="string" NAME="gaz_mode"></field>
        <field VALUES="NOFIX|NA|2D|3D|DGPS|RTK" TYPE="string" NAME="gps_mode"></field>
        <field VALUES="OFF|ON" TYPE="string" NAME="kill_mode"></field>
        <field TYPE="uint32" NAME="flight_time"></field>
        <field VALUES="UNKNOWN|INIT|ALIGN|OK|GPS_LOST|IMU_LOST|COV_ERR|IR_CONTRAST|ERROR" TYPE="string" NAME="state_filter_mode"></field>
      </message>
      <message NAME="NAV_STATUS" ID="13">
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="cur_block"></field>
        <field TYPE="uint8" NAME="cur_stage"></field>
        <field TYPE="uint32" NAME="block_time"></field>
        <field TYPE="uint32" NAME="stage_time"></field>
        <field UNIT="deg" TYPE="float" NAME="target_lat"></field>
        <field UNIT="deg" TYPE="float" NAME="target_long"></field>
        <field UNIT="m/s" TYPE="float" NAME="target_climb"></field>
        <field UNIT="m" TYPE="float" NAME="target_alt"></field>
        <field UNIT="deg" TYPE="float" NAME="target_course"></field>
        <field UNIT="m" TYPE="float" NAME="dist_to_wp"></field>
      </message>
      <message NAME="CAM_STATUS" ID="14">
        <field TYPE="string" NAME="ac_id"></field>
        <field UNIT="deg" TYPE="float" NAME="cam_lat"></field>
        <field UNIT="deg" TYPE="float" NAME="cam_long"></field>
        <field UNIT="deg" TYPE="float" NAME="cam_target_lat"></field>
        <field UNIT="deg" TYPE="float" NAME="cam_target_long"></field>
      </message>
      <message NAME="ENGINE_STATUS" ID="15">
        <field TYPE="string" NAME="ac_id"></field>
        <field UNIT="%" TYPE="float" NAME="throttle" FORMAT="%.1f"></field>
        <field TYPE="float" NAME="throttle_accu" FORMAT="%.1f"></field>
        <field UNIT="rpm" TYPE="float" NAME="rpm" FORMAT="%.1f"></field>
        <field UNIT="celcius" TYPE="float" NAME="temp"></field>
        <field UNIT="V" TYPE="float" NAME="bat"></field>
        <field UNIT="A" TYPE="float" NAME="amp"></field>
        <field UNIT="Wh" TYPE="uint16" NAME="energy"></field>
      </message>
      <message NAME="SVSINFO" ID="16">
        <field TYPE="string" NAME="ac_id"></field>
        <field UNIT="cm" TYPE="uint16" NAME="pacc"></field>
        <field TYPE="string" NAME="svid" FORMAT="csv"></field>
        <field TYPE="string" NAME="flags" FORMAT="csv"></field>
        <field VALUES="IDLE|SEARCH|SEARCH|UNUSABLE|CODELOCK|CARRIERLOCK|CARRIERLOCK|RECEIVING" TYPE="string" NAME="qi" FORMAT="csv"></field>
        <field UNIT="dbHz" TYPE="string" NAME="cno" FORMAT="csv"></field>
        <field UNIT="deg" TYPE="string" NAME="elev" FORMAT="csv"></field>
        <field UNIT="deg" TYPE="string" NAME="azim" FORMAT="csv"></field>
        <field UNIT="s" TYPE="string" NAME="msg_age" FORMAT="csv"></field>
      </message>
      <message NAME="FLY_BY_WIRE" ID="17">
        <field TYPE="string" NAME="ac_id"></field>
        <field VALUES="OK|LOST|REALLY_LOST" TYPE="string" NAME="rc_status"></field>
        <field VALUES="MANUAL|AUTO|FAILSAFE" TYPE="string" NAME="rc_mode"></field>
        <field UNIT="Hz" TYPE="uint8" NAME="rc_rate"></field>
      </message>
      <message NAME="INFLIGH_CALIB" ID="19">
        <field TYPE="string" NAME="ac_id"></field>
        <field VALUES="OFF|DOWN|UP" TYPE="string" NAME="if_mode"></field>
        <field TYPE="float" NAME="if_value1"></field>
        <field TYPE="float" NAME="if_value2"></field>
      </message>
      <message NAME="WORLD_ENV" ID="20">
        <field UNIT="m/s" TYPE="float" NAME="wind_east" FORMAT="%.1f"></field>
        <field UNIT="m/s" TYPE="float" NAME="wind_north" FORMAT="%.1f"></field>
        <field UNIT="m/s" TYPE="float" NAME="wind_up" FORMAT="%.1f"></field>
        <field TYPE="float" NAME="ir_contrast"></field>
        <field TYPE="float" NAME="time_scale"></field>
        <field VALUES="OFF|ON" TYPE="uint8" NAME="gps_availability"></field>
      </message>
      <message NAME="WORLD_ENV_REQ" ID="21">
        <field UNIT="deg" TYPE="float" NAME="lat"></field>
        <field UNIT="deg" TYPE="float" NAME="long"></field>
        <field UNIT="m" TYPE="float" NAME="alt"></field>
        <field UNIT="m" TYPE="float" NAME="east"></field>
        <field UNIT="m" TYPE="float" NAME="north"></field>
        <field UNIT="m" TYPE="float" NAME="up"></field>
      </message>
      <message NAME="CIRCLE_STATUS" ID="22">
        <field TYPE="string" NAME="ac_id"></field>
        <field UNIT="deg" TYPE="float" NAME="circle_lat"></field>
        <field UNIT="deg" TYPE="float" NAME="circle_long"></field>
        <field UNIT="m" TYPE="int16" NAME="radius"></field>
      </message>
      <message NAME="SEGMENT_STATUS" ID="23">
        <field TYPE="string" NAME="ac_id"></field>
        <field UNIT="deg" TYPE="float" NAME="segment1_lat"></field>
        <field UNIT="deg" TYPE="float" NAME="segment1_long"></field>
        <field UNIT="deg" TYPE="float" NAME="segment2_lat"></field>
        <field UNIT="deg" TYPE="float" NAME="segment2_long"></field>
      </message>
      <message NAME="MOVE_WAYPOINT" ID="24">
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="wp_id"></field>
        <field UNIT="deg" TYPE="float" NAME="lat" FORMAT="%.7f"></field>
        <field UNIT="deg" TYPE="float" NAME="long" FORMAT="%.7f"></field>
        <field UNIT="m" TYPE="float" NAME="alt"></field>
      </message>
      <message NAME="GET_DL_SETTING" ID="25">
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="index"></field>
      </message>
      <message NAME="DL_SETTING" ID="26">
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="index"></field>
        <field TYPE="float" NAME="value"></field>
      </message>
      <message NAME="JUMP_TO_BLOCK" ID="27">
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="block_id"></field>
      </message>
      <message NAME="DL_VALUES" ID="28">
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="string" NAME="values" FORMAT="csv"></field>
      </message>
      <message NAME="RAW_DATALINK" ID="29">
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="string" NAME="message" FORMAT=";sv"></field>
      </message>
      <message NAME="WAYPOINT_MOVED" ID="30">
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="uint8" NAME="wp_id"></field>
        <field UNIT="deg" TYPE="float" NAME="lat" FORMAT="%.7f"></field>
        <field UNIT="deg" TYPE="float" NAME="long" FORMAT="%.7f"></field>
        <field UNIT="m" TYPE="float" NAME="alt"></field>
        <field UNIT="m" TYPE="float" NAME="ground_alt"></field>
      </message>
      <message NAME="SURVEY_STATUS" ID="31">
        <field TYPE="string" NAME="ac_id"></field>
        <field UNIT="deg" TYPE="float" NAME="east_long"></field>
        <field UNIT="deg" TYPE="float" NAME="north_lat"></field>
        <field UNIT="deg" TYPE="float" NAME="west_long"></field>
        <field UNIT="deg" TYPE="float" NAME="south_lat"></field>
      </message>
      <message NAME="TELEMETRY_STATUS" ID="32">
        <description>      Datalink status reported by Server for the GCS
      Combines DATLINK_REPORT (telemetry class) and LINK_REPORT (ground class)</description>
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="string" NAME="link_id"></field>
        <field UNIT="s" TYPE="float" NAME="time_since_last_msg"></field>
        <field TYPE="uint32" NAME="rx_bytes"></field>
        <field TYPE="uint32" NAME="rx_msgs"></field>
        <field UNIT="bytes/s" TYPE="float" NAME="rx_bytes_rate" FORMAT="%.1f"></field>
        <field TYPE="uint32" NAME="tx_msgs"></field>
        <field UNIT="s" TYPE="uint32" NAME="uplink_lost_time"></field>
        <field TYPE="uint16" NAME="uplink_msgs"></field>
        <field TYPE="uint16" NAME="downlink_msgs"></field>
        <field UNIT="bytes/s" TYPE="uint16" NAME="downlink_rate"></field>
        <field UNIT="ms" TYPE="float" NAME="ping_time" FORMAT="%.2f"></field>
      </message>
      <message NAME="TELEMETRY_ERROR" ID="33">
        <description>Report a telemetry error</description>
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="string" NAME="message"></field>
      </message>
      <message NAME="TELEMETRY_MESSAGE" ID="34">
        <description>Encapsulated a telemetry class message (when using redundant link)</description>
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="string" NAME="link_id"></field>
        <field TYPE="string" NAME="message" FORMAT=";sv"></field>
      </message>
      <message NAME="DATALINK_MESSAGE" ID="35">
        <description>Encapsulated a datalink class message (when using redundant link)</description>
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="string" NAME="link_id"></field>
        <field TYPE="string" NAME="message" FORMAT=";sv"></field>
      </message>
      <message NAME="LINK_REPORT" ID="36">
        <description>Datalink status reported by Link for the Server</description>
        <field TYPE="string" NAME="ac_id"></field>
        <field TYPE="string" NAME="link_id"></field>
        <field UNIT="s" TYPE="uint32" NAME="run_time"></field>
        <field UNIT="s" TYPE="uint32" NAME="rx_lost_time"></field>
        <field TYPE="uint32" NAME="rx_bytes"></field>
        <field TYPE="uint32" NAME="rx_msgs"></field>
        <field TYPE="uint32" NAME="rx_err"></field>
        <field UNIT="bytes/s" TYPE="float" NAME="rx_bytes_rate" FORMAT="%.1f"></field>
        <field UNIT="msgs/s" TYPE="float" NAME="rx_msgs_rate" FORMAT="%.1f"></field>
        <field TYPE="uint32" NAME="tx_msgs"></field>
        <field UNIT="ms" TYPE="float" NAME="ping_time" FORMAT="%.2f"></field>
      </message>
      <message NAME="PLUMES" ID="100">
        <field TYPE="string" NAME="ids" FORMAT="csv"></field>
        <field TYPE="string" NAME="lats" FORMAT="csv"></field>
        <field TYPE="string" NAME="longs" FORMAT="csv"></field>
        <field TYPE="string" NAME="values" FORMAT="csv"></field>
      </message>
    </msg_class>
    <msg_class NAME="alert">
      <message NAME="BAT_LOW" ID="1">
        <field TYPE="string" NAME="ac_id"></field>
        <field VALUES="CATASTROPHIC|CRITIC|WARNING" TYPE="string" NAME="level"></field>
        <field TYPE="float" NAME="value"></field>
      </message>
      <message NAME="AIR_PROX" ID="2">
        <field TYPE="string" NAME="ac_id"></field>
        <field VALUES="CATASTROPHIC|CRITIC|WARNING" TYPE="string" NAME="level"></field>
      </message>
    </msg_class>
    <msg_class NAME="DIA">
      <message NAME="NAV_INFO" ID="1">
        <field TYPE="float" NAME="unix_time"></field>
        <field UNIT="deg" TYPE="float" NAME="lat"></field>
        <field UNIT="deg" TYPE="float" NAME="long"></field>
        <field UNIT="m" TYPE="uint16" NAME="alt"></field>
        <field UNIT="deg" TYPE="uint16" NAME="course"></field>
        <field UNIT="cm/s" TYPE="uint16" NAME="speed"></field>
        <field UNIT="deg" TYPE="int16" NAME="cam_roll"></field>
        <field UNIT="deg" TYPE="int16" NAME="cam_pitch"></field>
      </message>
    </msg_class>
  </protocol>
</configuration>